GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      02/13/18 15:15:05 Page 1
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


   2  *this file is modified by Xinda Ke from Wisconsin university IV_acopf.gms
   3  *updated by xinda ke in 8/1/2016
   4  *_______________________________________________________________________________
   5  * Filename: iv_acopf.gms
   6  * Description: AC optimal power flow model, rectangular current-voltage formulation
   7  *
   8  * Usage: gams iv_acopf.gms --case=/path/case.gdx
   9  *
  10  * Options:
  11  * --timeperiod: Select time period to solve. Default=1
  12  * --obj: Objective function, piecewise linear or quadratic. Default="quad"
  13  * --obj: Objective function, the default is to minimize for voltage deviation Default="v_dev"
  14  * --linelimits: Type of line limit data to use. Default="given"
  15  * --genPmin: Data for Generator lower limit. Default="given"
  16  * --allon: Option to turn on all gens or lines during solve. Default=none
  17  * --savesol: Turn on save solution option(1). Default=0
  18  * --verbose: Supresses printout(0). Default=1
  19  *_______________________________________________________________________________
  20   
  21   
  22   
  23   
  24   
  25   
  26   
  27  *===== SECTION: USER PARAMETERS
  28  *$include /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/user_params.gms
  29   
  30  * switched shunt user parameters
  31  * later these will be passed in from Python
  37   
  38  * other penalty parameters
  46   
  47  * load bus voltage goal point
  48  * TODO: replace this with a gdx file containing individual goal
  49  * values for the buses
  51   
  53   
  55   
  56  * disable solar ?
  58   
  60   
  61  * disable demand response?
  63  * disable controllable solar q limit
  65  * disable solar reactive power?
  67   
  68  * disable switched shunts?
  70   
  71  * start optimization algorithm at previous solution?
  73   
  74  * initial starting point
  76   
  77  * quadratic penalty on distance to previous solution
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      02/13/18 15:15:05 Page 2
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


  79   
  80  * use constraints in addition to variable bounds
  82   
  83  * append to report file
  85   
  86  * use pv/pq smoothing approach
  88   
  89  * pv/pq smoothing parameter
  91   
  92  * report file
  94   
  95  * write excel reports
  97   
  98  * use soft constraints for power balance
 100   
 101  * penalty parameter for soft power balance constraints
 103   
 104  *===== SECTION: DEVELOPER PARAMETERS
 105  *$include /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/developer_params.gms
 106   
 107  * System dependence
 110   
 111  *define the path and name of case to be used
 113  *$if not set case $set  case "Dukeare342.gdx"
 114   
 115  * Printout options
 117  * Define filepath, name and extension.
 119  * Define input case
 120   
 123   
 124  *$set obj "pwl"
 125   
 126  * Default: timeperiod = 1
 128  * Default: allon=0
 130  * Default: Quadratic objective function
 132  * Default: Ignore D-curve constraints
 133  *$if not set qlim $set qlim 0
 134  * Default: elastic demand bidding does not apply here
 136  * Default: Use provided line limits (as opposed to uwcalc)
 138  * Default: Use provided generator lower limit
 140  * Default: Save solution option turned off
 142   
 144   
 145  *===== SECTION: EXTRACT DATA
 146  *$batinclude "%filepath%excel2gdx4ACOPF.gms"  excelpath solar_rp demand_P demand_Q gen_status geni_psch
BATINCLUDE /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/extract_data_SunLamp_newformulation_cle.gms
 148  *Created by xinda ke in 7/20/2016
 149  * this code is to extract data from gdx
 150  *updated by xinda ke in 7/24/2016
 151   
 152  *==== SECTION: Data (pre) declaration
 154  sets
 155  * New sets
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      02/13/18 15:15:05 Page 3
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 156      conj /real,imag/
 157      costcoefset "Placeholder set for quadratic function coefficients (0,1,2)" /0*2/
 158      costptset "Placeholder set for pwl function pieces"  /1*40/
 159   
 160  * Timeperiod
 161      t /1/,
 162  * Dataset sets
 163      bus, gen, circuit, nongen, solarbus,
 164      interface, interfacemap (interface,bus,bus),
 165      demandbid, demandbidmap,
 166      fuel_t, fuel_s, prime_mover,
 167      bus_t, bus_s,
 168      gen_t, gen_s,
 169      branch_t, branch_s,
 170   
 171      interface_t,
 172      line(bus,bus,circuit),
 173      transformer(bus,bus,circuit),
 174      monitored_lines(bus,bus,circuit)
 175  ;
 176  set demanStep  "demandresponse-steps"  /1 * 5/;
 177  set demanRang  "demandresponse-steps"  /1 * 4/;
 178  alias(bus,i,j);
 179  alias(circuit,c);
 180  alias(gen,gen1);
 181  alias(bus_s,bus_s_0,bus_s_1,bus_s_2);
 182  parameters
 183      version, baseMVA, total_cost,Nb,
 184  * Domain info not stated because of how we iterate through data
 185       businfo(*,*,*),
 186       geninfo(*,*,*),
 187       fuelinfo(*,*),
 188       branchinfo(*,*,*,*,*),
 189       interfaceinfo(*,*,*)
 190  ;
 191  *-- Specially handled data (option specific)
 193  sets
 194    demandbid_t(*) / /
 195    demandbid_s(*) / /
 196    demandbid(*) / /
 197    demandbidmap (*,*) / /
 198  ;
 199   
 200  parameters
 201    demandbidinfo(*,*,*,*) / /
 202  ;
 204  *==== SECTION: Data read-in from input file
GDXIN   /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/7bus.gdx
--- LOAD  version = 1:version
--- LOAD  baseMVA = 3:baseMVA
--- LOAD  total_cost = 2:total_cost
--- LOAD  bus = 6:bus
--- LOAD  gen = 7:gen
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      02/13/18 15:15:05 Page 4
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


--- LOAD  circuit = 8:circuit
--- LOAD  bus_s = 17:bus_s
--- LOAD  line = 9:line
--- LOAD  transformer = 10:transformer
--- LOAD  bus_t = 16:bus_t
--- LOAD  gen_t = 18:gen_t
--- LOAD  branch_t = 20:branch_t
--- LOAD  branch_s = 21:branch_s
 209  *$LOAD fuel_t, fuel_s, prime_mover
--- LOAD  businfo = 28:businfo
--- LOAD  geninfo = 29:geninfo
--- LOAD  branchinfo = 30:branchinfo
--- LOAD  fuelinfo = 33:fuelinfo
--- LOAD  interface = 14:interface
--- LOAD  interfacemap = 15:interfacemap
--- LOAD  interfaceinfo = 32:interfaceinfo
 212  *$load bus_s, gen_s,
 213  *susceptance of switched shunt
 215   
 216   
 217  set pq  "real and reactive"  /1 * 2/;
 218  *$call 'GDXXRW input=solarbus.xlsx output=solarbus.gdx set=solarbus rng=Sheet1!A1:CX1 Cdim=1';
 219   
 220   
GDXIN   /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/solarbus2.gdx
--- LOAD  solarbus = 1:solarbus
 224   
 225  * Option to use elastic demand bidding turned on
 228  *==== SECTION: Validity of options
 229  * linelimits, case insensitive
 230   
 231   
 232   
 233   
 234  * allon, case insensitive
 235  * this will allow u to turn on certain bus or circuit selectively
 238   
 239  *==== SECTION: Data Declaration (extracted/manipulated from datafile)
 240  *-- All OPF models
 241  parameters
 242    type(bus)         "bus type (probably irrelevant, but gives reference bus[es])"
 243    pf(bus)           "bus demand power factor"
 244    Pd(bus)           "bus real power demand"
 245    Pd_respon_p_up(bus)   "the upper cap of real power of demand response"
 246    Pd_respon_p_down(bus)   "the downer cap of real power of demand response"
 247    Pd_respon_q_up(bus)   "the upper cap of reactive power of demand response"
 248    Pd_respon_q_down(bus)   "the downer cap of reactive power of demand response"
 249    Pd_respon_location(bus) "the location of demandresponse bus, equals 1 if that bus has this solar"
 250    gentype(gen)      "generator if equals 1 or slack bus equals 0"
 251    Pg(gen)           "gen real power output"
 252    PgSch(gen)        "gen scheduled power output"
 253    Pmax(gen)         "gen maximum real power output"
 254    Pmin(gen)         "gen minimum real power output"
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      02/13/18 15:15:05 Page 5
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 255    Va(bus)           "bus voltage angle"
 256    Vm(bus)           "bus voltage magnitude"
 257    MaxVm(bus)        "maximum bus voltage magnitude"
 258    MinVm(bus)        "minimum bus voltage magnitude"
 259    Gs(bus)           "bus shunt conductance"
 260    solar_r(bus)  "solar real power"
 261    dis_gen_par1(bus)      "distributed generator parameter 1"
 262    dis_gen_par2(bus)      "distributed generator parameter 1"
 263    dis_gen_par3(bus)      "distributed generator parameter 1"
 264    atBus(gen,bus)    "Location of generator"
 265    status(gen)       "generator status"
 266    status2(gen,bus)   "Online generator status marked for all bus"
 267    Vsch(bus)          "generator voltage schedule"
 268    r(i,j,c)          "line resistance"
 269    x(i,j,c)          "line reactance"
 270    B(i,j,c)          "line susceptance"
 271    ratio(i,j,c)      "transformer tap ratio",
 272    angle(i,j,c)      "transformer tap angle",
 273    rateA(i,j,c)      "line power limits (MW)",
 274    currentrate(i,j,c)  "line current limits",
 275    branchstatus(i,j,c) "line status",
 276    interfaceLimit(interface) "Limit on power across each interface"
 277    solarlocation(solarbus,bus)  "the location of solar bus"
 278    contro_solar_location(bus) "the location of controllable solar bus, equals 1 if that bus has this solar"
 279    csolar_Q_limit_up(bus) "the location of controllable solar bus, equals 1 if that bus has this solar"
 280    csolar_Q_limit_down(bus) "the location of controllable solar bus, equals 1 if that bus has this solar"
 281    contro_solar_pout(bus)   "the real power output of curtailable solar bus"
 282    Qd(bus)           "bus reactive power demand"
 283    Qg(gen)           "gen reactive power output"
 284    Qmax(gen)         "gen maximum reactive power output"
 285    Qmin(gen)         "gen minimum reactive power output"
 286    Bs(bus)           "bus shunt susceptance"
 287    yb(i,j,conj)      "Bus admittance matrix, Ybus"
 288    g(i,j,c)          "line conductance"
 289    bc(i,j,c)         "line charging susceptance"
 290    Bswitched(bus,bus_s)     "susceptance of switched shunts",
 291    numBswitched(bus,bus_s)  "number of each type of switched shunt elements at each bus"
 292  *  switchedShuntB_init(bus,bus_s) "initial value of switched shunt susceptance"
 293    switchedShuntB_init(bus) "initial value of switched shunt susceptance"
 294    numShuntStepsOn_init(bus,bus_s) "initial number of switched shunt steps on"
 295    demLoad(bus,demanStep) "demandresponse load"
 296    demPrice(bus,demanStep) "demandresponse price"
 297    demSlope(bus,demanStep) "slope"
 298    demLocation(bus)      "location of demand response"
 299  ;
 300   
 301   
 302   
 303   
 304  *r(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'r','given');
 305  *x(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'x','given');
 306  *branchstatus(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'branchstatus','%timeperiod%');
 307   
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      02/13/18 15:15:05 Page 6
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


GDXIN   /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/geni_st.gdx
--- LOAD  status = 1:status
 311   
GDXIN   /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/demand_response.gdx
--- LOAD  Pd_respon_location = 5:Pd_respon_location
--- LOAD  Pd_respon_p_down = 2:Pd_respon_p_down
--- LOAD  Pd_respon_q_down = 4:Pd_respon_q_down
--- LOAD  Pd_respon_p_up = 1:Pd_respon_p_up
--- LOAD  Pd_respon_q_up = 3:Pd_respon_q_up
 315   
GDXIN   /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/demandresponseload.gdx
--- LOAD  demLoad = 1:demLoad
 319  display demLoad;
GDXIN   /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/demandresponseprice.gdx
--- LOAD  demPrice = 1:demPrice
 323  demLocation('18')=1;
 324  demLocation('57')=1;
 325  demLoad(bus,demanStep)=demLoad(bus,demanStep)/baseMVA;
 326  demSlope(bus,demanStep)$(ord(demanStep) > 1 )=( (demPrice(bus,demanStep)-demPrice(bus,demanStep-1) ) /(demLoad(bus,demanStep)-demLoad(bus,demanStep-1)))$(demLoad(bus,demanStep) ne demLoad(bus,demanStep-1));
 327   
 328  display demLoad,demPrice,demLocation,demSlope;
 329  dis_gen_par1('13')=250*baseMVA*baseMVA;
 330  dis_gen_par1('57')=310*baseMVA*baseMVA;
 331  dis_gen_par2('13')=15.6*baseMVA;
 332  dis_gen_par2('57')=29.7*baseMVA;
 333  dis_gen_par3('13')=0.33;
 334  dis_gen_par3('57')=0.3;
 335   
 336  dis_gen_par1('7')=150*baseMVA*baseMVA;
 337  dis_gen_par1('18')=520*baseMVA*baseMVA;
 338  dis_gen_par1('56')=420*baseMVA*baseMVA;
 339  dis_gen_par2('7')=26.7*baseMVA;
 340  dis_gen_par2('18')=15.2*baseMVA;
 341  dis_gen_par2('56')=18.5*baseMVA;
 342  dis_gen_par3('7')=0.38;
 343  dis_gen_par3('18')=0.65;
 344  dis_gen_par3('56')=0.4;
 345   
 347  Pd_respon_p_down(bus)= Pd_respon_p_down(bus)/baseMVA;
 348  Pd_respon_q_down(bus)$Pd_respon_q_down(bus)= Pd_respon_q_down(bus)/Pd_respon_p_down(bus)/baseMVA;
 349  *Pd_respon_q_down(bus)= Pd_respon_q_down(bus)/baseMVA;
 350  Pd_respon_p_up(bus)= Pd_respon_p_up(bus)/baseMVA;
 351  *Pd_respon_q_up(bus)=Pd_respon_q_up(bus)/baseMVA;
 352  Pd_respon_q_up(bus)$Pd_respon_q_up(bus)= Pd_respon_q_up(bus)/Pd_respon_p_up(bus)/baseMVA;
 354   
 355   
 356   
 358  contro_solar_pout(bus)=0;
 359  contro_solar_location(bus)=0;
 361   
 363  csolar_Q_limit_up(bus)=0;
 364  csolar_Q_limit_down(bus)=0;
 365  contro_solar_location(bus)=0;
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      02/13/18 15:15:05 Page 7
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 367  *to per unit
 368  csolar_Q_limit_up(bus) =csolar_Q_limit_up(bus)/baseMVA;
 369  csolar_Q_limit_down(bus) =csolar_Q_limit_down(bus)/baseMVA;
 370   
 371  * trying to replace the input file in the gdx above using wisconsin gdx
 372  *solar section
 373  *$call 'GDXXRW input=solar_s.xlsx output=solar_s.gdx par=solar_s rng=Sheet1!B1:CX2 Cdim=1';
 374  *$call 'GDXXRW input=solarindex.xlsx output=solarlocation.gdx par=solarlocation rng=Sheet1!B1:CX3 Cdim=2 ';
GDXIN   /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/solarlocation.gdx
--- LOAD  solarlocation = 1:solarlocation
 378  * Bus type
 379  type(bus) = businfo(bus,'type','given');
 380  atBus(gen,bus)$geninfo(gen,'atBus',bus) = 1;
 381  Pmax(gen) = geninfo(gen,'Pmax','given')/baseMVA;
 382  Pmin(gen) = geninfo(gen,'Pmin','given')/baseMVA;
 383  Qmax(gen) = geninfo(gen,'Qmax','given')/baseMVA;
 384  Qmin(gen) = geninfo(gen,'Qmin','given')/baseMVA;
 385   
 386   
 387  *gentype  generator if equals 1 or slack bus equals 0
 388  gentype(gen)=1$(sum(bus$(atBus(gen,bus)), type(bus) eq 2));
 389  Vsch(bus)$(sum(gen,atBus(gen,bus)) > 0)=sum(gen$(atBus(gen,bus)), geninfo(gen,'Vg','given'))/ sum(gen, atBus(gen,bus));
 390  * Line resistance (r) and reactance (x)
 391  r(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'r','given');
 392  x(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'x','given');
 393  r(j,i,c)$r(i,j,c) = r(i,j,c);
 394  x(j,i,c)$x(i,j,c) = x(i,j,c);
 395  * line charging conductance
 396  bc(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'bc','given');
 397  bc(j,i,c)$(bc(i,j,c)) = bc(i,j,c);
 398  * transformer tap ratios and angles
 399  ratio(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'ratio','given');
 400  ratio(j,i,c)$(ratio(i,j,c)) =  1/ratio(i,j,c);
 401  * TODO is this right?
 402  * should we have 1/ratio and -angle? or
 403  * ratio and angle?
 404  * original was ratio and -angle, which makes no sense
 405  *CHECK the angle is all zero in 118 system, should be checked in other system
 406  angle(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'angle','given') * pi/180;
 407  * TODO is this right?
 408  angle(j,i,c)$(angle(i,j,c)) = -angle(i,j,c);
 409  *TODO the time step for branchstatus
 410  *time step has checked with Sidhart
 411  branchstatus(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'branchstatus','1');
 412  * Bus shunt conductance and susceptance
 413  * in the 118 system fixed shunt elements all got replaced by switched shunt elements
 414  Gs(bus) = businfo(bus,'Gs','given')/baseMVA;
 415  Bs(bus) = businfo(bus,'Bs','given')/baseMVA;
 416   
 417  * add the input replacement above
 418   
 419  status2(gen,bus) = 1$(atBus(gen,bus) and status(gen) eq 1 );
GDXIN   /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/UC_OPF_load_elwi_BV.gdx
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      02/13/18 15:15:05 Page 8
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


--- LOAD  Pd = 1:Pd
 423   
 424  Pd(bus) =Pd(bus)/baseMVA;
 425   
 426   
 427  * Voltage angle
 428  Va(bus) = businfo(bus,'Va','1')*pi/180;
 429  *Va(bus) = 0;
 430  *Voltage magnitude information
 431  Vm(bus) = businfo(bus,'Vm','1');
 432  *Vm(bus) = 1;
 433  maxVm(bus) = businfo(bus,'maxVm','given');
 434  minVm(bus) = businfo(bus,'minVm','given');
 435   
 436  * Initial branch status (active/not connected)
 437   
 438  * Define original cost model in dataset
 439  * If linelimits=inf, no monitored lines
 441   
 442  * Limit on power across each interface
 443  *interfaceLimit(interface) = interfaceinfo(interface,'%timeperiod%','rateA')/baseMVA;
 444   
 445  * Line current
 446  *currentrate(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'currentrateA','%linelimits%');
 447  *currentrate(j,i,c)$(line(i,j,c)) = branchinfo(i,j,c,'currentrateA','%linelimits%');
 448   
 449  * Take down all lines to buses marked as "isolated"
 450  branchstatus(i,j,c)$(type(i) eq 4 or type(j) eq 4) = 0;
 451   
 452  * Line susceptance
 453  B(i,j,c)$line(i,j,c) = -x(i,j,c)/(sqr(r(i,j,c))+sqr(x(i,j,c)));
 454  B(j,i,c)$(b(i,j,c)) = b(i,j,c);
 455   
 456   
 457   
GDXIN   /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/geni_p.gdx
--- LOAD  PgSch = 1:PgSch
 461  PgSch(gen) =PgSch(gen)/baseMVA;
 462  *starting searching point of generator real power output, might need obtained from input data
 463  Pg(gen)=PgSch(gen);
 464  *generator scheduled volage output
 465   
 466   
 467  * Line limit (active power)
 468  *line limit is disabled to match Matpower
 469  *rateA(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'rateA','%linelimits%')/baseMVA;
 470  *rateA(j,i,c)$(line(i,j,c)) = branchinfo(i,j,c,'rateA','%linelimits%')/baseMVA;
 471   
 472   
 473   
GDXIN   /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/UC_OPF_load_elwi_Q.gdx
--- LOAD  Qd = 1:Qd
 477  Qd(bus) =Qd(bus)/baseMVA;
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      02/13/18 15:15:05 Page 9
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 478   
 479   
 480   
 481   
 482  *$GDXIN /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/geni_q.gdx
 483  *$LOAD Qg
 484  *$GDXIN
 485  *Qg(gen) =Qg(gen)/baseMVA;
 486  *Qg is zero from gdx.
 487  Qg(gen)=geninfo(gen,'Qg','1')/baseMVA;
 488   
 489  * Bus shunt conductance and susceptance
 490   
 491   
 492  * line conductance
 493  g(i,j,c)$line(i,j,c) =  r(i,j,c)/(sqr(r(i,j,c))+sqr(x(i,j,c)));
 494  g(j,i,c)$(g(i,j,c)) = g(i,j,c);
 495   
 496   
 497   
 498   
 499  * line charging conductance
 500  *bc(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'bc','given');
 501   
 502   
 503  * number and susceptance of switched shunt element data
 504  * number of steps in each switched shunt
 505  numBswitched(bus,bus_s) =
 506    businfo(bus,'switchedelements',bus_s)
 507  *  $(
 508  *    businfo(bus,'SwSh_Stat','given') = 1 and
 509  *    businfo(bus,'MODSW','given') = 1 and
 510  *    businfo(bus,'SwSh_RMPCT','given') = 100)
 511      ;
 512  * step size in each switched shunt
 513  Bswitched(bus,bus_s)$numBswitched(bus,bus_s) =
 514    businfo(bus,'switchedBs',bus_s)/baseMVA;
 515  * switched shunt susceptance in a prior solution
 516  switchedShuntB_init(bus)$(sum(bus_s,numBswitched(bus,bus_s))) =
 517    businfo(bus,'SwSh_Stat','given')* businfo(bus,'BINIT','given')/baseMVA;
 518  *switchedShuntB_init('307723')=0;
 519  * not sure if there is any better way to set this
 520  * but we only need it for the first time step
 521  numShuntStepsOn_init(bus,bus_s)$numBswitched(bus,bus_s)
 522    = switchedshuntB_init(bus) * numBswitched(bus,bus_s)
 523    / sum(bus_s_1, numBswitched(bus,bus_s_1) * Bswitched(bus,bus_s_1));
 524   
 525  * ==== SECTION: Additional Model Options
 526  *-- Elastic demand bidding turned on/off
 528   
 529  *-- %allon% options
 531  *branchstatus(j,i,c)$(branchstatus(i,j,c)) =  branchstatus(i,j,c);
 532  * filepath is not coming in from batinclude from iv_acopf correctly
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 10
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 533  * use setnames to get it
 534  * temp_solution.gdx not found. is that OK?
 536  * load prior sol switched shunt settings if this is not the first time step
 538   
 539  *===== SECTION: PARAMETERS FROM USER
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/params_from_user.gms
 541   
 542  * switched shunt penalty parameters
 543  parameter
 544    shuntSwitchingPenalty1 /0.001/
 545    shuntSwitchingPenalty2 /1e6/
 546    shuntSwitchingTolerance /1e0/
 547    shuntSwitchingBudgetPenalty /1e6/
 548    shuntSwitchingBudget /5e0/;
 549   
 550  * other penalty parameters
 551  parameter
 552    load_bus_volt_pen_coeff_1 /1/
 553    load_bus_volt_pen_coeff_2 /0/
 554    demand_response_decrease_penalty /10/
 555    demand_response_increase_penalty /10/
 556    solar_curtail_penalty /50/
 557    generator_voltage_deviation_penalty /100000.0/
 558    previous_solution_penalty_2 /0/;
 559   
 560  * other parameters
 561  parameter
 562    previous_solution_as_start_point /0/
 563    load_bus_volt_dead_band /0.01/
 564    load_bus_voltage_goal /1.0/
 565    use_constrs /0/
 566    use_pv_pq_smoothing /0/
 567    pv_pq_smoothing_param /0.001/;
 568   
 569   
 570  *===== SECTION: MODEL PARAMETERS
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/model_params.gms
 572   
 573   
 574  * generator participation in system adjustment from real generation schedule
 575  parameter
 576    gen_participation_factor(gen);
 577   
 578  sets
 579      load(bus) "Load buses"
 580      isGen(bus) "Generator buses"
 581      activeGen(bus) "Active generator buses"
 582      isLine(i,j) "Active (i,j) line"
 583      isSolar(bus) "solar bus";
 584   
 585  * prior variable values
 586  * penalize the distance of the new solution to
 587  * these prior variables in order to promote
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 11
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 588  * continuity
 589  parameter
 590      V_P_prior(gen)           "Real power generation of generator",
 591      V_Q_prior(gen)           "Reactive power generation of generator",
 592      P_S_prior(i)      "real power generation of solar bus"
 593      Q_S_prior(i)      "reactive power generation of solar bus"
 594      V_real_prior(i)          "Real part of bus voltage",
 595      V_imag_prior(i)          "Imaginary part of bus voltage",
 596      Solar_p_curtail_prior(i)    "the amount of real power cutailed from controllable",
 597      De_response_Dec_P_prior(i)         "the decrease in demand response",
 598      De_response_Inc_P_prior(i)         "the increment in demand response"
 599      balance_real_bound
 600      balance_react_bound
 601  ;
 602   
 603  parameters
 604    saturaup(bus) "the saturation status of generator bus"
 605    saturalow(bus) "the saturation status of generator bus"
 606    genQtemp(gen)      "the reactive of generator ";
 607   
 608  scalar voltageran_low,voltageran_high,step_leng;
 609   
 610  * bus voltage target info
 611  set
 612      bus_penalize_volt_mag_target(bus) "yes if the voltage magnitude target penalty should be assessed for this bus"
 613  parameter
 614      volt_mag_target(bus) ideal voltage magnitude for each bus;
 615   
 616  * variable values, constraint violation, and objective. at start point
 617  parameter
 618  * control variables
 619      V_P_start(gen)
 620      V_Q_start(gen)
 621      P_S_start(i)
 622      Q_S_start(i)
 623      V_real_start(i)
 624      V_imag_start(i)
 625      Solar_p_curtail_start(i)
 626      De_response_Dec_P_start(i)
 627      De_response_Inc_P_start(i)
 628      V_shunt_start(bus,bus_s)
 629      V_P_system_deviation_start
 630      V_switchedshuntB_start(i)
 631  * current
 632      V_LineIr_start(i,j,c)
 633      V_LineIr_start(j,i,c)
 634      V_LineIq_start(i,j,c)
 635      V_LineIq_start(j,i,c)
 636  * losses
 637      V_Lossijc_start(i,j,c)
 638      V_Lossi_start(i)
 639  * penalties and objectives
 640      V_load_bus_volt_pen_dev_start
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 12
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 641      V_load_bus_volt_pen_start
 642      V_shuntSwitching_start(i,bus_s)
 643      V_totalShuntSwitching_start
 644      V_shuntSwitchingPenalty_start(i,bus_s)
 645      V_shuntTotalSwitchingPenalty_start
 646      V_shuntSwitchingTotalPenalty_start
 647      V_previous_solution_penalty_start
 648      V_objcost_start
 649  * variable bound violations
 650      gen_p_lo_viol_start(gen)
 651      gen_p_up_viol_start(gen)
 652      gen_q_lo_viol_start(gen)
 653      gen_q_up_viol_start(gen)
 654      solar_p_fx_viol_start(i)
 655      solar_q_up_viol_start(i)
 656      solar_q_lo_viol_start(i)
 657      solar_p_curtail_up_viol_start(bus)
 658      De_response_Inc_P_up_viol_start(bus)
 659      De_response_dec_P_lo_viol_start(bus)
 660      v_shunt_up_viol_start(bus,bus_s)
 661  * constraint violations
 662      balance_p_viol_start(i)
 663      balance_q_viol_start(i)
 664      p_generator_add_viol_start(gen)
 665      c_I_limit_viol_start(i,j,c)
 666      c_V_limit_lo_viol_start(i)
 667      c_V_limit_up_viol_start(i)
 668      v_generator_hardupl_viol_start(i)
 669      v_generator_harddownl_viol_start(i)
 670      v_under_q_up_slack_viol_start(gen)
 671      v_over_q_lo_slack_viol_start(gen)
 672  * summaries
 673      p_load_start
 674      p_gen_start
 675      p_shunt_start
 676      p_solar_start
 677      p_dr_start
 678      p_imbalance_start
 679      min_p_shortfall
 680      sum_loss_start
 681  *    v_load_bus_volt_pen_start
 682  *    v_total_shunt_switching_start
 683  *    v_shunt_switching_total_penalty_start
 684  *    v_previous_solution_penalty_start
 685  *    v_objcost_start
 686      max_gen_p_lo_viol_start
 687      max_gen_p_up_viol_start
 688      max_gen_q_lo_viol_start
 689      max_gen_q_up_viol_start
 690      max_solar_p_fx_viol_start
 691      max_solar_q_up_viol_start
 692      max_solar_q_lo_viol_start
 693      max_solar_p_curtail_up_viol_start
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 13
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 694      max_De_response_Inc_P_up_viol_start
 695      max_De_response_dec_P_lo_viol_start
 696      max_v_shunt_up_viol_start
 697      max_balance_p_viol_start
 698      max_balance_q_viol_start
 699      max_p_generator_add_viol_start
 700      max_c_I_limit_viol_start
 701      max_c_V_limit_lo_viol_start
 702      max_c_V_limit_up_viol_start
 703      max_v_generator_hardupl_viol_start
 704      max_v_generator_harddownl_viol_start
 705      max_v_under_q_up_slack_viol_start
 706      max_v_over_q_lo_slack_viol_start;
 707   
 708  * variable values, constraint violation, and objective. at solution point
 709  parameter
 710  * control variables
 711      V_P_sol(gen)
 712      V_Q_sol(gen)
 713      P_S_sol(i)
 714      Q_S_sol(i)
 715      V_real_sol(i)
 716      V_imag_sol(i)
 717      Solar_p_curtail_sol(i)
 718      De_response_Dec_P_sol(i)
 719      De_response_Inc_P_sol(i)
 720      V_shunt_sol(bus,bus_s)
 721      V_P_system_deviation_sol
 722      V_switchedshuntB_sol(i)
 723  * current
 724      V_LineIr_sol(i,j,c)
 725      V_LineIr_sol(j,i,c)
 726      V_LineIq_sol(i,j,c)
 727      V_LineIq_sol(j,i,c)
 728  * losses
 729      V_Lossijc_sol(i,j,c)
 730      V_Lossi_sol(i)
 731  * penalties and objectives
 732      V_shuntSwitching_sol(i,bus_s)
 733      V_totalShuntSwitching_sol
 734      V_shuntSwitchingPenalty_sol(i,bus_s)
 735      V_shuntTotalSwitchingPenalty_sol
 736      V_shuntSwitchingTotalPenalty_sol
 737      V_previous_solution_penalty_sol
 738      V_objcost_sol
 739  * variable bound violations
 740      gen_p_lo_viol_sol(gen)
 741      gen_p_up_viol_sol(gen)
 742      gen_q_lo_viol_sol(gen)
 743      gen_q_up_viol_sol(gen)
 744      solar_p_fx_viol_sol(i)
 745      solar_q_up_viol_sol(i)
 746      solar_q_lo_viol_sol(i)
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 14
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 747      solar_p_curtail_up_viol_sol(bus)
 748      De_response_Inc_P_up_viol_sol(bus)
 749      De_response_dec_P_lo_viol_sol(bus)
 750      v_shunt_up_viol_sol(bus,bus_s)
 751  * constraint violations
 752      balance_p_viol_sol(i)
 753      balance_q_viol_sol(i)
 754      p_generator_add_viol_sol(gen)
 755      c_I_limit_viol_sol(i,j,c)
 756      c_V_limit_lo_viol_sol(i)
 757      c_V_limit_up_viol_sol(i)
 758      v_generator_hardupl_viol_sol(i)
 759      v_generator_harddownl_viol_sol(i)
 760      v_under_q_up_slack_viol_sol(gen)
 761      v_over_q_lo_slack_viol_sol(gen)
 762  * summaries
 763      sum_loss_sol
 764  *    v_load_bus_volt_pen_sol
 765  *    v_total_shunt_switching_sol
 766  *    v_shunt_switching_total_penalty_sol
 767  *    v_previous_solution_penalty_sol
 768  *    v_objcost_sol
 769      max_gen_p_lo_viol_sol
 770      max_gen_p_up_viol_sol
 771      max_gen_q_lo_viol_sol
 772      max_gen_q_up_viol_sol
 773      max_solar_p_fx_viol_sol
 774      max_solar_q_up_viol_sol
 775      max_solar_q_lo_viol_sol
 776      max_solar_p_curtail_up_viol_sol
 777      max_De_response_Inc_P_up_viol_sol
 778      max_De_response_dec_P_lo_viol_sol
 779      max_v_shunt_up_viol_sol
 780      max_balance_p_viol_sol
 781      max_balance_q_viol_sol
 782      max_p_generator_add_viol_sol
 783      max_c_I_limit_viol_sol
 784      max_c_V_limit_lo_viol_sol
 785      max_c_V_limit_up_viol_sol
 786      max_v_generator_hardupl_viol_sol
 787      max_v_generator_harddownl_viol_sol
 788      max_v_under_q_up_slack_viol_sol
 789      max_v_over_q_lo_slack_viol_sol;
 790   
 791  * files for output
 792  file report_file /'report.txt'/;
 793  report_file.nr = 2;
 794  report_file.nd = 6;
 795  report_file.pc = 5;
 797  put report_file;
 798  put 'sunlamp crest-vct prototype acopf model' /;
 799  put 'start run' /;
 800  putclose;
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 15
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 801   
 802  *===== SECTION: DATA MANIPULATION
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/data_manipulation.gms
 804   
 805  gen_participation_factor(gen)
 806    = 1$(sum(bus$(atBus(gen,bus) and businfo(bus,'type','given') eq 3),1) > 0);
 807   
 808  * set shunt penalties to 0
 809  * if this is the first time step
 811  shuntSwitchingPenalty1 = 0;
 812  shuntSwitchingPenalty2 = 0;
 813  shuntSwitchingTolerance = 0;
 814  shuntSwitchingBudgetPenalty = 0;
 815  shuntSwitchingBudget = 0;
 817   
 818  display Bswitched;
 819   
 820  *--- Define load, gen buses and active lines
 821  file fx;
 822  put fx;
 823   
 824  load(bus)$(type(bus) eq 1)  = 1;
 825  isSolar(bus)$(sum(solarbus, solarlocation(solarbus,bus)) eq 1) = 1;
 826  isGen(bus)$(not(load(bus))) = 1;
 827  activeGen(bus)$(isGen(bus) and (sum(gen$atBus(gen,bus), status(gen))>0) ) = 1;
 828  option isLine < branchstatus;
 829   
 830  * disable solar
 832   
 833  saturaup(bus)=0;
 834   saturalow(bus)=0;
 835  genQtemp(gen)=0;
 836  *voltageran_low=0.999;
 837  *voltageran_high=1.001;
 838  voltageran_low=1;
 839  voltageran_high=1;
 840  step_leng=0.1;
 841   
 842  * voltage magnitude target will be loaded from a file
 843  * for now set it as the scalar voltage goal
 844   
 845  * load from a gdx file if desired
 846  * this gdx file can be written in the Python simulation code
 847  * after reading from csv
 848  * or else we can read from csv and construct a gdx file in the Gams code
 849  * for now we assume the gdx file is constructed externally to the Gams code
 850  volt_mag_target(bus) = load_bus_voltage_goal;
 851   
 852  * which buses should be subject to a voltage magnitude target deviation penalty?
 853  * for any given bus, if the real power load has a nonzero value,
 854  * then we should penalize the deviation from the voltage magnitude target
 855  bus_penalize_volt_mag_target(bus) = yes$(abs(pd(bus)) > 0 and abs(volt_mag_target(bus)) > 0);
 856   
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 16
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 857  *===== SECTION: VARIABLE DEFINITION
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/var_declaration.gms
 859  free variables
 860      V_P(gen)           "Real power generation of generator",
 861      V_Q(gen)           "Reactive power generation of generator",
 862      P_S(i)      "real power generation of solar bus"
 863      Q_S(i)      "reactive power generation of solar bus"
 864      V_real(i)          "Real part of bus voltage",
 865      V_imag(i)          "Imaginary part of bus voltage",
 866   
 867      V_LineIr(i,j,c)    "Real current flowing from bus i towards bus j on line c",
 868      V_LineIq(i,j,c)    "Reactive current flowing from bus i towards bus j on line c"
 869   
 870      V_Lossijc(i,j,c)      "Loss on line c connecting bus i and bus j"
 871      V_Lossi(i)         "Loss on lines connecting with bus i"
 872      V_switchedshuntB(i) "total susceptance from switched shunts connected to bus i"
 873  ;
 874   
 875  integer variables
 876      V_shunt(bus,bus_s)    "number of shunt steps switched on"
 877  ;
 878   
 879  negative variables
 880      De_response_Dec_P(bus)         "the decrease in demand response"
 881  ;
 882   
 883  positive variables
 884      V_p_over(bus) "real power over"
 885      V_p_under(bus) "real power under"
 886      V_q_over(bus) "reactive power over"
 887      V_q_under(bus) "reactive power under"
 888      Solar_p_curtail(bus)    "the amount of real power cutailed from controllable solar bus"
 889      De_response_Inc_P(bus)         "the increment in demand response"
 890      controlLoad(bus)       "controllableload"
 891      V_load_bus_volt_pen "total penalty from load bus voltage deviation"
 892      V_load_bus_volt_pen_dev(i) "penalized load bus voltage deviation - i.e. deviation less dead band radius"
 893      V_shuntSwitching(i,bus_s) "number of steps switched"
 894      V_totalShuntSwitching "total number of steps switched"
 895      V_shuntSwitchingPenalty(i,bus_s) "defines local shunt switching"
 896      V_shuntTotalSwitchingPenalty "penalty incurred by total shunt switching"
 897      V_shuntSwitchingTotalPenalty "total penalty incurrent by shunt switching"
 898      V_devi(bus)          "absolute value of voltage deviation"
 899      V_pw_cost(gen)    "Generator piecewise cost"
 900      V_dem_Load(bus, demanStep)        "demand load level"
 901  *    V_Pd_elastic(demandbid)     "Elastic incremental demand"
 902  *    V_demandbid_rev(demandbid)  "Revenue from elastic incremental demand"
 903      V_artup(bus)       "artificial variablers"
 904      V_artlow(bus)       "artificial variablers"
 905      V_previous_solution_penalty "total penalty on deviation to previous solution"
 906  ;
 907  * these are not necessary as the vars are defined as positive variables
 908  *V_artup.l(bus)=0;
 909  *V_artlow.l(bus)=0;
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 17
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 910   
 911  free variable
 912  V_objcost  "Total cost of objective function"
 913  V_objcosttest  "Total cost of objective function"
 914  V_P_system_deviation "system total adjustment from real generation schedule"
 915  ;
 916  *display  V_real.l;
 917  *===== SECTION: EQUATION DECLARATION
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/eqn_declaration.gms
 919  equations
 920      c_load_bus_volt_pen_def "defines total load bus voltage deviation penalty"
 921      c_load_bus_volt_pen_dev_def1(i) "first constraint defining penalized load bus voltage deviation"
 922      c_load_bus_volt_pen_dev_def2(i) "second constraint defining penalized load bus voltage deviation"
 923   
 924      c_switchedshuntB_Def(i) "defines total susceptance from switched shunts at bus i"
 925      c_shuntSwitchingDef1(i,bus_s) "defines number of steps switched - side 1"
 926      c_shuntSwitchingDef2(i,bus_s) "defines number of steps switched - side 2"
 927      c_totalShuntSwitchingDef "defines total number of steps switched"
 928      c_shuntSwitchingPenaltyDef1(i,bus_s) "defines local shunt switching penalty - segment 1"
 929      c_shuntSwitchingPenaltyDef2(i,bus_s) "defines local shunt switching penalty - segment 2"
 930      c_shuntTotalSwitchingPenalty "defines penalty incurred by total shunt switching"
 931      c_shuntSwitchingTotalPenaltyDef " defines total penalty incurrent by shunt switching"
 932   
 933      c_I_limit(i,j,c)     "Limit apparent current on a line"
 934      c_V_limit_lo(i)      "Limit voltage magnitude on a line"
 935      c_V_limit_up(i)      "Limit voltage magnitude on a line"
 936      c_LineIrij(i,j,c)    "Real current flowing from bus i into bus j along line c"
 937      c_LineIrji(i,j,c)    "Real  current flowing from bus j into bus i along line c"
 938      c_LineIqij(i,j,c)    "Reactive current  flowing from bus i into bus j along line c"
 939      c_LineIqji(i,j,c)    "Reactive current flowing from bus j into bus i along line c"
 940   
 941      c_Lossijc(i,j,c)     "Loss on line c connecting bus i and bus j"
 942      c_Lossi(i)           "Loss on lines connected with bus i"
 943   
 944      c_BalanceP_nosolar(bus)      "Balance of real power for bus without solar"
 945      c_BalanceP_solar(bus)      "Balance of real power for bus with solar"
 946      c_BalanceP_control_solar(bus)        "balance of real power for controllable solar"
 947      c_BalanceQ_nosolar(bus)      "Balance of reactive power for bus without solar"
 948      c_BalanceQ_solar(bus)      "Balance of reactive power for bus with solar"
 949      v_generator_addup(bus) "generator voltage constraints added selectively"
 950      v_generator_addlow(bus) "generator voltage constraints added"
 951      v_generator_addup_arti(bus)  "generator voltage up constraints added with artificial variables"
 952      v_generator_addlow_arti(bus)  "generator voltage low constraints added with artificial variables"
 953      v_generator_hardupl(bus) "bus voltage constraints upper bound"
 954      v_generator_harddownl(bus) "bus voltage constraints lower bound"
 955      p_generator_add(gen) "enforces generator participation factor in adjustment from schedule"
 956      p_generator_addup(gen) "generator real power constraints added"
 957      p_generator_addlow(gen) "generator real power constraints added"
 958      c_obj  "Objective function"
 959      c_objtest  "Objective function"
 960      c_previous_solution_penalty_def "defines previous solution deviation penalty"
 961      c_gen_q_arctan_v(gen) "smooth arctan formulation of pv/pq complementarity constraint"
 962  ;
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 18
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 963  *display V_P.l,V_P.up, V_P.lo;
 964  *===== SECTION: EQUATION DEFINITION
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/eqn_definition.gms
 966   
 967  * defines previous solution deviation penalty
 968  c_previous_solution_penalty_def..
 969      V_previous_solution_penalty
 970        =g=
 971      previous_solution_penalty_2 * (
 972          sum(gen, sqr(V_P_prior(gen) - V_P(gen)))
 973        + sum(gen, sqr(V_Q_prior(gen) - V_Q(gen)))
 974        + sum(i, sqr(P_S_prior(i) - P_S(i)))
 975        + sum(i, sqr(Q_S_prior(i) - Q_S(i)))
 976        + sum(i, sqr(V_real_prior(i) - V_real(i)))
 977        + sum(i, sqr(V_imag_prior(i) - V_imag(i)))
 978        + sum(i, sqr(Solar_p_curtail_prior(i) - Solar_p_curtail(i)))
 979        + sum(i, sqr(De_response_Inc_P_prior(i) - De_response_Inc_P(i)))
 980        + sum(i, sqr(De_response_Dec_P_prior(i) - De_response_Dec_P(i))));
 981   
 982  * defines total load bus voltage deviation penalty
 983  c_load_bus_volt_pen_def..
 984      V_load_bus_volt_pen
 985        =g=
 986      sum(i$(bus_penalize_volt_mag_target(i) and type(i) eq 1),
 987            load_bus_volt_pen_coeff_1 * V_load_bus_volt_pen_dev(i)
 988          + load_bus_volt_pen_coeff_2 * sqr(V_load_bus_volt_pen_dev(i)))
 989  ;
 990   
 991   
 992   
 993  * defines total susceptance from switched shunts connected to a bus
 994  c_switchedshuntB_def(i)$sum(bus_s$numBswitched(i, bus_s), 1)..
 995      V_switchedshuntB(i)
 996        =e=
 997      sum(bus_s$numBswitched(i,bus_s), Bswitched(i,bus_s) * V_shunt(i,bus_s));
 998   
 999  * defines number of steps switched - side 1
1000  c_shuntSwitchingDef1(i,bus_s)$numBswitched(i,bus_s)..
1001      V_shuntSwitching(i,bus_s)
1002        =g=
1003      V_shunt(i,bus_s) - numShuntStepsOn_init(i,bus_s)
1004  ;
1005   
1006  * defines number of steps switched - side 2
1007  c_shuntSwitchingDef2(i,bus_s)$numBswitched(i,bus_s)..
1008      V_shuntSwitching(i,bus_s)
1009        =g=
1010      numShuntStepsOn_init(i,bus_s) - V_shunt(i,bus_s)
1011  ;
1012   
1013  * defines total number of steps switched
1014  c_totalShuntSwitchingDef..
1015      V_totalShuntSwitching
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 19
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


1016        =g=
1017      sum((i,bus_s)$numBswitched(i,bus_s),V_shuntSwitching(i,bus_s))
1018  ;
1019   
1020  * defines local shunt switching penalty - segment 1
1021  c_shuntSwitchingPenaltyDef1(i,bus_s)$numBswitched(i,bus_s)..
1022      V_shuntSwitchingPenalty(i,bus_s)
1023        =g=
1024      shuntSwitchingPenalty1 * V_shuntSwitching(i,bus_s)
1025  ;
1026   
1027  * defines local shunt switching penalty - segment 2
1028  c_shuntSwitchingPenaltyDef2(i,bus_s)$numBswitched(i,bus_s)..
1029      V_shuntSwitchingPenalty(i,bus_s)
1030        =g=
1031      shuntSwitchingPenalty2 * (V_shuntSwitching(i,bus_s) - shuntSwitchingTolerance)
1032  ;
1033   
1034  * defines penalty incurred by total shunt switching
1035  c_shuntTotalSwitchingPenalty..
1036      V_shuntTotalSwitchingPenalty
1037        =g=
1038      shuntSwitchingBudgetPenalty * (V_totalShuntSwitching - shuntSwitchingBudget)
1039  ;
1040   
1041  * defines total penalty incurrent by shunt switching
1042  c_shuntSwitchingTotalPenaltyDef..
1043      V_shuntSwitchingTotalPenalty
1044        =g=
1045      V_shuntTotalSwitchingPenalty +
1046      sum((i,bus_s)$numBswitched(i,bus_s),V_shuntSwitchingPenalty(i,bus_s))
1047  ;
1048   
1049  * Limit apparent current on a line
1050  c_I_limit(i,j,c)$(branchstatus(i,j,c) or branchstatus(j,i,c))..
1051      sqr(V_LineIr(i,j,c)) + sqr(V_LineIq(i,j,c))
1052        =l=
1053      sqr(currentrate(i,j,c))
1054  ;
1055   
1056  *Limit voltage magnitude on a line
1057  c_V_limit_lo(i)..
1058      sqr(V_real(i)) + sqr(V_imag(i)) =g= sqr(minVm(i))
1059  ;
1060   
1061  *Limit voltage magnitude on a line
1062  c_V_limit_up(i)..
1063      sqr(V_real(i)) + sqr(V_imag(i)) =l= sqr(maxVm(i))
1064  ;
1065   
1066  *Real current flowing from bus i into bus j along line c
1067  c_LineIrij(i,j,c)$(branchstatus(i,j,c))..
1068           V_LineIr(i,j,c) =e=
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 20
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


1069              1/sqr(ratio(i,j,c))
1070                  * (g(i,j,c)*V_real(i) - (b(i,j,c) + bc(i,j,c)/2)*V_imag(i))
1071              - 1/ratio(i,j,c)
1072                  * (  (g(i,j,c)*V_real(j) - b(i,j,c)*V_imag(j))*cos(angle(i,j,c))
1073                     - (g(i,j,c)*V_imag(j) + b(i,j,c)*V_real(j))*sin(angle(i,j,c))
1074                    )
1075  ;
1076   
1077  *Real current flowing from bus j into bus i along line c
1078  c_LineIrji(i,j,c)$(branchstatus(i,j,c))..
1079           V_LineIr(j,i,c) =e=
1080              (g(i,j,c)*V_real(j) - (b(i,j,c) + bc(i,j,c)/2)*V_imag(j))
1081              - 1/ratio(i,j,c)
1082                  * (  (g(i,j,c)*V_real(i) - b(i,j,c)*V_imag(i))*cos(-angle(i,j,c))
1083                     - (g(i,j,c)*V_imag(i) + b(i,j,c)*V_real(i))*sin(-angle(i,j,c))
1084                    )
1085  ;
1086   
1087  *Reactive current flowing from bus i into bus j along line c
1088  c_LineIqij(i,j,c)$(branchstatus(i,j,c))..
1089           V_LineIq(i,j,c) =e=
1090              1/sqr(ratio(i,j,c))
1091                  * (g(i,j,c)*V_imag(i) + (b(i,j,c) + bc(i,j,c)/2)*V_real(i))
1092              - 1/ratio(i,j,c)
1093                  * (  (g(i,j,c)*V_imag(j) + b(i,j,c)*V_real(j))*cos(angle(i,j,c))
1094                     + (g(i,j,c)*V_real(j) - b(i,j,c)*V_imag(j))*sin(angle(i,j,c))
1095                    )
1096  ;
1097   
1098  *Reactive current flowing from bus j into bus i along line c
1099  c_LineIqji(i,j,c)$(branchstatus(i,j,c))..
1100           V_LineIq(j,i,c) =e=
1101              (g(i,j,c)*V_imag(j) + (b(i,j,c) + bc(i,j,c)/2)*V_real(j))
1102              - 1/ratio(i,j,c)
1103                  * (  (g(i,j,c)*V_imag(i) + b(i,j,c)*V_real(i))*cos(-angle(i,j,c))
1104                     + (g(i,j,c)*V_real(i) - b(i,j,c)*V_imag(i))*sin(-angle(i,j,c))
1105                    )
1106  ;
1107   
1108  *Balance of real power for bus without solar
1109  c_BalanceP_nosolar(i)$(type(i) ne 4 and (sum(solarbus,solarlocation(solarbus,i)) eq 0))..
1110          sum(gen$(atBus(gen,i) and status(gen)), V_P(gen))
1111          - (Pd(i)+sum(demanStep ,V_dem_Load(i, demanStep))$(demLocation(i) eq 1)+ De_response_Inc_P(i)$(Pd_respon_location(i)) + De_response_Dec_P(i)$(Pd_respon_location(i))   )
1112          + V_p_over(i)
1113          - V_p_under(i)
1114              =e=
1115            V_real(i) *
1116          ( sum((j,c)$(branchstatus(i,j,c) ), V_LineIr(i,j,c))
1117            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIr(i,j,c)) )
1118          + V_imag(i) *
1119           (sum((j,c)$(branchstatus(i,j,c) ), V_LineIq(i,j,c))
1120            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIq(i,j,c)))
1121          + Gs(i) * (sqr(V_real(i)) + sqr(V_imag(i)))
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 21
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


1122  ;
1123  *Balance of real power for bus with uncontrollable solar installed
1124  c_BalanceP_solar(i)$(type(i) ne 4 and (sum(solarbus,solarlocation(solarbus,i)) ne 0) and contro_solar_location(i) eq 0)..
1125          sum(gen$(atBus(gen,i) and status(gen)), V_P(gen))
1126           - (Pd(i)+ sum(demanStep ,V_dem_Load(i,demanStep))$(demLocation(i) eq 1)- P_S(i)+De_response_Inc_P(i)$(Pd_respon_location(i)) + De_response_Dec_P(i)$(Pd_respon_location(i)))
1127          + V_p_over(i)
1128          - V_p_under(i)
1129              =e=
1130            V_real(i) *
1131          ( sum((j,c)$(branchstatus(i,j,c) ), V_LineIr(i,j,c))
1132            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIr(i,j,c)) )
1133          + V_imag(i) *
1134           (sum((j,c)$(branchstatus(i,j,c) ), V_LineIq(i,j,c))
1135            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIq(i,j,c)))
1136          + Gs(i) * (sqr(V_real(i)) + sqr(V_imag(i)))
1137  ;
1138   
1139  c_BalanceP_control_solar(i)$(type(i) ne 4 and  contro_solar_location(i) ne 0)..
1140          sum(gen$(atBus(gen,i) and status(gen)), V_P(gen))
1141           - (Pd(i)+ sum(demanStep ,V_dem_Load(i,demanStep))$(demLocation(i) eq 1)+ De_response_Inc_P(i)$(Pd_respon_location(i))+ De_response_Dec_P(i)$(Pd_respon_location(i)) - (P_S(i)-Solar_p_curtail(i) ))
1142          + V_p_over(i)
1143          - V_p_under(i)
1144              =e=
1145            V_real(i) *
1146          ( sum((j,c)$(branchstatus(i,j,c) ), V_LineIr(i,j,c))
1147            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIr(i,j,c)) )
1148          + V_imag(i) *
1149           (sum((j,c)$(branchstatus(i,j,c) ), V_LineIq(i,j,c))
1150            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIq(i,j,c)))
1151          + Gs(i) * (sqr(V_real(i)) + sqr(V_imag(i)))
1152  ;
1153  * Balance of reactive power for bus without solar
1154  c_BalanceQ_nosolar(i)$(type(i) ne 4 and (sum(solarbus,solarlocation(solarbus,i)) eq 0))..
1155          sum(gen$(atBus(gen,i) and status(gen)), V_Q(gen))
1156          - (Qd(i)+Pd_respon_q_up(i)*De_response_Inc_P(i)$(Pd_respon_location(i)) + Pd_respon_q_down(i)*De_response_Dec_P(i)$(Pd_respon_location(i))  )
1157          + V_q_over(i)
1158          - V_q_under(i)
1159              =e=
1160          - V_real(i) *
1161          ( sum((j,c)$(branchstatus(i,j,c) ), V_LineIq(i,j,c))
1162            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIq(i,j,c)))
1163          + V_imag(i) *
1164          ( sum((j,c)$(branchstatus(i,j,c) ), V_LineIr(i,j,c))
1165            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIr(i,j,c)))
1166          - (Bs(i) + V_switchedshuntB(i)$sum(bus_s$numbswitched(i, bus_s), 1)) * (sqr(V_real(i)) + sqr(V_imag(i)));
1167  ;
1168  * Balance of reactive power for bus with solar
1169  c_BalanceQ_solar(i)$(type(i) ne 4 and (sum(solarbus,solarlocation(solarbus,i)) ne 0))..
1170          sum(gen$(atBus(gen,i) and status(gen)), V_Q(gen))
1171          - ( Qd(i)+ Pd_respon_q_up(i)*De_response_Inc_P(i)$(Pd_respon_location(i)) + Pd_respon_q_down(i)*De_response_Dec_P(i)$(Pd_respon_location(i)) - Q_S(i) )
1172          + V_q_over(i)
1173          - V_q_under(i)
1174              =e=
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 22
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


1175          - V_real(i) *
1176          ( sum((j,c)$(branchstatus(i,j,c) ), V_LineIq(i,j,c))
1177            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIq(i,j,c)))
1178          + V_imag(i) *
1179          ( sum((j,c)$(branchstatus(i,j,c) ), V_LineIr(i,j,c))
1180            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIr(i,j,c)))
1181          - (Bs(i) + V_switchedshuntB(i)$sum(bus_s$numbswitched(i, bus_s), 1)) * (sqr(V_real(i)) + sqr(V_imag(i)));
1182  ;
1183   
1184  * Loss on line c connecting bus i and bus j
1185  c_Lossijc(i,j,c)$(branchstatus(i,j,c))..
1186            V_Lossijc(i,j,c) =e=
1187                 g(i,j,c)/( sqr(b(i,j,c))+ sqr(g(i,j,c)) ) * (  sqr(V_LineIr(i,j,c))+ sqr(V_LineIq(i,j,c)) )
1188  ;
1189   
1190  *Loss on lines connected with bus i
1191  c_Lossi(i)..
1192         V_Lossi(i) =e=
1193                sum((j,c)$(branchstatus(i,j,c)),V_Lossijc(i,j,c))
1194  ;
1195   
1196  * generator bus voltage set points enforced with violation variables
1197  v_generator_addup(i)$(sum(gen,status2(gen,i)) eq 1 and saturaup(i) eq 0)..
1198           sqrt(sqr(V_real(i)) + sqr(V_imag(i))) =l= voltageran_high*Vsch(i)
1199  ;
1200  v_generator_addlow(i)$(sum(gen,status2(gen,i)) eq 1 and saturalow(i) eq 0)..
1201           sqrt(sqr(V_real(i)) + sqr(V_imag(i))) =g= voltageran_low*Vsch(i)
1202  ;
1203   
1204   
1205  v_generator_addup_arti(i)$(sum(gen,status2(gen,i)) eq 1 )..
1206           sqrt(sqr(V_real(i)) + sqr(V_imag(i))) =l= voltageran_high*Vsch(i) + V_artup(i)
1207  ;
1208  v_generator_addlow_arti(i)$(sum(gen,status2(gen,i)) eq 1 )..
1209           sqrt(sqr(V_real(i)) + sqr(V_imag(i))) =g= voltageran_low*Vsch(i) - V_artlow(i)
1210  ;
1211   
1212  v_generator_hardupl(i)..
1213           sqrt(sqr(V_real(i)) + sqr(V_imag(i))) =l= 1.15
1214  ;
1215   
1216  v_generator_harddownl(i)..
1217           sqrt(sqr(V_real(i)) + sqr(V_imag(i))) =g= 0.88
1218  ;
1219   
1220  * enforces generator participation factor in adjustment from schedule
1221  p_generator_add(gen)$(status(gen) eq 1 and abs(gen_participation_factor(gen)))..
1222           V_P(gen) =e= PgSch(gen) + gen_participation_factor(gen) * V_P_system_deviation
1223  ;
1224   
1225  p_generator_addup(gen)$(status(gen) eq 1 and gentype(gen) eq 1)..
1226           V_P(gen) =l= 1.001*PgSch(gen)
1227  ;
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 23
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


1228  p_generator_addlow(gen)$(status(gen) eq 1 and gentype(gen) eq 1 and PgSch(gen) > 0 )..
1229           V_P(gen) =g= 0.999*PgSch(gen)
1230   
1231  ;
1232  *solar bus active power constraints uppr bound
1233  ;
1234  * WARNING TODO JH this equation has an error
1235  * causes infeasibility
1236  * e.g. 0 =g= 1e-6
1237  *
1238  * fixed it
1239  * Xinda can you check that this is correct?
1240  * am I understanding the data and model correctly?
1241  *solar bus  power constraints lower bound
1242  ;
1243   
1244   
1245  * Objective functions and pwl costs are listed in a separate file
1246  *$batinclude "%filepath%objective_voltage_stability_addterm.gms" obj demandbids
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 24
Cost objective calculations for OPF models
C o m p i l a t i o n


1248  *this file is modified by Xinda Ke from Wisconsin university IV_acopf.gms
1249  *updated by Xinda ke in 7/26/2016
1250   
      * Set costmodel variable
      costmodel(gen)= 2;
       
      *-- Convexity Check
      * Not part of system of equations
      * LP/QCP/NLP can't handle nonconvex piecewise linear cost functions
      set thisgen(gen);
       
      parameters cur_slope, next_slope;
      loop(gen$(status(gen) and (costmodel(gen) eq 1) and (numcostpts(gen) > 2)),
          next_slope = (costpts_y(gen,'2') - costpts_y(gen,'1'))
                       / (costpts_x(gen,'2') - costpts_x(gen,'1'));
          loop(costptset$(ord(costptset) < numcostpts(gen) - 1),
              cur_slope = next_slope;
              if((ord(costptset) < numcostpts(gen) - 2) and (costpts_x(gen,costptset+2) eq costpts_x(gen,costptset+1)),
                  abort "Zero-length piecewise segment detected";
              );
              next_slope = (costpts_y(gen,costptset+2) - costpts_y(gen,costptset+1))
                           / (costpts_x(gen,costptset+2) - costpts_x(gen,costptset+1))
       
              if(cur_slope - next_slope > 1e-8,
                  thisgen(gen1)=no; thisgen(gen)=yes;
                  display thisgen;
                  abort "Nonconvex piecewise linear costs not supported";
              );
          );
      );
1280   
1281  *===== SECTION: EQUATIONS PART 2
1282  * Defining piecewise linear generator cost curves
1283  * P is in per-unit, costpts_x is in MW, and costpts_y is in $/hr
1284   
1285   
1287   
1288   
1289   
1290   
1291  c_obj..
1292      V_objcost =e=
1293             V_shuntSwitchingTotalPenalty  +
1294  5000000*sum(gen, V_P(gen)-Pg(gen))
1295  *penalty for contro_solar_pout
1296           -sum(i,sum(demanStep ,demSlope(i,demanStep)*V_dem_Load(i,demanStep))  )
1297           + sum(i,sqr(P_S(i))*dis_gen_par1(i)+P_S(i)*dis_gen_par2(i)+dis_gen_par3(i))
1298           + solar_curtail_penalty * sum(i,Solar_p_curtail(i))
1299  *         + demand_response_increase_penalty * sum(i,De_response_Inc_P(i))
1300  *         - demand_response_decrease_penalty * sum(i,De_response_Dec_P(i))
1301  *the demand response q is comment out because it change with respose to p
1302  *+5*sum(i,De_response_Inc_Q(i))-5*sum(i,De_response_Dec_Q(i))
1303  *the term of line losses. tobe checked, tobe verified
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 25
Cost objective calculations for OPF models
C o m p i l a t i o n


1304  *         + sum(i,V_Lossi(i))
1305  *         + V_previous_solution_penalty
1306  *the penalty for power balancing relaxation
1307  *         + %balance_constr_penalty% * (
1308  *               sum(i,V_p_over(i))
1309  *             + sum(i,V_p_under(i))
1310  *             + sum(i,V_q_over(i))
1311  *             + sum(i,V_q_under(i)))
1312  ;
1313   
1314  c_objtest..
1315      V_objcosttest =e=
1316             V_shuntSwitchingTotalPenalty +
1317   5000000*sum(gen, V_P(gen)-Pg(gen))
1318           -sum(i,sum(demanStep ,demSlope(i,demanStep)*V_dem_Load(i,demanStep)) )
1319           + sum(i,sqr(P_S(i))*dis_gen_par1(i)+P_S(i)*dis_gen_par2(i)+dis_gen_par3(i))
1320  *penalty for contro_solar_pout
1321           + solar_curtail_penalty * sum(i,Solar_p_curtail(i))
1322  *         + demand_response_increase_penalty * sum(i,De_response_Inc_P(i))
1323  *         - demand_response_decrease_penalty * sum(i,De_response_Dec_P(i))
1324  *the demand response q is comment out because it change with respose to p
1325  *+5*sum(i,De_response_Inc_Q(i))-5*sum(i,De_response_Dec_Q(i))
1326  *the term of line losses. tobe checked, tobe verified
1327  *         + sum(i,V_Lossi(i))
1328  * artificial variables is included in objective function with high penalty cost
1329  *         + generator_voltage_deviation_penalty
1330  *             * sum(bus$(sum(gen,status2(gen,bus)) eq 1),  V_artup(bus))
1331  *         + generator_voltage_deviation_penalty
1332  *             * sum(bus$(sum(gen,status2(gen,bus)) eq 1),  V_artlow(bus))
1333  *         + V_previous_solution_penalty
1334  *the penalty for power balancing relaxation
1335  *         + %balance_constr_penalty% * (
1336  *               sum(i,V_p_over(i))
1337  *             + sum(i,V_p_under(i))
1338  *             + sum(i,V_q_over(i))
1339  *             + sum(i,V_q_under(i)))
1340  ;
1341   
1342  c_gen_q_arctan_v(gen)$status(gen)..
1343      v_q(gen) =e=
1344      qmin(gen) +
1345      (qmax(gen) - qmin(gen))
1346      * (0.5 -
1347         (1 / pi) *
1348         arctan(
1349             sum(bus$atbus(gen,bus),
1350                 sqrt(sqr(v_real(bus)) + sqr(v_imag(bus))) - vsch(bus)) /
1351             pv_pq_smoothing_param));
1352  *display Pmax, Pmin, V_P.l;
1353  *===== SECTION: MODEL DEFINITION
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/mod_definition.gms
1355   
1356  model base_model /
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 26
Cost objective calculations for OPF models
C o m p i l a t i o n


1358  **    c_I_limit
1359  **    c_V_limit_lo
1360  **    c_V_limit_up
1361      c_LineIrij
1362      c_LineIrji
1363      c_LineIqij
1364      c_LineIqji
1365      c_BalanceP_nosolar
1366      c_BalanceP_solar
1367      c_BalanceQ_nosolar
1368      c_BalanceQ_solar
1369      c_Lossijc
1370      c_Lossi
1371      v_generator_hardupl
1372      v_generator_harddownl
1373      p_generator_add
1374      c_BalanceP_control_solar
1375      c_switchedshuntB_def
1376      c_shuntSwitchingDef1
1377      c_shuntSwitchingDef2
1378      c_totalShuntSwitchingDef
1379      c_shuntSwitchingPenaltyDef1
1380      c_shuntSwitchingPenaltyDef2
1381      c_shuntTotalSwitchingPenalty
1382      c_shuntSwitchingTotalPenaltyDef
1383      c_previous_solution_penalty_def
1384      /;
1385  model feas /
1386      base_model
1387      v_generator_addup
1388      v_generator_addlow
1389      /;
1390  model test /
1391      base_model
1392      v_generator_addup_arti
1393      v_generator_addlow_arti
1394      /;
1395  model acopf /
1396      feas
1397      c_obj
1398      /;
1399  model acopf_check /
1400      test
1401      c_objtest
1402      /;
1403  model acopf_arctan /
1404      base_model
1405      c_gen_q_arctan_v
1406      c_obj /;
1407  display Pmax, Pmin, Pd, Va, Vm, Qg, Gs, b, bc;
1408  *===== SECTION: VARIABLE BOUNDS
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/var_bounds.gms
1410   
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 27
Cost objective calculations for OPF models
C o m p i l a t i o n


1411  * shunt switching
1412  V_shunt.lo(bus,bus_s)$numBswitched(bus,bus_s) = 0;
1413  V_shunt.up(bus,bus_s)$numBswitched(bus,bus_s) = numBswitched(bus,bus_s);
1415  V_shunt.fx(bus,bus_s)$numBswitched(bus,bus_s) = numShuntStepsOn_init(bus,bus_s);
1417   
1418   
1419  * Generator active power generation limits
1420  V_P.lo(gen)$(status(gen) and abs(gen_participation_factor(gen))) = Pg(gen);
1421  V_P.up(gen)$(status(gen) and abs(gen_participation_factor(gen))) = Pmax(gen);
1422  V_P.fx(gen)$(status(gen) and not abs(gen_participation_factor(gen))) = PgSch(gen);
1423  V_P.fx(gen)$(not status(gen)) = 0;
1424   
1425  *display V_P.lo, Pg;
1427  Solar_p_curtail.fx(bus)=0;
1428  contro_solar_location(bus) = 0;
1430   
1431   
1432   
1433  V_dem_Load.up(bus, demanStep)$(demLocation(bus) eq 1 and ord(demanStep) > 1)=  demLoad(bus, demanStep)-demLoad(bus, demanStep-1);
1434  V_dem_Load.fx(bus,'1')=0;
1435  Q_s.lo('13')=-300;
1436  Q_s.lo('57')=-300;
1437  Q_s.up('13')=300;
1438  Q_s.up('57')=300;
1439   
1440   
1441  P_S.lo('13')=0.03/baseMVA;
1442  P_S.lo('57')=0.02/baseMVA;
1443  P_S.up('13')=0.3/baseMVA;
1444  P_S.up('57')=0.25/baseMVA;
1445   
1446  Q_s.lo('7')=-300;
1447  Q_s.lo('18')=-300;
1448  Q_s.lo('56')=-300;
1449  Q_s.up('7')=300;
1450  Q_s.up('18')=300;
1451  Q_s.up('56')=300;
1452   
1453  P_S.lo('7')=0.05/baseMVA;
1454  P_S.lo('18')=0.02/baseMVA;
1455  P_S.lo('56')=0.04/baseMVA;
1456  P_S.up('7')=0.5/baseMVA;
1457  P_S.up('18')=0.1/baseMVA;
1458  P_S.up('56')=0.2/baseMVA;
1459   
1460  De_response_Inc_P.up(bus)$(Pd_respon_location(bus))=Pd_respon_p_up(bus);
1461  De_response_Inc_P.lo(bus)$(Pd_respon_location(bus))=0;
1462  De_response_Inc_P.fx(bus)$(not Pd_respon_location(bus))=0;
1463   
1464  De_response_Dec_P.lo(bus)$(Pd_respon_location(bus))=Pd_respon_p_down(bus);
1465  De_response_Dec_P.up(bus)$(Pd_respon_location(bus))=0;
1466  De_response_Dec_P.fx(bus)$(not Pd_respon_location(bus))=0;
1467   
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 28
Cost objective calculations for OPF models
C o m p i l a t i o n


1468   
1469   
1470  * disable demand response
1472   
1473  * Generator reactive power generation limits
1474  * Does not impose Qmax, Qmin limits when the D-curve contraint is applied
1475  *$ifthen %qlim% == 0
1476  V_Q.lo(gen)$status(gen) = Qmin(gen);
1477  V_Q.up(gen)$status(gen) = Qmax(gen);
1478  *$endif
1479  V_Q.fx(gen)$(not status(gen)) = 0;
1480  *display V_Q.l, V_Q.up, V_Q.lo;
1481  * Bus voltage magnitude limits
1482  * Note these bounds are numerically helpful
1483  * even if they are not necessary for the correctness
1484  * of the formulation
1485  V_real.lo(bus) = -MaxVm(bus); V_real.up(bus) = MaxVm(bus);
1486  V_imag.lo(bus) = -MaxVm(bus); V_imag.up(bus) = MaxVm(bus);
1487  V_imag.fx(bus)$(type(bus) eq 3) = 0;
1488   
1489  * disable solar q
1491   
1492   
1493  * soft power balance constraints
1494  balance_real_bound=0.01;
1495  balance_react_bound=0.01;
1497  V_p_over.fx(i) = 0;
1498  V_p_under.fx(i) = 0;
1499  V_q_over.fx(i) = 0;
1500  V_q_under.fx(i) = 0;
1502   
1503  *===== SECTION: VARIABLE START VALUES
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/start_point.gms
1505   
1506  * Set initial conditions
BATINCLUDE /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/ic_iv/preset.gms
      sets values for some variables that might not otherwise be set
1511   
1512  V_P.l(gen) = 0;
1513  V_Q.l(gen) = 0;
1514  V_LineIr.l(i,j,c) = 0;
1515  V_LineIq.l(i,j,c) = 0;
1516  V_P_system_deviation.l = 0;
1517  V_switchedshuntB.l(i)$sum(bus_s$numBswitched(i,bus_s), 1) = 0;
1518  V_shunt.l(bus,bus_s)$numBswitched(bus,bus_s) = 0;
1519  *P_S.l(i)$(isSolar(i) and contro_solar_location(i) ne 1) = solar_r(i);
1520  *P_S.l(i)$(isSolar(i) and contro_solar_location(i) eq 1) = contro_solar_pout(i);
1521  Q_S.l(i)$isSolar(i) = 0;
1522  solar_p_curtail.l(bus)$contro_solar_location(bus) = 0;
1523  de_response_dec_p.l(bus)$pd_respon_location(bus) = 0;
1524  de_response_inc_p.l(bus)$pd_respon_location(bus) = 0;
1525   
BATINCLUDE /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/ic_iv/given.gms
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 29
Cost objective calculations for OPF models
C o m p i l a t i o n


      Use given initial conditions for Polar ACOPF.
1530   
1532   
1533  V_P.l(gen) = Pg(gen)$status(gen);
1534  V_Q.l(gen) = Qg(gen)$status(gen);
1535  V_real.l(bus) = Vm(bus)*cos(Va(bus));
1536  V_imag.l(bus) = Vm(bus)*sin(Va(bus));
1537  V_switchedshuntB.l(i)$sum(bus_s$numBswitched(i,bus_s), 1) = switchedshuntB_init(i);
1538  V_shunt.l(bus,bus_s)$numBswitched(bus,bus_s)
1539    = switchedshuntB_init(bus) * numBswitched(bus,bus_s)
1540    / sum(bus_s_1, numBswitched(bus,bus_s_1) * Bswitched(bus,bus_s_1));
1541   
1542  *Parameter Bs_solved(bus);
1543  *Bs_solved(bus) = businfo(bus,'switchedBsSolved','%timeperiod%')/baseMVA;
1544  *loop((bus,bus_s)$((not sameas(bus_s,'given') and (Bswitched(bus,bus_s) ne 0)) and (abs(Bs_solved(bus)) > 1e-6)),
1545  *    V_shunt.l(bus,bus_s) = min(Bs_solved(bus)/Bswitched(bus,bus_s), V_shunt.up(bus,bus_s));
1546  *    Bs_solved(bus) = Bs_solved(bus) - V_shunt.l(bus,bus_s)*Bswitched(bus,bus_s);
1547  *);
1548   
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/ic_iv/calc_derived_vars.gms
      independent variables V_real and V_imag are set prior to this code
      other independent variables are set here
      then dependent variables are computed here - including objective
      finally we could check constraint violations - e.g. balance constraints
1556   
1557  *--------------------
1558  * derived variables -
1559  *--------------------
1560   
1561           V_LineIr.l(i,j,c)$(branchstatus(i,j,c)) =
1562              1/sqr(ratio(i,j,c))
1563                  * (g(i,j,c)*V_real.l(i) - (b(i,j,c) + bc(i,j,c)/2)*V_imag.l(i))
1564              - 1/ratio(i,j,c)
1565                  * (  (g(i,j,c)*V_real.l(j) - b(i,j,c)*V_imag.l(j))*cos(angle(i,j,c))
1566                     - (g(i,j,c)*V_imag.l(j) + b(i,j,c)*V_real.l(j))*sin(angle(i,j,c)));
1567   
1568           V_LineIr.l(j,i,c)$(branchstatus(i,j,c)) =
1569              (g(i,j,c)*V_real.l(j) - (b(i,j,c) + bc(i,j,c)/2)*V_imag.l(j))
1570              - 1/ratio(i,j,c)
1571                  * (  (g(i,j,c)*V_real.l(i) - b(i,j,c)*V_imag.l(i))*cos(-angle(i,j,c))
1572                     - (g(i,j,c)*V_imag.l(i) + b(i,j,c)*V_real.l(i))*sin(-angle(i,j,c)));
1573   
1574           V_LineIq.l(i,j,c)$(branchstatus(i,j,c)) =
1575              1/sqr(ratio(i,j,c))
1576                  * (g(i,j,c)*V_imag.l(i) + (b(i,j,c) + bc(i,j,c)/2)*V_real.l(i))
1577              - 1/ratio(i,j,c)
1578                  * (  (g(i,j,c)*V_imag.l(j) + b(i,j,c)*V_real.l(j))*cos(angle(i,j,c))
1579                     + (g(i,j,c)*V_real.l(j) - b(i,j,c)*V_imag.l(j))*sin(angle(i,j,c)));
1580   
1581           V_LineIq.l(j,i,c)$(branchstatus(i,j,c)) =
1582              (g(i,j,c)*V_imag.l(j) + (b(i,j,c) + bc(i,j,c)/2)*V_real.l(j))
1583              - 1/ratio(i,j,c)
1584                  * (  (g(i,j,c)*V_imag.l(i) + b(i,j,c)*V_real.l(i))*cos(-angle(i,j,c))
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 30
Cost objective calculations for OPF models
C o m p i l a t i o n


1585                     + (g(i,j,c)*V_real.l(i) - b(i,j,c)*V_imag.l(i))*sin(-angle(i,j,c)));
1586   
1587      V_devi.l(i)$(sum(gen,status2(gen,i)) eq 1 ) =
1588      abs(sqrt(sqr(V_real.l(i)) + sqr(V_imag.l(i))) - Vsch(i));
1589   
1590      V_artup.l(i)$(sum(gen,status2(gen,i)) eq 1 ) =
1591      max(0,
1592      sqrt(sqr(V_real.l(i)) + sqr(V_imag.l(i))) - voltageran_high*Vsch(i));
1593   
1594      V_artlow.l(i)$(sum(gen,status2(gen,i)) eq 1 ) =
1595      max(0,
1596      voltageran_low*Vsch(i) - sqrt(sqr(V_real.l(i)) + sqr(V_imag.l(i))));
1597   
1598      V_Lossijc.l(i,j,c)$(branchstatus(i,j,c)) =
1599      g(i,j,c) / (sqr(b(i,j,c)) + sqr(g(i,j,c))) *
1600      (sqr(V_LineIr.l(i,j,c)) + sqr(V_LineIq.l(i,j,c)));
1601   
1602      V_Lossi.l(i) =
1603      sum((j,c)$(branchstatus(i,j,c)),V_Lossijc.l(i,j,c));
1604   
1605      V_load_bus_volt_pen_dev.l(i)$bus_penalize_volt_mag_target(i) =
1606      max(
1607        sqrt(sqr(V_real.l(i)) + sqr(V_imag.l(i)))
1608      - load_bus_voltage_goal
1609      - load_bus_volt_dead_band,
1610        load_bus_voltage_goal
1611      - sqrt(sqr(V_real.l(i)) + sqr(V_imag.l(i)))
1612      - load_bus_volt_dead_band);
1613   
1614      V_load_bus_volt_pen.l =
1615      max(0,
1616      sum(i$bus_penalize_volt_mag_target(i),
1617            load_bus_volt_pen_coeff_1 * V_load_bus_volt_pen_dev.l(i)
1618          + load_bus_volt_pen_coeff_2 * sqr(V_load_bus_volt_pen_dev.l(i))));
1619   
1620      V_shuntSwitching.l(i,bus_s)$numBswitched(i,bus_s) =
1621      abs(V_shunt.l(i,bus_s) - numShuntStepsOn_init(i,bus_s));
1622   
1623      V_shuntSwitchingPenalty.l(i,bus_s)$numBswitched(i,bus_s) =
1624      max(0,
1625      shuntSwitchingPenalty1 * V_shuntSwitching.l(i,bus_s),
1626      shuntSwitchingPenalty2 * (V_shuntSwitching.l(i,bus_s) - shuntSwitchingTolerance));
1627   
1628      V_totalShuntSwitching.l =
1629      max(0,
1630      sum((i,bus_s)$numBswitched(i,bus_s),V_shuntSwitching.l(i,bus_s)));
1631   
1632      V_shuntTotalSwitchingPenalty.l =
1633      max(0,
1634      shuntSwitchingBudgetPenalty * (V_totalShuntSwitching.l - shuntSwitchingBudget));
1635   
1636      V_shuntSwitchingTotalPenalty.l =
1637      max(0,
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 31
Cost objective calculations for OPF models
C o m p i l a t i o n


1638      V_shuntTotalSwitchingPenalty.l +
1639      sum((i,bus_s)$numBswitched(i,bus_s),V_shuntSwitchingPenalty.l(i,bus_s)));
1640   
1641      V_previous_solution_penalty.l = 0;
1642   
1643      V_objcost.l =
1644             V_shuntSwitchingTotalPenalty.l
1645           + V_load_bus_volt_pen.l
1646           + solar_curtail_penalty * sum(i,Solar_p_curtail.l(i))
1647           + demand_response_increase_penalty * sum(i,De_response_Inc_P.l(i))
1648           - demand_response_decrease_penalty * sum(i,De_response_Dec_P.l(i))
1649           + sum(i,V_Lossi.l(i))
1650           + V_previous_solution_penalty.l;
1651   
1652      V_objcosttest.l =
1653             V_objcost.l
1654           + generator_voltage_deviation_penalty
1655               * sum(bus$(sum(gen,status2(gen,bus)) eq 1),  V_artup.l(bus))
1656           + generator_voltage_deviation_penalty
1657               * sum(bus$(sum(gen,status2(gen,bus)) eq 1),  V_artlow.l(bus));
1658   
1660   
1661  * set prior values of distance-penalized variables
1662  * to their current levels.
1663  V_P_prior(gen) = V_P.l(gen);
1664  V_Q_prior(gen) = V_Q.l(gen);
1665  P_S_prior(i) = P_S.l(i);
1666  Q_S_prior(i) = Q_S.l(i);
1667  V_real_prior(i) = V_real.l(i);
1668  V_imag_prior(i) = V_imag.l(i);
1669  Solar_p_curtail_prior(i) = Solar_p_curtail.l(i);
1670  De_response_Inc_P_prior(i) = De_response_Inc_P.l(i);
1671  De_response_Dec_P_prior(i) = De_response_Dec_P.l(i);
1672   
1673  display V_real.l, V_imag.l, Vm;
1674   
1675   
1676  *===== SECTION: COMPUTE START METRICS
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/compute_start_metrics.gms
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 32
compute_start_metrics
C o m p i l a t i o n


      evaluate individual componenets of feasibility and optimality for the start point
1682   
1683  * set these from variable levels
1684      V_P_start(gen) = V_P.l(gen);
1685      V_Q_start(gen) = V_Q.l(gen);
1686      P_S_start(i) = P_S.l(i);
1687      Q_S_start(i) = Q_S.l(i);
1688      V_real_start(i) = V_real.l(i);
1689      V_imag_start(i) = V_imag.l(i);
1690      Solar_p_curtail_start(i) = solar_p_curtail.l(i);
1691      De_response_Dec_P_start(i) = de_response_dec_p.l(i);
1692      De_response_Inc_P_start(i) = de_response_inc_p.l(i);
1693      V_switchedshuntB_start(i)$sum(bus_s$numBswitched(i,bus_s), 1) = V_switchedshuntB.l(i);
1694      V_shunt_start(bus,bus_s) = v_shunt.l(bus,bus_s);
1695      V_P_system_deviation_start = v_p_system_deviation.l;
1696      V_LineIr_start(i,j,c)$(branchstatus(i,j,c)) = V_LineIr.l(i,j,c);
1697      V_LineIr_start(j,i,c)$(branchstatus(i,j,c)) = V_LineIr.l(j,i,c);
1698      V_LineIq_start(i,j,c)$(branchstatus(i,j,c)) = V_LineIq.l(i,j,c);
1699      V_LineIq_start(j,i,c)$(branchstatus(i,j,c)) = V_LineIq.l(j,i,c);
1700   
1701  * compute losses
1702      V_Lossijc_start(i,j,c)$(branchstatus(i,j,c)) =
1703                 g(i,j,c)/( sqr(b(i,j,c))+ sqr(g(i,j,c)) ) * (  sqr(V_LineIr_start(i,j,c))+ sqr(V_LineIq_start(i,j,c)) );
1704      V_Lossi_start(i) = sum((j,c)$(branchstatus(i,j,c)),V_Lossijc_start(i,j,c));
1705   
1706  * compute penalties and objectives
1707      V_load_bus_volt_pen_dev_start(i)$bus_penalize_volt_mag_target(i) = abs(
1708            sqrt(sqr(V_real_start(i)) + sqr(V_imag_start(i)))
1709          - volt_mag_target(i)
1710          - load_bus_volt_dead_band);
1711      V_load_bus_volt_pen_start =
1712          sum(i$bus_penalize_volt_mag_target(i),
1713                load_bus_volt_pen_coeff_1 * V_load_bus_volt_pen_dev_start(i)
1714              + load_bus_volt_pen_coeff_2 * sqr(V_load_bus_volt_pen_dev_start(i)));
1715      V_shuntSwitching_start(i,bus_s)$numBswitched(i,bus_s) =
1716          abs(V_shunt_start(i,bus_s) - numShuntStepsOn_init(i,bus_s));
1717      V_totalShuntSwitching_start =
1718          sum((i,bus_s)$numBswitched(i,bus_s),V_shuntSwitching_start(i,bus_s));
1719      V_shuntSwitchingPenalty_start(i,bus_s)$numBswitched(i,bus_s) = max(0,
1720          shuntSwitchingPenalty1 * V_shuntSwitching_start(i,bus_s),
1721          shuntSwitchingPenalty2 * (V_shuntSwitching_start(i,bus_s) - shuntSwitchingTolerance));
1722      V_shuntTotalSwitchingPenalty_start =
1723          shuntSwitchingBudgetPenalty * max(0, V_totalShuntSwitching_start - shuntSwitchingBudget);
1724      V_shuntSwitchingTotalPenalty_start =
1725            V_shuntTotalSwitchingPenalty_start
1726          + sum((i,bus_s)$numBswitched(i,bus_s),V_shuntSwitchingPenalty_start(i,bus_s));
1727      V_previous_solution_penalty_start =
1728        previous_solution_penalty_2 * (
1729            sum(gen, sqr(V_P_prior(gen) - V_P_start(gen)))
1730          + sum(gen, sqr(V_Q_prior(gen) - V_Q_start(gen)))
1731          + sum(i, sqr(P_S_prior(i) - P_S_start(i)))
1732          + sum(i, sqr(Q_S_prior(i) - Q_S_start(i)))
1733          + sum(i, sqr(V_real_prior(i) - V_real_start(i)))
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 33
compute_start_metrics
C o m p i l a t i o n


1734          + sum(i, sqr(V_imag_prior(i) - V_imag_start(i)))
1735          + sum(i, sqr(Solar_p_curtail_prior(i) - Solar_p_curtail_start(i)))
1736          + sum(i, sqr(De_response_Inc_P_prior(i) - De_response_Inc_P_start(i)))
1737          + sum(i, sqr(De_response_Dec_P_prior(i) - De_response_Dec_P_start(i))));
1738      V_objcost_start =
1739             V_shuntSwitchingTotalPenalty_start
1740           + V_load_bus_volt_pen_start
1741           + solar_curtail_penalty * sum(i,Solar_p_curtail_start(i))
1742           + demand_response_increase_penalty * sum(i,De_response_Inc_P_start(i))
1743           - demand_response_decrease_penalty * sum(i,De_response_Dec_P_start(i))
1744           + sum(i,V_Lossi_start(i))
1745           + V_previous_solution_penalty_start;
1746   
1747  * compute variable bound violations
1748      gen_p_lo_viol_start(gen)$status(gen) =
1749          max(0, pmin(gen) - v_p_start(gen));
1750      gen_p_up_viol_start(gen)$status(gen) =
1751          max(0, v_p_start(gen) - pmax(gen));
1752      gen_q_lo_viol_start(gen)$status(gen) =
1753          max(0, qmin(gen) - v_q_start(gen));
1754      gen_q_up_viol_start(gen)$status(gen) =
1755          max(0, v_q_start(gen) - qmax(gen));
1756      De_response_Inc_P_up_viol_start(bus)$(Pd_respon_location(bus)) =
1757          max(0, de_response_inc_p_start(bus) - Pd_respon_p_up(bus));
1758      De_response_dec_P_lo_viol_start(bus)$(Pd_respon_location(bus)) =
1759          max(0, Pd_respon_p_down(bus) - de_response_dec_p_start(bus));
1760      v_shunt_up_viol_start(bus,bus_s)$numbswitched(bus,bus_s) =
1761          max(0, v_shunt_start(bus,bus_s) - numbswitched(bus,bus_s));
1762   
1763  * compute constraint violations
1764      balance_p_viol_start(i)$(type(i) ne 4) =
1765            sum(gen$(atBus(gen,i) and status(gen)), V_P_start(gen))
1766          - Pd(i)
1767          - De_response_Inc_P_start(i)$Pd_respon_location(i)
1768          - De_response_Dec_P_start(i)$Pd_respon_location(i)
1769          + P_S_start(i)$sum(solarbus,solarlocation(solarbus,i))
1770          - Solar_p_curtail_start(i)$contro_solar_location(i)
1771          - V_real_start(i) *
1772            (  sum((j,c)$(branchstatus(i,j,c)), V_LineIr_start(i,j,c))
1773             + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIr_start(i,j,c)) )
1774          - V_imag_start(i) *
1775            (  sum((j,c)$(branchstatus(i,j,c) ), V_LineIq_start(i,j,c))
1776             + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIq_start(i,j,c)))
1777          - Gs(i) * (sqr(V_real_start(i)) + sqr(V_imag_start(i)));
1778      balance_q_viol_start(i)$(type(i) ne 4) =
1779            sum(gen$(atBus(gen,i) and status(gen)), V_Q_start(gen))
1780          - Qd(i)
1781          - Pd_respon_q_up(i)*De_response_Inc_P_start(i)$Pd_respon_location(i)
1782          - Pd_respon_q_down(i)*De_response_Dec_P_start(i)$Pd_respon_location(i)
1783          + Q_S_start(i)$sum(solarbus,solarlocation(solarbus,i))
1784          + V_real_start(i) *
1785            (  sum((j,c)$(branchstatus(i,j,c) ), V_LineIq_start(i,j,c))
1786             + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIq_start(i,j,c)))
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 34
compute_start_metrics
C o m p i l a t i o n


1787          - V_imag_start(i) *
1788            (  sum((j,c)$(branchstatus(i,j,c) ), V_LineIr_start(i,j,c))
1789             + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIr_start(i,j,c)))
1790          + (Bs(i) + V_switchedShuntB_start(i)$sum(bus_s$numBswitched(i,bus_s), 1)) * (sqr(V_real_start(i)) + sqr(V_imag_start(i)));
1791      p_generator_add_viol_start(gen)$(status(gen) eq 1) =
1792            V_P_start(gen)
1793          - PgSch(gen)
1794          - gen_participation_factor(gen) * V_P_system_deviation_start;
1795      c_I_limit_viol_start(i,j,c)$(branchstatus(i,j,c) or branchstatus(j,i,c)) =
1796  *        max(0,  sqrt(sqr(V_LineIr_start(i,j,c)) + sqr(V_LineIq_start(i,j,c)))
1797  *              - currentrate(i,j,c));
1798  0;
1799  * NOTE: currentrate apparently is not defined and we are not enforcing this constraint
1800      c_V_limit_lo_viol_start(i) =
1801          max(0, minVm(i) - sqrt(sqr(V_real_start(i)) + sqr(V_imag_start(i))));
1802      c_V_limit_up_viol_start(i) =
1803          max(0, sqrt(sqr(V_real_start(i)) + sqr(V_imag_start(i))) - maxVm(i));
1804      v_generator_hardupl_viol_start(i) =
1805          max(0, sqrt(sqr(V_real_start(i)) + sqr(V_imag_start(i))) - 1.15);
1806      v_generator_harddownl_viol_start(i) =
1807          max(0, 0.88 - sqrt(sqr(V_real_start(i)) + sqr(V_imag_start(i))));
1808      v_under_q_up_slack_viol_start(gen)$status(gen) =
1809          sum(i$atbus(gen,i),
1810              min(max(0, vsch(i) - sqrt(sqr(v_real_start(i)) + sqr(v_imag_start(i)))),
1811                  max(0, qmax(gen) - v_q_start(gen))));
1812      v_over_q_lo_slack_viol_start(gen)$status(gen) =
1813          sum(i$atbus(gen,i),
1814              min(max(0, sqrt(sqr(v_real_start(i)) + sqr(v_imag_start(i))) - vsch(i)),
1815                  max(0, v_q_start(gen) - qmin(gen))));
1816   
1817  * compute summaries
1818      p_load_start = sum(i, pd(i));
1819      p_gen_start = sum(gen$status(gen), V_P_start(gen));
1820      p_shunt_start = sum(i, Gs(i) * (sqr(V_real_start(i)) + sqr(V_imag_start(i))));
1821      p_solar_start
1822        = sum(i$sum(solarbus,solarlocation(solarbus,i)), P_S_start(i))
1823        - sum(i$contro_solar_location(i), Solar_p_curtail_start(i));
1824      p_dr_start
1825        = sum(i$Pd_respon_location(i), De_response_Inc_P_start(i))
1826        + sum(i$Pd_respon_location(i), De_response_Dec_P_start(i));
1827      p_imbalance_start
1828        = p_gen_start
1829        - p_load_start
1830        - p_shunt_start
1831        + p_solar_start
1832        - p_dr_start;
1833      sum_loss_start = sum(i,v_lossi_start(i));
1834  *    v_load_bus_volt_pen_start
1835  *    v_totalshuntswitching_start
1836  *    v_shuntswitchingtotalpenalty_start
1837  *    v_previous_solution_penalty_start
1838  *    v_objcost_start
1839      max_gen_p_lo_viol_start = smax(gen$status(gen), gen_p_lo_viol_start(gen));
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 35
compute_start_metrics
C o m p i l a t i o n


1840      max_gen_p_up_viol_start = smax(gen$status(gen), gen_p_up_viol_start(gen));
1841      max_gen_q_lo_viol_start = smax(gen$status(gen), gen_q_lo_viol_start(gen));
1842      max_gen_q_up_viol_start = smax(gen$status(gen), gen_q_up_viol_start(gen));
1843      max_De_response_Inc_P_up_viol_start = smax(bus$Pd_respon_location(bus), de_response_inc_p_up_viol_start(bus));
1844      max_De_response_dec_P_lo_viol_start = smax(bus$Pd_respon_location(bus), de_response_dec_p_lo_viol_start(bus));
1845      max_v_shunt_up_viol_start = smax((bus,bus_s)$numbswitched(bus,bus_s), v_shunt_up_viol_start(bus,bus_s));
1846      max_balance_p_viol_start = smax(i$(type(i) ne 4), abs(balance_p_viol_start(i)));
1847      max_balance_q_viol_start = smax(i$(type(i) ne 4), abs(balance_q_viol_start(i)));
1848      max_p_generator_add_viol_start = smax(gen$(status(gen) eq 1), abs(p_generator_add_viol_start(gen)));
1849      max_c_I_limit_viol_start = smax((i,j,c)$(branchstatus(i,j,c) or branchstatus(j,i,c)), c_i_limit_viol_start(i,j,c));
1850      max_c_V_limit_lo_viol_start = smax(i, c_v_limit_lo_viol_start(i));
1851      max_c_V_limit_up_viol_start = smax(i, c_v_limit_up_viol_start(i));
1852      max_v_generator_hardupl_viol_start = smax(i, v_generator_hardupl_viol_start(i));
1853      max_v_generator_harddownl_viol_start = smax(i, v_generator_harddownl_viol_start(i));
1854      max_v_under_q_up_slack_viol_start = smax(gen$status(gen), v_under_q_up_slack_viol_start(gen));
1855      max_v_over_q_lo_slack_viol_start = smax(gen$status(gen), v_over_q_lo_slack_viol_start(gen));
1856   
1857  *===== SECTION: DISPLAY START METRICS
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/display_start.gms
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 36
display_start
C o m p i l a t i o n


      Display variable values, constraint violations, bound violations, penalties, objectives, and summaries at the start point
1863   
1864  display
1865      "display start"
1866  * data
1867      Pd
1868      Qd
1869  * control variables
1870      V_P_start
1871      V_Q_start
1872      P_S_start
1873      Q_S_start
1874      V_real_start
1875      V_imag_start
1876      Solar_p_curtail_start
1877      De_response_Dec_P_start
1878      De_response_Inc_P_start
1879      V_switchedshuntB_start
1880      V_shunt_start
1881      V_P_system_deviation_start
1882  * current
1883      V_LineIr_start
1884      V_LineIq_start
1885  * losses
1886      V_Lossijc_start
1887      V_Lossi_start
1888  * penalties and objectives
1889      V_load_bus_volt_pen_dev_start
1890      V_load_bus_volt_pen_start
1891      V_shuntSwitching_start
1892      V_totalShuntSwitching_start
1893      V_shuntSwitchingPenalty_start
1894      V_shuntTotalSwitchingPenalty_start
1895      V_shuntSwitchingTotalPenalty_start
1896      V_previous_solution_penalty_start
1897      V_objcost_start
1898  * variable bound violations
1899      gen_p_lo_viol_start
1900      gen_p_up_viol_start
1901      gen_q_lo_viol_start
1902      gen_q_up_viol_start
1903      De_response_Inc_P_up_viol_start
1904      De_response_dec_P_lo_viol_start
1905      v_shunt_up_viol_start
1906  * constraint violations
1907      balance_p_viol_start
1908      balance_q_viol_start
1909      p_generator_add_viol_start
1910      c_I_limit_viol_start
1911      c_V_limit_lo_viol_start
1912      c_V_limit_up_viol_start
1913      v_generator_hardupl_viol_start
1914      v_generator_harddownl_viol_start
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 37
display_start
C o m p i l a t i o n


1915      v_under_q_up_slack_viol_start
1916      v_over_q_lo_slack_viol_start
1917  * summaries
1918      "display start summary"
1919      p_load_start
1920      p_gen_start
1921      p_shunt_start
1922      sum_loss_start
1923      v_load_bus_volt_pen_start
1924      v_totalshuntswitching_start
1925      v_shuntswitchingtotalpenalty_start
1926      v_previous_solution_penalty_start
1927      v_objcost_start
1928      max_gen_p_lo_viol_start
1929      max_gen_p_up_viol_start
1930      max_gen_q_lo_viol_start
1931      max_gen_q_up_viol_start
1932      max_De_response_Inc_P_up_viol_start
1933      max_De_response_dec_P_lo_viol_start
1934      max_v_shunt_up_viol_start
1935      max_balance_p_viol_start
1936      max_balance_q_viol_start
1937      max_p_generator_add_viol_start
1938      max_c_I_limit_viol_start
1939      max_c_V_limit_lo_viol_start
1940      max_c_V_limit_up_viol_start
1941      max_v_generator_hardupl_viol_start
1942      max_v_generator_harddownl_viol_start
1943      max_v_under_q_up_slack_viol_start
1944      max_v_over_q_lo_slack_viol_start;
1945   
1947   
1948  put report_file;
1949  report_file.ap = 1;
1950  put
1951      'start point summary' /
1952      'p_load'
1953      p_load_start /
1954      'p_gen'
1955      p_gen_start /
1956      'p_shunt'
1957      p_shunt_start /
1958      'p_solar'
1959      p_solar_start /
1960      'p_dr'
1961      p_dr_start /
1962      'p_imbalance'
1963      p_imbalance_start /
1964      'sum_loss'
1965      sum_loss_start /
1966      'v_load_bus_volt_pen'
1967      v_load_bus_volt_pen_start /
1968      'v_totalshuntswitching'
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 38
display_start
C o m p i l a t i o n


1969      v_totalshuntswitching_start /
1970      'v_shuntswitchingtotalpenalty'
1971      v_shuntswitchingtotalpenalty_start /
1972      'v_previous_solution_penalty'
1973      v_previous_solution_penalty_start /
1974      'v_objcost'
1975      v_objcost_start /
1976      'max_gen_p_lo_viol'
1977      max_gen_p_lo_viol_start /
1978      'max_gen_p_up_viol'
1979      max_gen_p_up_viol_start /
1980      'max_gen_q_lo_viol'
1981      max_gen_q_lo_viol_start /
1982      'max_gen_q_up_viol'
1983      max_gen_q_up_viol_start /
1984      'max_De_response_Inc_P_up_viol'
1985      max_De_response_Inc_P_up_viol_start /
1986      'max_De_response_dec_P_lo_viol'
1987      max_De_response_dec_P_lo_viol_start /
1988      'max_v_shunt_up_viol'
1989      max_v_shunt_up_viol_start /
1990      'max_balance_p_viol'
1991      max_balance_p_viol_start /
1992      'max_balance_q_viol'
1993      max_balance_q_viol_start /
1994      'max_p_generator_add_viol'
1995      max_p_generator_add_viol_start /
1996      'max_c_I_limit_viol'
1997      max_c_I_limit_viol_start /
1998      'max_c_V_limit_lo_viol'
1999      max_c_V_limit_lo_viol_start /
2000      'max_c_V_limit_up_viol'
2001      max_c_V_limit_up_viol_start /
2002      'max_v_generator_hardupl_viol'
2003      max_v_generator_hardupl_viol_start /
2004      'max_v_generator_harddownl_viol'
2005      max_v_generator_harddownl_viol_start /
2006      'max_v_under_q_up_slack_viol'
2007      max_v_under_q_up_slack_viol_start /
2008      'max_v_over_q_lo_slack_viol'
2009      max_v_over_q_lo_slack_viol_start /;
2010  putclose;
2011   
2012  *===== SECTION: MODEL OPTIONS AND SOLVE
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/solve_procedure.gms
2015   
2016  *nlpfile knitroset.opt
2017  option  nlp = KNITRO;
2018  option  rminlp = KNITRO;
2019  option  minlp = knitro;
2020  option SysOut = On;
2021  *feastol =1e-7
2022   
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 39
display_start
C o m p i l a t i o n


2039   
2056   
2057  acopf.optfile=1;
2058  acopf.optca = 0;
2059  *acopf.optcr = 1e-8;
2060  acopf.reslim = 60;
2061  acopf.holdfixed = 1;
2062  acopf_check.optfile=1;
2063  acopf_check.optca = 0;
2064  *acopf_check.optcr = 1e-8;
2065  acopf_check.reslim = 60;
2066  acopf_check.holdfixed = 1;
2067   
      * TODO JH remove this solve
      * initial solve with penalty model
      * we seem to have significant difficulty solving a minlp problem,
      * at some time steps, even if we provide a feasible solution.
      * this is a problem with the knitro solver.
      *display "foo", numShuntStepsOn_init;
      V_shunt.l(bus,bus_s)$numBswitched(bus,bus_s) = numShuntStepsOn_init(bus,bus_s);
      solve acopf_check min V_objcosttest using rminlp;
      V_shunt.fx(bus,bus_s)$numBswitched(bus,bus_s) = round(V_shunt.l(bus,bus_s));
      solve acopf_check min V_objcosttest using rminlp;
      *solve acopf_check min V_objcosttest using minlp;
      V_shunt.lo(bus,bus_s)$numBswitched(bus,bus_s) = 0;
      V_shunt.up(bus,bus_s)$numBswitched(bus,bus_s) = numBswitched(bus,bus_s);
      *solve acopf_check min V_objcosttest using minlp;
      * PHASE 3:
      * set voltage penalty parameters to 0
      * fix voltage magnitude deviations to 0 for buses already achieving 0 deviation
      * fix reactive power (to what value?) for buses with nonzero deviation
      *   specifically,
      *     if deviation > 0 fix q to qlo
      *     if deviation < 0 fix q to qup
      *   what if deviation is nonzero but q is not at a bound already?
      *   this procedure risks infeasibility. Instead we could do:
      *     if deviation <> fix q to q.l
      *   or
      *     if deviation > 0 require q <= q.l
      *     if deviation < 0 require q >= q.l
      parameter
          sstat "final solver status"
          mstat "final model status"
          infeas "Number of infeasibilities from model solve"
          sumInf "SUM OF infeasibility";
      sstat=acopf_check.solvestat;
      mstat=acopf_check.modelstat;
      infeas = acopf_check.numInfes;
      sumInf = acopf_check.sumInfes;
2106   
2107  * TODO JH - feasibility problems with these solves
2108  * need to fix this
2109  *$ontext
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 40
display_start
C o m p i l a t i o n


2110   
2111  *==== SECTION: Solution Analysis
2112  * See if model is solved
2113  parameter
2114      sstat "final solver status"
2115      mstat "final model status"
2116      infeas "Number of infeasibilities from model solve"
2117      sumInf "SUM OF infeasibility";
2118   
2119  * for test to evaluate quality of start point
2120  * remove these lines for a real run
2121  *option rminlp=examiner;
2122  *solve acopf min V_objcost using rminlp;
2123  *$exit
2124   
2125  *** solve the model (phase 1)
2126  solve acopf min V_objcost using rminlp;
2127  **$exit
2128  **OPTION NLP=GAMSCHK;
2129  **solve acopf min V_objcost using rminlp;
2130  *
2131  *
2132  *
2133  infeas = acopf.numInfes;
2134  sumInf = acopf.sumInfes;
2135  sstat=acopf.solvestat;
2136  mstat=acopf.modelstat;
2137  *display infeas,sumInf;
2138   
2139  if(infeas ne 0,
2140  *        solve phase 2
2141  *        what is the best shunt starting point?
2142  *        does it matter?
2143           display  V_shunt.l;
2144           V_shunt.l(bus,bus_s)$numBswitched(bus,bus_s) = numShuntStepsOn_init(bus,bus_s);
2145           solve acopf_check min V_objcosttest using rminlp;
2146  *         if(acopf_check.modelstat ne 2 or acopf_check.modelstat ne 7,
2147  *            abort "failed to solve acopf_check with relaxed shunt settings";);
2149           display  V_shunt.l;
2150  *         if(acopf_check.modelstat ne 2 or acopf_check.modelstat ne 7,
2151  *            abort "failed to solve scopf_check after fixing shunts";);
2152           infeas = acopf_check.numInfes;
2153           sstat=acopf_check.solvestat;
2154           mstat=acopf_check.modelstat;
2155           saturaup(i)=V_artup.l(i);
2156           saturalow(i)=V_artlow.l(i);
2157  *        solve phase 3
2158           V_Q.fx(gen)$((sum(bus$atBus(gen,bus),saturaup(bus)) ne 0) or (sum(bus$atBus(gen,bus),saturalow(bus)) ne 0)) =V_Q.l(gen);
2159  *        V_Q.fx(gen)$(genQtemp(gen) ne 0 )=genQtemp(gen);
2160  *         acopf.optfile=2;
2161           solve acopf min V_objcost using rminlp;
2162  *         if(acopf.modelstat ne 2,
2163  *            abort "failed to solve acopf after fixing V at saturated buses";);
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 41
display_start
C o m p i l a t i o n


2164           infeas = acopf.numInfes;
2165           sstat=acopf.solvestat;
2166           mstat=acopf.modelstat;
2167  *        solve acopf_resolve min V_objcosttest using rminlp;
2168  );
2169   
2170  *$batinclude "%filepath%objective_voltage_stability_addterm.gms" obj demandbids
2171   
2172  * TODO - need to fix above solves
2173  *$offtext
2174   
2175  *while((infeas ne 0),
2176  *   voltageran_low=voltageran_low-step_leng;
2177  *   voltageran_high=voltageran_high+step_leng;
2178  *   display voltageran_low,voltageran_high;
2179  *   solve acopf min V_objcost using minlp;
2180  *);
2182   
2183   
2184   
2185  *===== SECTION: SOLUTION ANALYSIS
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/solution_analysis.gms
2187   
2188  * Declaration needs to be made outside loop
2189  set
2190      lines_at_limit(i,j,c) "lines at their bound"
2191  ;
2192  parameters
2193      total_cost "Cost of objective function"
2194      LMP(bus) "Locational marginal price"
2195      LineSP(i,j,c) "Marginal price of active power on line (i,j,c)"
2196      shuntB(i)
2197      TotalLoss         " Total Loss of all the lines"
2198      TotalSwitches "number of shunt switches used"
2199      RMSVoltageDeviation "root mean square of load bus voltage deviations"
2200      AverageLoadBusVoltageDeviation "average of load bus voltage deviations"
2201      VoltageDevNongen(bus) "voltage deviation in percentage"
2202      vmgen(gen) "generator voltage magnitude"
2203      vmgenBus(bus) "generator voltage magnitude at bus, consider multiple gen at same bus"
2204      vmnongen(bus) "nongenerator voltage magnitude"
2205      Totalvgendev "total gen voltage deviation from schedule"
2206      Totalvnongendev "total nongen voltage deviation from schedule"
2207      genbusid(gen)
2208      solarQupperlimit(bus)
2209      solarQlowerlimit(bus)
2210  ;
2211   
2212      TotalLoss=sum(i,V_Lossi.l(i));
2213  *     TotalLoss=0;
2214      TotalSwitches = sum((i,bus_s)$numBswitched(i,bus_s),abs(V_shunt.l(i,bus_s) - numShuntStepsOn_init(i,bus_s)));
2215  *    RMSVoltageDeviation=sqrt(sum(bus$load(bus), sqr(load_bus_voltage_goal - sqrt(sqr(V_real.l(bus)) + sqr(V_imag.l(bus))))) / max(sum(bus$load(bus),1),1));
2216      AverageLoadBusVoltageDeviation = sum(bus$load(bus), abs(load_bus_voltage_goal - sqrt(sqr(V_real.l(bus)) + sqr(V_imag.l(bus))))) / max(sum(bus$load(bus),1),1);
2217      VoltageDevNongen(bus)$(bus_penalize_volt_mag_target(bus) and type(bus) eq 1)=  load_bus_voltage_goal - sqrt(sqr(V_real.l(bus)) + sqr(V_imag.l(bus)));
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 42
display_start
C o m p i l a t i o n


2218  *calculate the total voltage deviation of generator bus and nongenerator bus
2219      Totalvnongendev= sum(bus$load(bus), abs(load_bus_voltage_goal - sqrt(sqr(V_real.l(bus)) + sqr(V_imag.l(bus)))));
2220      Totalvgendev= sum(bus$isGen(bus), abs(Vsch(bus) - sqrt(sqr(V_real.l(bus)) + sqr(V_imag.l(bus)))));
2221   
2222   
2223   
2224   
2225  *    Totalvgendev
2226   
2227   
2228  display  TotalLoss, infeas;
2229   
2230  ** switched shunt solution values
2231  parameter
2232    numShuntStepsOn_final(bus,bus_s)
2233    switched_shunt_susceptance_final(bus,bus_s);
2234  set
2235    switched_shunt_susceptance_keys(bus,bus_s);
2236  switched_shunt_susceptance_keys(bus,bus_s) = yes$numBswitched(bus,bus_s);
2237  numShuntStepsOn_final(i,bus_s)$numBswitched(i,bus_s) = V_shunt.l(i,bus_s);
2238  switched_shunt_susceptance_final(bus,bus_s)$numBswitched(bus,bus_s) = V_shunt.l(bus,bus_s) * Bswitched(bus,bus_s);
2239  execute_unload 'switched_shunt_current.gdx', numShuntStepsOn_final=numShuntStepsOn;
2240  *display switched_shunt_susceptance_keys;
2241  if(infeas eq 0,
2242  * Final Objective function value
2243      total_cost = V_objcost.l;
2244  * Generator real power solution
2245      Pg(gen) = V_P.l(gen);
2246  * Generator reactive power solution
2247      Qg(gen) = V_Q.l(gen);
2248  * Voltage magnitude solution
2249      Vm(bus) = sqrt(sqr(V_real.l(bus)) + sqr(V_imag.l(bus)));
2250      vmgen(gen) =sum(bus$(atBus(gen,bus)), Vm(bus));
2251      vmgenBus(bus)$(sum(gen,atBus(gen,bus)) > 0)= Vm(bus);
2252      vmnongen(bus)=Vm(bus)$(load(bus))
2253      display Vm;
2254  * Voltage angle solution
2255  *    Va(bus) = arctan2(V_imag.l(bus),V_real.l(bus)) * 180 / pi;
2256      loop(bus,
2257      if(V_real.l(bus) > 0,
2258          Va(bus) = arctan(V_imag.l(bus)/V_real.l(bus)) * 180/pi;
2259      else
2260          Va(bus) = arctan(V_imag.l(bus)/V_real.l(bus)) * 180/pi + 180;
2261      );
2262      );
2263  * Bus shunt solution
2264      shuntB(i) = sum(bus_s$numBswitched(i,bus_s), V_shunt.l(i,bus_s)*Bswitched(i,bus_s));
2265  * Locational marginal price of bus at time t
2266  *    LMP(bus) = c_BalanceP_nosolar.m(bus);
2267   
2268  * Marginal for active power on a line
2269  *    LineSP(i,j,c)$branchstatus(i,j,c) = c_I_Limit.m(i,j,c);
2270  *    LineSP(j,i,c)$branchstatus(i,j,c) = c_I_Limit.m(j,i,c);
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 43
display_start
C o m p i l a t i o n


2271   
2272  * Find which lines are at their limits
2273  *lines_at_limit(i,j,c)$(branchstatus(i,j,c) or branchstatus(j,i,c)) = yes$
2274  *     (sqr(currentrate(i,j,c)) - sqr(V_LineIr.L(i,j,c)) - sqr(V_LineIq.L(i,j,c)) le 1e-4);
2275  *display lines_at_limit;
2276   
2277  *==== SECTION: SOLUTION SAVE
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/solution_save.gms
2279  *file filename;
2280  *put_utility filename 'Exec' / 'results_' i.tl:0 '.gdx';
2281   
2282   
2283   
2284   
2285   
2286   
2287  *put_utilities  'gdxout' / 'out' Nb:0:0;
2288   
2290  );
2291   
2292  display Pmax, Pmin,ratio,switchedShuntB_init, V_dem_Load.l, V_switchedshuntB.l,V_P.l,V_P.up, V_P.lo, V_Q.l, V_Q.up, V_Q.lo, Qmax, Qmin;

**** LIST OF STRAY NAMES - CHECK DECLARATIONS FOR SPURIOUS COMMAS
**** STRAY NAME nongen OF TYPE SET  
**** STRAY NAME fuel_t OF TYPE SET  
**** STRAY NAME fuel_s OF TYPE SET  
**** STRAY NAME prime_mover OF TYPE SET  
**** STRAY NAME gen_s OF TYPE SET  
**** STRAY NAME interface_t OF TYPE SET  
**** STRAY NAME Nb OF TYPE PARAM
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 44
display_start
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/iv_acopf_reformulation_lop_adj.gms
     2      147 BATINCLUDE     1     151  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/extract_data_SunLamp_newformulation_cle.gms
     3      205 GDXIN          2      58  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/7bus.gdx
     4      221 GDXIN          2      74  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/solarbus2.gdx
     5      308 GDXIN          2     165  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/geni_st.gdx
     6      312 GDXIN          2     169  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/demand_response.gdx
     7      316 GDXIN          2     173  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/demandresponseload.gdx
     8      320 GDXIN          2     177  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/demandresponseprice.gdx
     9      375 GDXIN          2     253  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/solarlocation.gdx
    10      420 GDXIN          2     298  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/UC_OPF_load_elwi_BV.gdx
    11      458 GDXIN          2     336  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/geni_p.gdx
    12      474 GDXIN          2     352  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/UC_OPF_load_elwi_Q.gdx
    13      537 IF EXIST       1     153  /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/switched_shunt_current.gdx
    14      540 INCLUDE        1     158  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/params_from_user.gms
    15      571 INCLUDE        1     161  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/model_params.gms
    16      803 INCLUDE        1     164  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/data_manipulation.gms
    17      810 IF EXIST      16       7  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/switched_shunt_current.gdx
    18      858 INCLUDE        1     167  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/var_declaration.gms
    19      918 INCLUDE        1     170  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/eqn_declaration.gms
    20      965 INCLUDE        1     173  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/eqn_definition.gms
    21     1354 INCLUDE        1     176  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/mod_definition.gms
    22     1409 INCLUDE        1     179  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/var_bounds.gms
    23     1504 INCLUDE        1     182  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/start_point.gms
    24     1507 BATINCLUDE    23       3  ../home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/ic_iv/preset.gms
    25     1526 BATINCLUDE    23      12  ../home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/ic_iv/given.gms
    26     1549 INCLUDE       25      23  .../home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/ic_iv/calc_derived_vars.gms
    27     1677 INCLUDE        1     184  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/compute_start_metrics.gms
    28     1858 INCLUDE        1     187  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/display_start.gms
    29     2014 INCLUDE        1     193  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/solve_procedure.gms
    30     2186 INCLUDE        1     199  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/solution_analysis.gms
    31     2278 INCLUDE        1     202  ./home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/solution_save.gms


COMPILATION TIME     =        0.013 SECONDS      3 MB  24.9.1 r63795 LEX-LEG
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 45
display_start
E x e c u t i o n


----    319 PARAMETER demLoad  demandresponse load

             2           3           4           5

18       0.398       0.796       1.194       1.592
57       0.591       1.182       1.773       2.364


----    328 PARAMETER demLoad  demandresponse load

             2           3           4           5

18       0.080       0.159       0.239       0.318
57       0.118       0.236       0.355       0.473


----    328 PARAMETER demPrice  demandresponse price

             2           3           4           5

18      25.776      50.557      74.598      96.988
57      38.113      74.963     110.767     144.096


----    328 PARAMETER demLocation  location of demand response

18 1.000,    57 1.000


----    328 PARAMETER demSlope  slope

             2           3           4           5

18     323.848     311.337     302.047     281.300
57     322.388     311.705     302.851     281.924


----    818 PARAMETER Bswitched  susceptance of switched shunts

                      ( ALL       0.000 )


----   1407 PARAMETER Pmax  gen maximum real power output

1 20.089


----   1407 PARAMETER Pmin  gen minimum real power output

1 0.002

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 46
display_start
E x e c u t i o n


----   1407 PARAMETER Pd  bus real power demand

7 2.712460E-4


----   1407 PARAMETER Va  bus voltage angle

                      ( ALL       0.000 )


----   1407 PARAMETER Vm  bus voltage magnitude

7   1.000,    13  1.000,    18  1.000,    149 1.000,    54  1.000,    57  1.000,    56  1.000


----   1407 PARAMETER Qg  gen reactive power output

1 0.085


----   1407 PARAMETER Gs  bus shunt conductance

                      ( ALL       0.000 )


----   1407 PARAMETER B  line susceptance

                  1

7  .13      -46.943
7  .149     -33.624
13 .7       -46.943
13 .18      -28.548
13 .54      -72.445
18 .13      -28.548
149.7       -33.624
54 .13      -72.445
54 .57      -67.110
54 .56      -46.943
57 .54      -67.110
56 .54      -46.943


----   1407 PARAMETER bc  line charging susceptance

                  1

7  .13  1.891335E-7
7  .149 2.647869E-7
13 .7   1.891335E-7
13 .18  3.120704E-7
13 .54  1.229368E-7
18 .13  3.120704E-7
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 47
display_start
E x e c u t i o n


       1407 PARAMETER bc  line charging susceptance

                  1

149.7   2.647869E-7
54 .13  1.229368E-7
54 .57  1.323935E-7
54 .56  1.891335E-7
57 .54  1.323935E-7
56 .54  1.891335E-7


----   1673 VARIABLE V_real.L  Real part of bus voltage

7   1.000,    13  1.000,    18  1.000,    149 1.000,    54  1.000,    57  1.000,    56  1.000


----   1673 VARIABLE V_imag.L  Imaginary part of bus voltage

                      ( ALL       0.000 )


----   1673 PARAMETER Vm  bus voltage magnitude

7   1.000,    13  1.000,    18  1.000,    149 1.000,    54  1.000,    57  1.000,    56  1.000


----   1865 display start

----   1865 PARAMETER Pd  bus real power demand

7 2.712460E-4


----   1865 PARAMETER Qd  bus reactive power demand

7  5.083950E-4,    18       0.017,    57       0.016


----   1865 PARAMETER V_P_start  

1 0.160


----   1865 PARAMETER V_Q_start  

1 0.085


----   1865 PARAMETER P_S_start  

                      ( ALL       0.000 )

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 48
display_start
E x e c u t i o n


----   1865 PARAMETER Q_S_start  

                      ( ALL       0.000 )


----   1865 PARAMETER V_real_start  

7   1.000,    13  1.000,    18  1.000,    149 1.000,    54  1.000,    57  1.000,    56  1.000


----   1865 PARAMETER V_imag_start  

                      ( ALL       0.000 )


----   1865 PARAMETER Solar_p_curtail_start  

                      ( ALL       0.000 )


----   1865 PARAMETER De_response_Dec_P_start  

                      ( ALL       0.000 )


----   1865 PARAMETER De_response_Inc_P_start  

                      ( ALL       0.000 )


----   1865 PARAMETER V_switchedshuntB_start  

                      ( ALL       0.000 )


----   1865 PARAMETER V_shunt_start  

                      ( ALL       0.000 )


----   1865 PARAMETER V_P_system_deviation_start =        0.000  

----   1865 PARAMETER V_LineIr_start  

                      ( ALL       0.000 )

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 49
display_start
E x e c u t i o n


----   1865 PARAMETER V_LineIq_start  

                  1

7  .13  9.456675E-8
7  .149 1.323935E-7
13 .7   9.456675E-8
13 .18  1.560352E-7
13 .54  6.146840E-8
18 .13  1.560352E-7
149.7   1.323935E-7
54 .13  6.146840E-8
54 .57  6.619675E-8
54 .56  9.456675E-8
57 .54  6.619675E-8
56 .54  9.456675E-8


----   1865 PARAMETER V_Lossijc_start  

                 1

7  .13 7.51201E-17
13 .18 3.35988E-16
13 .54 2.04032E-17
149.7  2.05499E-16
54 .57 2.58539E-17
54 .56 7.51201E-17


----   1865 PARAMETER V_Lossi_start  

7   7.51201E-17,    13  3.56392E-16,    149 2.05499E-16,    54  1.00974E-16


----   1865 PARAMETER V_load_bus_volt_pen_dev_start  

7 0.010


----   1865 PARAMETER V_load_bus_volt_pen_start =        0.010  

----   1865 PARAMETER V_shuntSwitching_start  

                      ( ALL       0.000 )


----   1865 PARAMETER V_totalShuntSwitching_start =        0.000  

----   1865 PARAMETER V_shuntSwitchingPenalty_start  

                      ( ALL       0.000 )

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 50
display_start
E x e c u t i o n


----   1865 PARAMETER V_shuntTotalSwitchingPenalty_start =        0.000  
            PARAMETER V_shuntSwitchingTotalPenalty_start =        0.000  
            PARAMETER V_previous_solution_penalty_start =        0.000  
            PARAMETER V_objcost_start      =        0.010  

----   1865 PARAMETER gen_p_lo_viol_start  

                      ( ALL       0.000 )


----   1865 PARAMETER gen_p_up_viol_start  

                      ( ALL       0.000 )


----   1865 PARAMETER gen_q_lo_viol_start  

                      ( ALL       0.000 )


----   1865 PARAMETER gen_q_up_viol_start  

                      ( ALL       0.000 )


----   1865 PARAMETER De_response_Inc_P_up_viol_start  

                      ( ALL       0.000 )


----   1865 PARAMETER De_response_dec_P_lo_viol_start  

                      ( ALL       0.000 )


----   1865 PARAMETER v_shunt_up_viol_start  

                      ( ALL       0.000 )


----   1865 PARAMETER balance_p_viol_start  

7   -2.71246E-4,    149       0.160


----   1865 PARAMETER balance_q_viol_start  

7   -5.08168E-4,    13  3.120703E-7,    18       -0.017,    149       0.085,    54  2.222319E-7,    57       -0.016,    56  9.456675E-8


----   1865 PARAMETER p_generator_add_viol_start  

                      ( ALL       0.000 )
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 51
display_start
E x e c u t i o n


----   1865 PARAMETER c_I_limit_viol_start  

                      ( ALL       0.000 )


----   1865 PARAMETER c_V_limit_lo_viol_start  

                      ( ALL       0.000 )


----   1865 PARAMETER c_V_limit_up_viol_start  

                      ( ALL       0.000 )


----   1865 PARAMETER v_generator_hardupl_viol_start  

                      ( ALL       0.000 )


----   1865 PARAMETER v_generator_harddownl_viol_start  

                      ( ALL       0.000 )


----   1865 PARAMETER v_under_q_up_slack_viol_start  

                      ( ALL       0.000 )


----   1865 PARAMETER v_over_q_lo_slack_viol_start  

                      ( ALL       0.000 )


----   1865 display start summary
            PARAMETER p_load_start         =  2.712460E-4  
            PARAMETER p_gen_start          =        0.160  
            PARAMETER p_shunt_start        =        0.000  
            PARAMETER sum_loss_start       =  7.37984E-16  
            PARAMETER V_load_bus_volt_pen_start =        0.010  
            PARAMETER V_totalShuntSwitching_start =        0.000  
            PARAMETER V_shuntSwitchingTotalPenalty_start =        0.000  
            PARAMETER V_previous_solution_penalty_start =        0.000  
            PARAMETER V_objcost_start      =        0.010  
            PARAMETER max_gen_p_lo_viol_start =        0.000  
            PARAMETER max_gen_p_up_viol_start =        0.000  
            PARAMETER max_gen_q_lo_viol_start =        0.000  
            PARAMETER max_gen_q_up_viol_start =        0.000  
            PARAMETER max_De_response_Inc_P_up_viol_start =         -INF  
            PARAMETER max_De_response_dec_P_lo_viol_start =         -INF  
            PARAMETER max_v_shunt_up_viol_start =         -INF  
            PARAMETER max_balance_p_viol_start =        0.160  
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 52
display_start
E x e c u t i o n


            PARAMETER max_balance_q_viol_start =        0.085  
            PARAMETER max_p_generator_add_viol_start =        0.000  
            PARAMETER max_c_I_limit_viol_start =        0.000  
            PARAMETER max_c_V_limit_lo_viol_start =        0.000  
            PARAMETER max_c_V_limit_up_viol_start =        0.000  
            PARAMETER max_v_generator_hardupl_viol_start =        0.000  
            PARAMETER max_v_generator_harddownl_viol_start =        0.000  
            PARAMETER max_v_under_q_up_slack_viol_start =        0.000  
            PARAMETER max_v_over_q_lo_slack_viol_start =        0.000  

**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 53
display_start
E x e c u t i o n


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1950: NOT ENOUGH SPACE FOR E-FORMAT - RESET

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 54
display_start
Equation Listing    SOLVE acopf Using RMINLP From line 2126


---- c_LineIrij  =E=  Real current flowing from bus i into bus j along line c

c_LineIrij(7,13,1)..  - 22.9257641921397*V_real(7) + 22.9257641921397*V_real(13) - 46.9432313464813*V_imag(7) + 46.943231441048*V_imag(13) + V_LineIr(7,13,1) =E= 0 ; (LHS = 0)
     
c_LineIrij(13,18,1)..  - 13.9206924031352*V_real(13) + 13.9206924031352*V_real(18) - 28.5475067286551*V_imag(13) + 28.5475068846903*V_imag(18) + V_LineIr(13,18,1) =E= 0 ; (LHS = 0)
     
c_LineIrij(13,54,1)..  - 34.9288486416559*V_real(13) + 34.9288486416559*V_real(54) - 72.4450193434475*V_imag(13) + 72.4450194049159*V_imag(54) + V_LineIr(13,54,1) =E= 0 ; (LHS = 0)
     
REMAINING 3 ENTRIES SKIPPED


---- c_LineIrji  =E=  Real  current flowing from bus j into bus i along line c

c_LineIrji(7,13,1)..  22.9257641921397*V_real(7) - 22.9257641921397*V_real(13) + 46.943231441048*V_imag(7) - 46.9432313464813*V_imag(13) + V_LineIr(13,7,1) =E= 0 ; (LHS = 0)
     
c_LineIrji(13,18,1)..  13.9206924031352*V_real(13) - 13.9206924031352*V_real(18) + 28.5475068846903*V_imag(13) - 28.5475067286551*V_imag(18) + V_LineIr(18,13,1) =E= 0 ; (LHS = 0)
     
c_LineIrji(13,54,1)..  34.9288486416559*V_real(13) - 34.9288486416559*V_real(54) + 72.4450194049159*V_imag(13) - 72.4450193434475*V_imag(54) + V_LineIr(54,13,1) =E= 0 ; (LHS = 0)
     
REMAINING 3 ENTRIES SKIPPED


---- c_LineIqij  =E=  Reactive current  flowing from bus i into bus j along line c

c_LineIqij(7,13,1)..  46.9432313464813*V_real(7) - 46.943231441048*V_real(13) - 22.9257641921397*V_imag(7) + 22.9257641921397*V_imag(13) + V_LineIq(7,13,1) =E= 0 ; (LHS = 0)
     
c_LineIqij(13,18,1)..  28.5475067286551*V_real(13) - 28.5475068846903*V_real(18) - 13.9206924031352*V_imag(13) + 13.9206924031352*V_imag(18) + V_LineIq(13,18,1) =E= 0 ; (LHS = 0)
     
c_LineIqij(13,54,1)..  72.4450193434475*V_real(13) - 72.4450194049159*V_real(54) - 34.9288486416559*V_imag(13) + 34.9288486416559*V_imag(54) + V_LineIq(13,54,1) =E= 0 ; (LHS = 0)
     
REMAINING 3 ENTRIES SKIPPED


---- c_LineIqji  =E=  Reactive current flowing from bus j into bus i along line c

c_LineIqji(7,13,1)..  - 46.943231441048*V_real(7) + 46.9432313464813*V_real(13) + 22.9257641921397*V_imag(7) - 22.9257641921397*V_imag(13) + V_LineIq(13,7,1) =E= 0 ; (LHS = 0)
     
c_LineIqji(13,18,1)..  - 28.5475068846903*V_real(13) + 28.5475067286551*V_real(18) + 13.9206924031352*V_imag(13) - 13.9206924031352*V_imag(18) + V_LineIq(18,13,1) =E= 0 ; (LHS = 0)
     
c_LineIqji(13,54,1)..  - 72.4450194049159*V_real(13) + 72.4450193434475*V_real(54) + 34.9288486416559*V_imag(13) - 34.9288486416559*V_imag(54) + V_LineIq(54,13,1) =E= 0 ; (LHS = 0)
     
REMAINING 3 ENTRIES SKIPPED


---- c_BalanceP_nosolar  =E=  Balance of real power for bus without solar

c_BalanceP_nosolar(7)..  (0)*V_real(7) - (2.26960203519866E-7)*V_imag(7) - (1)*V_LineIr(7,13,1) - (1)*V_LineIr(7,149,1) + (0)*V_LineIq(7,13,1) + (0)*V_LineIq(7,149,1) =E= 0.000271245962631974 ; (LHS = 0, INFES = 0.000271245962631974 ****)
     
c_BalanceP_nosolar(18)..  (0)*V_real(18) - (1.56035198983773E-7)*V_imag(18) - (1)*V_LineIr(18,13,1) + (0)*V_LineIq(18,13,1) - V_dem_Load(18,2) - V_dem_Load(18,3) - V_dem_Load(18,4) - V_dem_Load(18,5) =E= 0 ; (LHS = 0)
     
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 55
display_start
Equation Listing    SOLVE acopf Using RMINLP From line 2126


     c_BalanceP_nosolar  =E=  Balance of real power for bus without solar

c_BalanceP_nosolar(149)..  V_P(1) + (0)*V_real(149) - (1)*V_LineIr(149,7,1) =E= 0 ; (LHS = 0.16, INFES = 0.16 ****)
     
REMAINING 2 ENTRIES SKIPPED


---- c_BalanceP_solar  =E=  Balance of real power for bus with solar

c_BalanceP_solar(13)..  P_S(13) + (0)*V_real(13) - (3.12070348229554E-7)*V_imag(13) - (1)*V_LineIr(13,7,1) - (1)*V_LineIr(13,18,1) - (1)*V_LineIr(13,54,1) + (0)*V_LineIq(13,7,1) + (0)*V_LineIq(13,18,1) + (0)*V_LineIq(13,54,1) =E= 0 ;
     
      (LHS = 0.006, INFES = 0.006 ****)
     
c_BalanceP_solar(57)..  P_S(57) + (0)*V_real(57) - (6.61967476389691E-8)*V_imag(57) - (1)*V_LineIr(57,54,1) + (0)*V_LineIq(57,54,1) - V_dem_Load(57,2) - V_dem_Load(57,3) - V_dem_Load(57,4) - V_dem_Load(57,5) =E= 0 ; (LHS = 0.004, INFES = 0.004 ****)
     

---- c_BalanceQ_nosolar  =E=  Balance of reactive power for bus without solar

c_BalanceQ_nosolar(7)..  (2.26960203519866E-7)*V_real(7) + (0)*V_imag(7) + (0)*V_LineIr(7,13,1) + (0)*V_LineIr(7,149,1) + (1)*V_LineIq(7,13,1) + (1)*V_LineIq(7,149,1) =E= 0.000508395015522171 ; (LHS = 2.26960203519866E-7
     , INFES = 0.000508168055318652 ****)
     
c_BalanceQ_nosolar(18)..  (1.56035198983773E-7)*V_real(18) + (0)*V_imag(18) + (0)*V_LineIr(18,13,1) + (1)*V_LineIq(18,13,1) =E= 0.0173972920194605 ; (LHS = 1.56035198983773E-7, INFES = 0.0173971359842615 ****)
     
c_BalanceQ_nosolar(149)..  V_Q(1) + (1.32393452645374E-7)*V_real(149) + (1)*V_LineIq(149,7,1) =E= 0 ; (LHS = 0.0852001323934526, INFES = 0.0852001323934526 ****)
     
REMAINING 2 ENTRIES SKIPPED


---- c_BalanceQ_solar  =E=  Balance of reactive power for bus with solar

c_BalanceQ_solar(13)..  Q_S(13) + (3.12070348229554E-7)*V_real(13) + (0)*V_imag(13) + (0)*V_LineIr(13,7,1) + (0)*V_LineIr(13,18,1) + (0)*V_LineIr(13,54,1) + (1)*V_LineIq(13,7,1) + (1)*V_LineIq(13,18,1) + (1)*V_LineIq(13,54,1) =E= 0 ;
     
      (LHS = 3.12070348229554E-7, INFES = 3.12070348229554E-7 ****)
     
c_BalanceQ_solar(57)..  Q_S(57) + (6.61967476389691E-8)*V_real(57) + (0)*V_imag(57) + (0)*V_LineIr(57,54,1) + (1)*V_LineIq(57,54,1) =E= 0.016008323829494 ; (LHS = 6.61967476389691E-8, INFES = 0.0160082576327464 ****)
     

---- c_Lossijc  =E=  Loss on line c connecting bus i and bus j

c_Lossijc(7,13,1)..  (0)*V_LineIr(7,13,1) - (1.58872141469146E-9)*V_LineIq(7,13,1) + V_Lossijc(7,13,1) =E= 0 ; (LHS = 0)
     
c_Lossijc(13,18,1)..  (0)*V_LineIr(13,18,1) - (4.30657149195213E-9)*V_LineIq(13,18,1) + V_Lossijc(13,18,1) =E= 0 ; (LHS = 0)
     
c_Lossijc(13,54,1)..  (0)*V_LineIr(13,54,1) - (6.63858702409925E-10)*V_LineIq(13,54,1) + V_Lossijc(13,54,1) =E= 0 ; (LHS = 0)
     
REMAINING 3 ENTRIES SKIPPED


---- c_Lossi  =E=  Loss on lines connected with bus i

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 56
display_start
Equation Listing    SOLVE acopf Using RMINLP From line 2126


     c_Lossi  =E=  Loss on lines connected with bus i

c_Lossi(7)..  - V_Lossijc(7,13,1) + V_Lossi(7) =E= 0 ; (LHS = 0)
     
c_Lossi(13)..  - V_Lossijc(13,18,1) - V_Lossijc(13,54,1) + V_Lossi(13) =E= 0 ; (LHS = 0)
     
c_Lossi(18)..  V_Lossi(18) =E= 0 ; (LHS = 0)
     
REMAINING 4 ENTRIES SKIPPED


---- v_generator_hardupl  =L=  bus voltage constraints upper bound

v_generator_hardupl(7)..  (1)*V_real(7) + (0)*V_imag(7) =L= 1.15 ; (LHS = 1)
     
v_generator_hardupl(13)..  (1)*V_real(13) + (0)*V_imag(13) =L= 1.15 ; (LHS = 1)
     
v_generator_hardupl(18)..  (1)*V_real(18) + (0)*V_imag(18) =L= 1.15 ; (LHS = 1)
     
REMAINING 4 ENTRIES SKIPPED


---- v_generator_harddownl  =G=  bus voltage constraints lower bound

v_generator_harddownl(7)..  (1)*V_real(7) + (0)*V_imag(7) =G= 0.88 ; (LHS = 1)
     
v_generator_harddownl(13)..  (1)*V_real(13) + (0)*V_imag(13) =G= 0.88 ; (LHS = 1)
     
v_generator_harddownl(18)..  (1)*V_real(18) + (0)*V_imag(18) =G= 0.88 ; (LHS = 1)
     
REMAINING 4 ENTRIES SKIPPED


---- p_generator_add  =E=  enforces generator participation factor in adjustment from schedule

p_generator_add(1)..  V_P(1) - V_P_system_deviation =E= 0.16 ; (LHS = 0.16)
     

---- c_BalanceP_control_solar  =E=  balance of real power for controllable solar

                NONE


---- c_switchedshuntB_Def  =E=  defines total susceptance from switched shunts at bus i

                NONE


---- c_shuntSwitchingDef1  =G=  defines number of steps switched - side 1

                NONE

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 57
display_start
Equation Listing    SOLVE acopf Using RMINLP From line 2126


---- c_shuntSwitchingDef2  =G=  defines number of steps switched - side 2

                NONE


---- c_totalShuntSwitchingDef  =G=  defines total number of steps switched

c_totalShuntSwitchingDef..  V_totalShuntSwitching =G= 0 ; (LHS = 0)
     

---- c_shuntSwitchingPenaltyDef1  =G=  defines local shunt switching penalty - segment 1

                NONE


---- c_shuntSwitchingPenaltyDef2  =G=  defines local shunt switching penalty - segment 2

                NONE


---- c_shuntTotalSwitchingPenalty  =G=  defines penalty incurred by total shunt switching

c_shuntTotalSwitchingPenalty..  V_shuntTotalSwitchingPenalty =G= 0 ; (LHS = 0)
     

---- c_shuntSwitchingTotalPenaltyDef  =G=   defines total penalty incurrent by shunt switching

c_shuntSwitchingTotalPenaltyDef..  - V_shuntTotalSwitchingPenalty + V_shuntSwitchingTotalPenalty =G= 0 ; (LHS = 0)
     

---- c_previous_solution_penalty_def  =G=  defines previous solution deviation penalty

c_previous_solution_penalty_def..  V_previous_solution_penalty =G= 0 ; (LHS = 0)
     

---- v_generator_addup  =L=  generator voltage constraints added selectively

v_generator_addup(149)..  (1)*V_real(149) =L= 1 ; (LHS = 1)
     

---- v_generator_addlow  =G=  generator voltage constraints added

v_generator_addlow(149)..  (1)*V_real(149) =G= 1 ; (LHS = 1)
     

---- c_obj  =E=  Objective function

c_obj..  - 5000000*V_P(1) - (208.5)*P_S(7) - (153)*P_S(13) - (180)*P_S(18) - (210.5)*P_S(57) - (260.5)*P_S(56) - V_shuntSwitchingTotalPenalty + 323.847688100098*V_dem_Load(18,2) + 311.337237670177*V_dem_Load(18,3) + 302.047070227742*V_dem_Load(18,4)
     
      + 281.300082027018*V_dem_Load(18,5) + 322.387730852268*V_dem_Load(57,2) + 311.704699776547*V_dem_Load(57,3) + 302.851411075415*V_dem_Load(57,4) + 281.923534535585*V_dem_Load(57,5) + V_objcost =E= -799997.94 ; (LHS = -800005.045, INFES = 7.105 ****)
     
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 58
display_start
Column Listing      SOLVE acopf Using RMINLP From line 2126


---- V_P  Real power generation of generator

V_P(1)
                (.LO, .L, .UP, .M = 0.16, 0.16, 20.0886, 0)
        1       c_BalanceP_nosolar(149)
        1       p_generator_add(1)
  -5.000000E+6  c_obj


---- V_Q  Reactive power generation of generator

V_Q(1)
                (.LO, .L, .UP, .M = -60, 0.0852, 60, 0)
        1       c_BalanceQ_nosolar(149)


---- P_S  real power generation of solar bus

P_S(7)
                (.LO, .L, .UP, .M = 0.01, 0.01, 0.1, 0)
    (-208.5)    c_obj
        0       (OLD LEVEL ****)

P_S(13)
                (.LO, .L, .UP, .M = 0.006, 0.006, 0.06, 0)
        1       c_BalanceP_solar(13)
    (-153)      c_obj
        0       (OLD LEVEL ****)

P_S(18)
                (.LO, .L, .UP, .M = 0.004, 0.004, 0.02, 0)
    (-180)      c_obj
        0       (OLD LEVEL ****)

REMAINING 2 ENTRIES SKIPPED

---- Q_S  reactive power generation of solar bus

Q_S(13)
                (.LO, .L, .UP, .M = -300, 0, 300, 0)
        1       c_BalanceQ_solar(13)

Q_S(57)
                (.LO, .L, .UP, .M = -300, 0, 300, 0)
        1       c_BalanceQ_solar(57)


---- V_real  Real part of bus voltage

V_real(7)
                (.LO, .L, .UP, .M = -1.05, 1, 1.05, 0)
      -22.9258  c_LineIrij(7,13,1)
       16.4129  c_LineIrij(149,7,1)
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 59
display_start
Column Listing      SOLVE acopf Using RMINLP From line 2126


     V_real  Real part of bus voltage

       22.9258  c_LineIrji(7,13,1)
      -16.4129  c_LineIrji(149,7,1)
       46.9432  c_LineIqij(7,13,1)
      -33.6238  c_LineIqij(149,7,1)
      -46.9432  c_LineIqji(7,13,1)
       33.6238  c_LineIqji(149,7,1)
       (0)      c_BalanceP_nosolar(7)
 (2.2696020E-7) c_BalanceQ_nosolar(7)
       (1)      v_generator_hardupl(7)
       (1)      v_generator_harddownl(7)

V_real(13)
                (.LO, .L, .UP, .M = -1.05, 1, 1.05, 0)
       22.9258  c_LineIrij(7,13,1)
      -13.9207  c_LineIrij(13,18,1)
      -34.9288  c_LineIrij(13,54,1)
      -22.9258  c_LineIrji(7,13,1)
       13.9207  c_LineIrji(13,18,1)
       34.9288  c_LineIrji(13,54,1)
      -46.9432  c_LineIqij(7,13,1)
       28.5475  c_LineIqij(13,18,1)
       72.445   c_LineIqij(13,54,1)
       46.9432  c_LineIqji(7,13,1)
      -28.5475  c_LineIqji(13,18,1)
      -72.445   c_LineIqji(13,54,1)
       (0)      c_BalanceP_solar(13)
 (3.1207035E-7) c_BalanceQ_solar(13)
       (1)      v_generator_hardupl(13)
       (1)      v_generator_harddownl(13)

V_real(18)
                (.LO, .L, .UP, .M = -1.05, 1, 1.05, 0)
       13.9207  c_LineIrij(13,18,1)
      -13.9207  c_LineIrji(13,18,1)
      -28.5475  c_LineIqij(13,18,1)
       28.5475  c_LineIqji(13,18,1)
       (0)      c_BalanceP_nosolar(18)
 (1.5603520E-7) c_BalanceQ_nosolar(18)
       (1)      v_generator_hardupl(18)
       (1)      v_generator_harddownl(18)

REMAINING 4 ENTRIES SKIPPED

---- V_imag  Imaginary part of bus voltage

V_imag(7)
                (.LO, .L, .UP, .M = -1.05, 0, 1.05, 0)
      -46.9432  c_LineIrij(7,13,1)
       33.6238  c_LineIrij(149,7,1)
       46.9432  c_LineIrji(7,13,1)
      -33.6238  c_LineIrji(149,7,1)
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 60
display_start
Column Listing      SOLVE acopf Using RMINLP From line 2126


     V_imag  Imaginary part of bus voltage

      -22.9258  c_LineIqij(7,13,1)
       16.4129  c_LineIqij(149,7,1)
       22.9258  c_LineIqji(7,13,1)
      -16.4129  c_LineIqji(149,7,1)
 (-2.269602E-7) c_BalanceP_nosolar(7)
       (0)      c_BalanceQ_nosolar(7)
       (0)      v_generator_hardupl(7)
       (0)      v_generator_harddownl(7)

V_imag(13)
                (.LO, .L, .UP, .M = -1.05, 0, 1.05, 0)
       46.9432  c_LineIrij(7,13,1)
      -28.5475  c_LineIrij(13,18,1)
      -72.445   c_LineIrij(13,54,1)
      -46.9432  c_LineIrji(7,13,1)
       28.5475  c_LineIrji(13,18,1)
       72.445   c_LineIrji(13,54,1)
       22.9258  c_LineIqij(7,13,1)
      -13.9207  c_LineIqij(13,18,1)
      -34.9288  c_LineIqij(13,54,1)
      -22.9258  c_LineIqji(7,13,1)
       13.9207  c_LineIqji(13,18,1)
       34.9288  c_LineIqji(13,54,1)
 (-3.120703E-7) c_BalanceP_solar(13)
       (0)      c_BalanceQ_solar(13)
       (0)      v_generator_hardupl(13)
       (0)      v_generator_harddownl(13)

V_imag(18)
                (.LO, .L, .UP, .M = -1.05, 0, 1.05, 0)
       28.5475  c_LineIrij(13,18,1)
      -28.5475  c_LineIrji(13,18,1)
       13.9207  c_LineIqij(13,18,1)
      -13.9207  c_LineIqji(13,18,1)
 (-1.560352E-7) c_BalanceP_nosolar(18)
       (0)      c_BalanceQ_nosolar(18)
       (0)      v_generator_hardupl(18)
       (0)      v_generator_harddownl(18)

REMAINING 3 ENTRIES SKIPPED

---- V_LineIr  Real current flowing from bus i towards bus j on line c

V_LineIr(7,13,1)
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       c_LineIrij(7,13,1)
      (-1)      c_BalanceP_nosolar(7)
       (0)      c_BalanceQ_nosolar(7)
       (0)      c_Lossijc(7,13,1)

V_LineIr(7,149,1)
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 61
display_start
Column Listing      SOLVE acopf Using RMINLP From line 2126


     V_LineIr  Real current flowing from bus i towards bus j on line c

                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       c_LineIrji(149,7,1)
      (-1)      c_BalanceP_nosolar(7)
       (0)      c_BalanceQ_nosolar(7)

V_LineIr(13,7,1)
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       c_LineIrji(7,13,1)
      (-1)      c_BalanceP_solar(13)
       (0)      c_BalanceQ_solar(13)

REMAINING 9 ENTRIES SKIPPED

---- V_LineIq  Reactive current flowing from bus i towards bus j on line c

V_LineIq(7,13,1)
                (.LO, .L, .UP, .M = -INF, 9.45667508744918E-8, +INF, 0)
        1       c_LineIqij(7,13,1)
       (0)      c_BalanceP_nosolar(7)
       (1)      c_BalanceQ_nosolar(7)
 (-1.588721E-9) c_Lossijc(7,13,1)

V_LineIq(7,149,1)
                (.LO, .L, .UP, .M = -INF, 1.32393452645374E-7, +INF, 0)
        1       c_LineIqji(149,7,1)
       (0)      c_BalanceP_nosolar(7)
       (1)      c_BalanceQ_nosolar(7)

V_LineIq(13,7,1)
                (.LO, .L, .UP, .M = -INF, 9.45667508744918E-8, +INF, 0)
        1       c_LineIqji(7,13,1)
       (0)      c_BalanceP_solar(13)
       (1)      c_BalanceQ_solar(13)

REMAINING 9 ENTRIES SKIPPED

---- V_Lossijc  Loss on line c connecting bus i and bus j

V_Lossijc(7,13,1)
                (.LO, .L, .UP, .M = -INF, 7.51201111160489E-17, +INF, 0)
        1       c_Lossijc(7,13,1)
       -1       c_Lossi(7)

V_Lossijc(13,18,1)
                (.LO, .L, .UP, .M = -INF, 3.35988369842297E-16, +INF, 0)
        1       c_Lossijc(13,18,1)
       -1       c_Lossi(13)

V_Lossijc(13,54,1)
                (.LO, .L, .UP, .M = -INF, 2.04031655909903E-17, +INF, 0)
        1       c_Lossijc(13,54,1)
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 62
display_start
Column Listing      SOLVE acopf Using RMINLP From line 2126


     V_Lossijc  Loss on line c connecting bus i and bus j

       -1       c_Lossi(13)

REMAINING 3 ENTRIES SKIPPED

---- V_Lossi  Loss on lines connecting with bus i

V_Lossi(7)
                (.LO, .L, .UP, .M = -INF, 7.51201111160489E-17, +INF, 0)
        1       c_Lossi(7)

V_Lossi(13)
                (.LO, .L, .UP, .M = -INF, 3.56391535433287E-16, +INF, 0)
        1       c_Lossi(13)

V_Lossi(18)
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       c_Lossi(18)

REMAINING 4 ENTRIES SKIPPED

---- V_totalShuntSwitching  total number of steps switched

V_totalShuntSwitching
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       c_totalShuntSwitchingDef


---- V_shuntTotalSwitchingPenalty  penalty incurred by total shunt switching

V_shuntTotalSwitchingPenalty
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       c_shuntTotalSwitchingPenalty
       -1       c_shuntSwitchingTotalPenaltyDef


---- V_shuntSwitchingTotalPenalty  total penalty incurrent by shunt switching

V_shuntSwitchingTotalPenalty
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       c_shuntSwitchingTotalPenaltyDef
       -1       c_obj


---- V_dem_Load  demand load level

V_dem_Load(18,2)
                (.LO, .L, .UP, .M = 0, 0, 0.0795944410137654, 0)
       -1       c_BalanceP_nosolar(18)
      323.8477  c_obj

V_dem_Load(18,3)
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 63
display_start
Column Listing      SOLVE acopf Using RMINLP From line 2126


     V_dem_Load  demand load level

                (.LO, .L, .UP, .M = 0, 0, 0.0795944410137654, 0)
       -1       c_BalanceP_nosolar(18)
      311.3372  c_obj

V_dem_Load(18,4)
                (.LO, .L, .UP, .M = 0, 0, 0.0795944410137654, 0)
       -1       c_BalanceP_nosolar(18)
      302.0471  c_obj

REMAINING 5 ENTRIES SKIPPED

---- V_previous_solution_penalty  total penalty on deviation to previous solution

V_previous_solution_penalty
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       c_previous_solution_penalty_def


---- V_objcost  Total cost of objective function

V_objcost
                (.LO, .L, .UP, .M = -INF, 7.37984193494078E-16, +INF, 0)
        1       c_obj


---- V_P_system_deviation  system total adjustment from real generation schedule

V_P_system_deviation
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
       -1       p_generator_add(1)

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 64
display_start
Model Statistics    SOLVE acopf Using RMINLP From line 2126


MODEL STATISTICS

BLOCKS OF EQUATIONS          26     SINGLE EQUATIONS           73
BLOCKS OF VARIABLES          17     SINGLE VARIABLES           73  5 projected
NON ZERO ELEMENTS           284     NON LINEAR N-Z            117
DERIVATIVE POOL              20     CONSTANT POOL              33
CODE LENGTH                 346


GENERATION TIME      =        0.002 SECONDS      4 MB  24.9.1 r63795 LEX-LEG


EXECUTION TIME       =        0.004 SECONDS      4 MB  24.9.1 r63795 LEX-LEG
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 65
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2126


               S O L V E      S U M M A R Y

     MODEL   acopf               OBJECTIVE  V_objcost
     TYPE    RMINLP              DIRECTION  MINIMIZE
     SOLVER  KNITRO              FROM LINE  2126

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      2 Locally Optimal           
**** OBJECTIVE VALUE              -49.0495

 RESOURCE USAGE, LIMIT          0.030        60.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

KNITRO           24.9.1 r63795 Released Aug 30, 2017 LEG x86 64bit/Linux      

*** Error Cannot open parameter file "/home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/knitro.opt"
*** Error Error code = 2; No such file or directory
Artelys Knitro Optimizer 10.3.0

=======================================
          Commercial License
         Artelys Knitro 10.3.0
=======================================

Knitro presolve eliminated 8 variables 
and 11 constraints.

datacheck:               0
hessian_no_f:            1
maxtime_real:            60
newpoint:                3
par_concurrent_evals:    0
Knitro changing algorithm from AUTO to 1.
Knitro changing bar_initpt from AUTO to 3.
Knitro changing bar_murule from AUTO to 4.
Knitro changing bar_penaltycons from AUTO to 1.
Knitro changing bar_penaltyrule from AUTO to 2.
Knitro changing bar_switchrule from AUTO to 2.
Knitro changing linesearch from AUTO to 1.
Knitro changing linsolver from AUTO to 2.
Knitro shifted start point to satisfy presolved bounds (18 variables).
Knitro fixing 3 variables eliminated from the presolve.
Knitro reinitializing 1 variable eliminated from the presolve.

Problem Characteristics                    ( Presolved)
-----------------------
Objective goal:  Minimize
Number of variables:                          72 (        64)
    bounded below only:                        4 (         4)
    bounded above only:                        0 (         0)
    bounded below and above:                  30 (        30)
    fixed:                                     0 (         0)
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 66
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2126


    free:                                     38 (        30)
Number of constraints:                        72 (        61)
    linear equalities:                        32 (        24)
    nonlinear equalities:                     20 (        20)
    linear one-sided inequalities:             4 (         1)
    nonlinear one-sided inequalities:         16 (        16)
    linear two-sided inequalities:             0 (         0)
    nonlinear two-sided inequalities:          0 (         0)
Number of nonzeros in Jacobian:              268 (       250)
Number of nonzeros in Hessian:                82 (        82)

  Iter      Objective      FeasError   OptError    ||Step||    CGits 
--------  --------------  ----------  ----------  ----------  -------
       0    4.949937e+06   1.150e+00
      10   -4.904951e+01   1.803e-07   4.811e-07   3.417e+00        0

EXIT: Locally optimal solution found.

Final Statistics
----------------
Final objective value               =  -4.90495132909855e+01
Final feasibility error (abs / rel) =   1.80e-07 / 1.57e-07
Final optimality error  (abs / rel) =   4.81e-07 / 4.81e-09
# of iterations                     =         10 
# of CG iterations                  =          0 
# of function evaluations           =         12
# of gradient evaluations           =         12
# of Hessian evaluations            =         10
Total program time (secs)           =       0.00337 (     0.003 CPU time)
Time spent in evaluations (secs)    =       0.00068

===============================================================================

Solve finished: status = optimal

---- EQU c_LineIrij  Real current flowing from bus i into bus j along line c

                LOWER          LEVEL          UPPER         MARGINAL

7  .13.1          .              .              .           320.1944      
13 .18.1          .              .              .           320.6311      
13 .54.1          .              .              .           320.6311      
149.7 .1          .              .              .           319.5879      
54 .57.1          .              .              .           320.8019      
54 .56.1          .              .              .           320.8019      

---- EQU c_LineIrji  Real  current flowing from bus j into bus i along line c

                LOWER          LEVEL          UPPER         MARGINAL

7  .13.1          .              .              .           320.6311      
13 .18.1          .              .              .           320.8200      
13 .54.1          .              .              .           320.8019      
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 67
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2126


     EQU c_LineIrji  Real  current flowing from bus j into bus i along line c

                LOWER          LEVEL          UPPER         MARGINAL

149.7 .1          .              .              .           320.1944      
54 .57.1          .              .              .           320.9886      
54 .56.1          .              .              .           320.8019      

---- EQU c_LineIqij  Reactive current  flowing from bus i into bus j along line c

                LOWER          LEVEL          UPPER         MARGINAL

7  .13.1          .              .              .            -1.2385      
13 .18.1          .              .              .            -2.1225      
13 .54.1          .              .              .            -2.1225      
149.7 .1          .              .              .       -2.752101E-8      
54 .57.1          .              .              .            -2.4830      
54 .56.1          .              .              .            -2.4830      

---- EQU c_LineIqji  Reactive current flowing from bus j into bus i along line c

                LOWER          LEVEL          UPPER         MARGINAL

7  .13.1          .              .              .            -2.1225      
13 .18.1          .              .              .            -2.9300      
13 .54.1          .              .              .            -2.4830      
149.7 .1          .              .              .            -1.2385      
54 .57.1          .              .              .            -2.8691      
54 .56.1          .              .              .            -2.4830      

---- EQU c_BalanceP_nosolar  Balance of real power for bus without solar

           LOWER          LEVEL          UPPER         MARGINAL

7           0.0003         0.0003         0.0003       320.7946      
18           .       -4.957439E-8          .           322.3732      
149          .              .              .           319.5879      
54           .              .              .           322.0078      
56           .              .              .           322.0078      

---- EQU c_BalanceP_solar  Balance of real power for bus with solar

          LOWER          LEVEL          UPPER         MARGINAL

13          .              .              .           321.6605      
57          .       -9.666237E-8          .           322.3878      
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 68
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2126


---- EQU c_BalanceQ_nosolar  Balance of reactive power for bus without solar

           LOWER          LEVEL          UPPER         MARGINAL

7           0.0005         0.0005         0.0005         0.0049      
18          0.0174         0.0174         0.0174         0.1576      
149          .              .              .       1.3776727E-8      
54           .              .              .             0.0004      
56           .              .              .             0.0004      

---- EQU c_BalanceQ_solar  Balance of reactive power for bus with solar

          LOWER          LEVEL          UPPER         MARGINAL

13          .              .              .       -8.625927E-9      
57         0.0160         0.0160         0.0160   -6.203548E-9      

---- EQU c_Lossijc  Loss on line c connecting bus i and bus j

                LOWER          LEVEL          UPPER         MARGINAL

7  .13.1          .              .              .       -2.38077E-17      
13 .18.1          .       -8.072107E-8          .       4.112221E-24      
13 .54.1          .       -3.103851E-8          .       -4.10101E-18      
149.7 .1          .              .              .       -4.65203E-17      
54 .57.1          .       -3.391244E-8          .       -4.82541E-18      
54 .56.1          .              .              .       7.201253E-25      

---- EQU c_Lossi  Loss on lines connected with bus i

           LOWER          LEVEL          UPPER         MARGINAL

7            .              .              .             EPS         
13           .              .              .             EPS         
18           .              .              .             EPS         
149          .              .              .             EPS         
54           .              .              .             EPS         
57           .              .              .             EPS         
56           .              .              .             EPS         

---- EQU v_generator_hardupl  bus voltage constraints upper bound

           LOWER          LEVEL          UPPER         MARGINAL

7          -INF            0.9981         1.1500   -2.079205E-5      
13         -INF            0.9968         1.1500   -2.104739E-5      
18         -INF            0.9952         1.1500   -2.086260E-5      
149        -INF            1.0000         1.1500   -2.049378E-5      
54         -INF            0.9963         1.1500   -2.115622E-5      
57         -INF            0.9957         1.1500   -2.124010E-5      
56         -INF            0.9963         1.1500   -2.115622E-5      
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 69
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2126


---- EQU v_generator_harddownl  bus voltage constraints lower bound

           LOWER          LEVEL          UPPER         MARGINAL

7           0.8800         0.9981        +INF      2.5491643E-5      
13          0.8800         0.9968        +INF      2.4979940E-5      
18          0.8800         0.9952        +INF      2.5388574E-5      
149         0.8800         1.0000        +INF      2.6247744E-5      
54          0.8800         0.9963        +INF      2.4971438E-5      
57          0.8800         0.9957        +INF      2.4872197E-5      
56          0.8800         0.9963        +INF      2.4971438E-5      

---- EQU p_generator_add  enforces generator participation factor in adjustment from schedule

         LOWER          LEVEL          UPPER         MARGINAL

1         0.1600         0.1600         0.1600         EPS         

---- EQU c_BalanceP_control_solar  balance of real power for controllable solar

                NONE


---- EQU c_switchedshuntB_Def  defines total susceptance from switched shunts at bus i

                NONE


---- EQU c_shuntSwitchingDef1  defines number of steps switched - side 1

                NONE


---- EQU c_shuntSwitchingDef2  defines number of steps switched - side 2

                NONE


                           LOWER          LEVEL          UPPER         MARGINAL

---- EQU c_totalSh~          .            13.8080        +INF            EPS         

  c_totalShuntSwitchingDef  defines total number of steps switched

---- EQU c_shuntSwitchingPenaltyDef1  defines local shunt switching penalty - segment 1

                NONE

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 70
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2126


                           LOWER          LEVEL          UPPER         MARGINAL

---- EQU c_shuntTo~          .       7.1172888E-7        +INF            EPS         
---- EQU c_shuntSw~          .       7.1187016E-7        +INF            0.6499      
---- EQU c_previou~          .            13.8080        +INF            EPS         

  c_shuntTotalSwitchingPenalty  defines penalty incurred by total shunt switching
  c_shuntSwitchingTotalPenaltyDef   defines total penalty incurrent by shunt switching
  c_previous_solution_penalty_def  defines previous solution deviation penalty

---- EQU v_generator_addup  generator voltage constraints added selectively

           LOWER          LEVEL          UPPER         MARGINAL

149        -INF            1.0000         1.0000   -328317.9332      

---- EQU v_generator_addlow  generator voltage constraints added

           LOWER          LEVEL          UPPER         MARGINAL

149         1.0000         1.0000        +INF       328317.4703      

                           LOWER          LEVEL          UPPER         MARGINAL

---- EQU c_obj        -799997.9400   -799997.9400   -799997.9400         1.0000      

  c_obj  Objective function

---- VAR V_P  Real power generation of generator

         LOWER          LEVEL          UPPER         MARGINAL

1         0.1600         0.1600        20.0886   4999680.4121      

---- VAR V_Q  Reactive power generation of generator

         LOWER          LEVEL          UPPER         MARGINAL

1       -60.0000        -0.0002        60.0000   -1.377673E-8      

---- VAR P_S  real power generation of solar bus

          LOWER          LEVEL          UPPER         MARGINAL

7          0.0100         0.0100         0.1000       208.5000      
13         0.0060         0.0195         0.0600         0.0059      
18         0.0040         0.0040         0.0200       180.0003      
57         0.0040         0.0112         0.0500         0.0057      
56         0.0080         0.0080         0.0400       260.5001      
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 71
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2126


---- VAR Q_S  reactive power generation of solar bus

          LOWER          LEVEL          UPPER         MARGINAL

13      -300.0000         0.0194       300.0000   8.6259331E-9      
57      -300.0000         0.0162       300.0000   6.2035018E-9      

---- VAR V_real  Real part of bus voltage

           LOWER          LEVEL          UPPER         MARGINAL

7          -1.0500         0.9981         1.0500   -6.273029E-5      
13         -1.0500         0.9968         1.0500         EPS         
18         -1.0500         0.9952         1.0500        -0.0342      
149        -1.0500         1.0000         1.0500   -8.798987E-5      
54         -1.0500         0.9963         1.0500   -6.772983E-5      
57         -1.0500         0.9957         1.0500         0.0117      
56         -1.0500         0.9963         1.0500   -6.772983E-5      

---- VAR V_imag  Imaginary part of bus voltage

          LOWER          LEVEL          UPPER         MARGINAL

7         -1.0500        -0.0038         1.0500         EPS         
13        -1.0500        -0.0066         1.0500        -0.0002      
18        -1.0500        -0.0086         1.0500         0.0002      
54        -1.0500        -0.0077         1.0500         EPS         
57        -1.0500        -0.0089         1.0500        -0.0002      
56        -1.0500        -0.0077         1.0500         EPS         

---- VAR V_LineIr  Real current flowing from bus i towards bus j on line c

                 LOWER          LEVEL          UPPER         MARGINAL

7  .13 .1        -INF            0.1597        +INF            EPS         
7  .149.1        -INF           -0.1600        +INF            EPS         
13 .7  .1        -INF           -0.1597        +INF            EPS         
13 .18 .1        -INF            0.0798        +INF            EPS         
13 .54 .1        -INF            0.0994        +INF            EPS         
18 .13 .1        -INF           -0.0798        +INF            EPS         
149.7  .1        -INF            0.1600        +INF            EPS         
54 .13 .1        -INF           -0.0994        +INF            EPS         
54 .57 .1        -INF            0.0994        +INF            EPS         
54 .56 .1        -INF      1.4579298E-9        +INF            EPS         
57 .54 .1        -INF           -0.0994        +INF            EPS         
56 .54 .1        -INF      -2.09980E-14        +INF            EPS         
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 72
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2126


---- VAR V_LineIq  Reactive current flowing from bus i towards bus j on line c

                 LOWER          LEVEL          UPPER         MARGINAL

7  .13 .1        -INF            0.0007        +INF            EPS         
7  .149.1        -INF           -0.0002        +INF            EPS         
13 .7  .1        -INF           -0.0007        +INF            EPS         
13 .18 .1        -INF           -0.0182        +INF            EPS         
13 .54 .1        -INF           -0.0007        +INF            EPS         
18 .13 .1        -INF            0.0182        +INF            EPS         
149.7  .1        -INF            0.0002        +INF            EPS         
54 .13 .1        -INF            0.0007        +INF            EPS         
54 .57 .1        -INF           -0.0007        +INF            EPS         
54 .56 .1        -INF      1.8842531E-7        +INF            EPS         
57 .54 .1        -INF            0.0007        +INF            EPS         
56 .54 .1        -INF      5.250778E-15        +INF            EPS         

---- VAR V_Lossijc  Loss on line c connecting bus i and bus j

                LOWER          LEVEL          UPPER         MARGINAL

7  .13.1        -INF            0.0002        +INF            EPS         
13 .18.1        -INF      9.2279435E-5        +INF            EPS         
13 .54.1        -INF      5.3315443E-5        +INF            EPS         
149.7 .1        -INF            0.0003        +INF            EPS         
54 .57.1        -INF      5.8252058E-5        +INF            EPS         
54 .56.1        -INF      2.982523E-16        +INF            EPS         

---- VAR V_Lossi  Loss on lines connecting with bus i

           LOWER          LEVEL          UPPER         MARGINAL

7          -INF            0.0002        +INF            EPS         
13         -INF            0.0001        +INF            EPS         
18         -INF             .            +INF            EPS         
149        -INF            0.0003        +INF            EPS         
54         -INF      5.8252058E-5        +INF            EPS         
57         -INF             .            +INF            EPS         
56         -INF             .            +INF            EPS         

                           LOWER          LEVEL          UPPER         MARGINAL

---- VAR V_totalSh~          .            13.8080        +INF            EPS         
---- VAR V_shuntTo~          .       7.1172888E-7        +INF            0.6499      
---- VAR V_shuntSw~          .       1.4235990E-6        +INF            0.3501      

  V_totalShuntSwitching  total number of steps switched
  V_shuntTotalSwitchingPenalty  penalty incurred by total shunt switching
  V_shuntSwitchingTotalPenalty  total penalty incurrent by shunt switching
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 73
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2126


---- VAR V_dem_Load  demand load level

            LOWER          LEVEL          UPPER         MARGINAL

18.2          .             0.0795         0.0796        -1.4745      
18.3          .       4.3484489E-8         0.0796        11.0360      
18.4          .       1.2079238E-8         0.0796        20.3261      
18.5          .              .             0.0796        41.0731      
57.2          .             0.1102         0.1182   1.9542451E-5      
57.3          .       4.2745724E-8         0.1182        10.6831      
57.4          .       2.1830983E-8         0.1182        19.5363      
57.5          .              .             0.1182        40.4642      

                           LOWER          LEVEL          UPPER         MARGINAL

---- VAR V_previou~          .            13.8080        +INF            EPS         
---- VAR V_objcost         -INF          -49.0495        +INF             .          
---- VAR V_P_syste~        -INF      9.489631E-14        +INF            EPS         

  V_previous_solution_penalty  total penalty on deviation to previous solution
  V_objcost  Total cost of objective function
  V_P_system_deviation  system total adjustment from real generation schedule


**** REPORT SUMMARY :        0     NONOPT
                             0 INFEASIBLE
                             0  UNBOUNDED
                             0     ERRORS
                            43  PROJECTED
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 74
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2126


**** SOLVER STATUS FILE LISTED BELOW
=C
=CKNITRO           24.9.1 r63795 Released Aug 30, 2017 LEG x86 64bit/Linux      
=C
=0KNITRO           24.9.1 r63795 Released Aug 30, 2017 LEG x86 64bit/Linux      
=1
=2
=1
=C*** Error Cannot open parameter file "/home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/knitro.opt"
=C*** Error Error code = 2; No such file or directory
=2
=CArtelys Knitro Optimizer 10.3.0
=9?
?C
?C=======================================
?C          Commercial License
?C         Artelys Knitro 10.3.0
?C=======================================
?C
?CKnitro presolve eliminated 8 variables 
?Cand 11 constraints.
?C
?Cdatacheck:               0
?Chessian_no_f:            1
?Cmaxtime_real:            60
?Cnewpoint:                3
?Cpar_concurrent_evals:    0
?CKnitro changing algorithm from AUTO to 1.
?CKnitro changing bar_initpt from AUTO to 3.
?CKnitro changing bar_murule from AUTO to 4.
?CKnitro changing bar_penaltycons from AUTO to 1.
?CKnitro changing bar_penaltyrule from AUTO to 2.
?CKnitro changing bar_switchrule from AUTO to 2.
?CKnitro changing linesearch from AUTO to 1.
?CKnitro changing linsolver from AUTO to 2.
?CKnitro shifted start point to satisfy presolved bounds (18 variables).
?CKnitro fixing 3 variables eliminated from the presolve.
?CKnitro reinitializing 1 variable eliminated from the presolve.
?C
?CProblem Characteristics                    ( Presolved)
?C-----------------------
?CObjective goal:  Minimize
?CNumber of variables:                          72 (        64)
?C    bounded below only:                        4 (         4)
?C    bounded above only:                        0 (         0)
?C    bounded below and above:                  30 (        30)
?C    fixed:                                     0 (         0)
?C    free:                                     38 (        30)
?CNumber of constraints:                        72 (        61)
?C    linear equalities:                        32 (        24)
?C    nonlinear equalities:                     20 (        20)
?C    linear one-sided inequalities:             4 (         1)
?C    nonlinear one-sided inequalities:         16 (        16)
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 75
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2126


?C    linear two-sided inequalities:             0 (         0)
?C    nonlinear two-sided inequalities:          0 (         0)
?CNumber of nonzeros in Jacobian:              268 (       250)
?CNumber of nonzeros in Hessian:                82 (        82)
?C
?C  Iter      Objective      FeasError   OptError    ||Step||    CGits 
?C--------  --------------  ----------  ----------  ----------  -------
?C       0    4.949937e+06   1.150e+00
?C      10   -4.904951e+01   1.803e-07   4.811e-07   3.417e+00        0
?C
?CEXIT: Locally optimal solution found.
?C
?CFinal Statistics
?C----------------
?CFinal objective value               =  -4.90495132909855e+01
?CFinal feasibility error (abs / rel) =   1.80e-07 / 1.57e-07
?CFinal optimality error  (abs / rel) =   4.81e-07 / 4.81e-09
?C# of iterations                     =         10 
?C# of CG iterations                  =          0 
?C# of function evaluations           =         12
?C# of gradient evaluations           =         12
?C# of Hessian evaluations            =         10
?CTotal program time (secs)           =       0.00337 (     0.003 CPU time)
?CTime spent in evaluations (secs)    =       0.00068
?C
?C===============================================================================
?C
?9=
=CSolve finished: status = optimal
**** SOLVER STATUS FILE LISTED ABOVE
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 76
display_start
E x e c u t i o n


----   2228 PARAMETER TotalLoss            =  7.182996E-4   Total Loss of all the lines
            PARAMETER infeas               =        0.000  Number of infeasibilities from model solve

----   2253 PARAMETER Vm  bus voltage magnitude

7   0.998,    13  0.997,    18  0.995,    149 1.000,    54  0.996,    57  0.996,    56  0.996


----   2292 PARAMETER Pmax  gen maximum real power output

1 20.089


----   2292 PARAMETER Pmin  gen minimum real power output

1 0.002


----   2292 PARAMETER ratio  transformer tap ratio

                  1

7  .13        1.000
7  .149       1.000
13 .7         1.000
13 .18        1.000
13 .54        1.000
18 .13        1.000
149.7         1.000
54 .13        1.000
54 .57        1.000
54 .56        1.000
57 .54        1.000
56 .54        1.000


----   2292 PARAMETER switchedShuntB_init  initial value of switched shunt susceptance

                      ( ALL       0.000 )


----   2292 VARIABLE V_dem_Load.L  demand load level

              2           3           4

18        0.080 4.348449E-8 1.207924E-8
57        0.110 4.274572E-8 2.183098E-8


----   2292 VARIABLE V_switchedshuntB.L  total susceptance from switched shunts connected to bus i

                      ( ALL       0.000 )

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 77
display_start
E x e c u t i o n


----   2292 VARIABLE V_P.L  Real power generation of generator

1 0.160


----   2292 VARIABLE V_P.Up (+INF) Real power generation of generator

1 20.089


----   2292 VARIABLE V_P.Lo (-INF) Real power generation of generator

1 0.160


----   2292 VARIABLE V_Q.L  Reactive power generation of generator

1 -2.07665E-4


----   2292 VARIABLE V_Q.Up (+INF) Reactive power generation of generator

1 60.000


----   2292 VARIABLE V_Q.Lo (-INF) Reactive power generation of generator

1 -60.000


----   2292 PARAMETER Qmax  gen maximum reactive power output

1 60.000


----   2292 PARAMETER Qmin  gen minimum reactive power output

1 -60.000


**** REPORT FILE SUMMARY

report_file /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/report.txt


EXECUTION TIME       =        0.002 SECONDS      3 MB  24.9.1 r63795 LEX-LEG
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     02/13/18 15:15:05 Page 78
display_start
E x e c u t i o n


USER: GAMS Development Corporation, USA              G871201/0000CA-ANY
      Free Demo, +1 202-342-0180, support@gams.com, www.gams.com DC0000


**** FILE SUMMARY

Input      /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/iv_acopf_reformulation_lop_adj.gms
Output     /home/yingying/git/volttron/TransactiveEnergy-ThreeAgg/CoordinatorAgent/coordinator/_gams_py_gjo0.lst
