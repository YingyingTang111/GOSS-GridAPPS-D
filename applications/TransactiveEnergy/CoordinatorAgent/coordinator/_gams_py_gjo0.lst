GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      10/30/17 23:29:47 Page 1
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


   2  *this file is modified by Xinda Ke from Wisconsin university IV_acopf.gms
   3  *updated by xinda ke in 8/1/2016
   4  *_______________________________________________________________________________
   5  * Filename: iv_acopf.gms
   6  * Description: AC optimal power flow model, rectangular current-voltage formulation
   7  *
   8  * Usage: gams iv_acopf.gms --case=/path/case.gdx
   9  *
  10  * Options:
  11  * --timeperiod: Select time period to solve. Default=1
  12  * --obj: Objective function, piecewise linear or quadratic. Default="quad"
  13  * --obj: Objective function, the default is to minimize for voltage deviation Default="v_dev"
  14  * --linelimits: Type of line limit data to use. Default="given"
  15  * --genPmin: Data for Generator lower limit. Default="given"
  16  * --allon: Option to turn on all gens or lines during solve. Default=none
  17  * --savesol: Turn on save solution option(1). Default=0
  18  * --verbose: Supresses printout(0). Default=1
  19  *_______________________________________________________________________________
  20   
  21   
  22   
  23   
  24   
  25   
  26   
  27  *===== SECTION: USER PARAMETERS
  28  *$include user_params.gms
  29   
  30  * switched shunt user parameters
  31  * later these will be passed in from Python
  37   
  38  * other penalty parameters
  46   
  47  * load bus voltage goal point
  48  * TODO: replace this with a gdx file containing individual goal
  49  * values for the buses
  51   
  53   
  55   
  56  * disable solar ?
  58   
  60   
  61  * disable demand response?
  63  * disable controllable solar q limit
  65  * disable solar reactive power?
  67   
  68  * disable switched shunts?
  70   
  71  * start optimization algorithm at previous solution?
  73   
  74  * initial starting point
  76   
  77  * quadratic penalty on distance to previous solution
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      10/30/17 23:29:47 Page 2
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


  79   
  80  * use constraints in addition to variable bounds
  82   
  83  * append to report file
  85   
  86  * use pv/pq smoothing approach
  88   
  89  * pv/pq smoothing parameter
  91   
  92  * report file
  94   
  95  * write excel reports
  97   
  98  * use soft constraints for power balance
 100   
 101  * penalty parameter for soft power balance constraints
 103   
 104  *===== SECTION: DEVELOPER PARAMETERS
 105  *$include developer_params.gms
 106   
 107  * System dependence
 110   
 111  *define the path and name of case to be used
 113  *$if not set case $set  case "Dukeare342.gdx"
 114   
 115  * Printout options
 117  * Define filepath, name and extension.
 119  * Define input case
 120   
 123   
 124  *$set obj "pwl"
 125   
 126  * Default: timeperiod = 1
 128  * Default: allon=0
 130  * Default: Quadratic objective function
 132  * Default: Ignore D-curve constraints
 133  *$if not set qlim $set qlim 0
 134  * Default: elastic demand bidding does not apply here
 136  * Default: Use provided line limits (as opposed to uwcalc)
 138  * Default: Use provided generator lower limit
 140  * Default: Save solution option turned off
 142   
 144   
 145  *===== SECTION: EXTRACT DATA
 146  *$batinclude "%filepath%excel2gdx4ACOPF.gms"  excelpath solar_rp demand_P demand_Q gen_status geni_psch
BATINCLUDE /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/extract_data_SunLamp_newformulation_cle.gms
 148  *Created by xinda ke in 7/20/2016
 149  * this code is to extract data from gdx
 150  *updated by xinda ke in 7/24/2016
 151   
 152  *==== SECTION: Data (pre) declaration
 153  sets
 154  * New sets
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      10/30/17 23:29:47 Page 3
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 155      conj /real,imag/
 156      costcoefset "Placeholder set for quadratic function coefficients (0,1,2)" /0*2/
 157      costptset "Placeholder set for pwl function pieces"  /1*40/
 158   
 159  * Timeperiod
 160      t /1/,
 161  * Dataset sets
 162      bus, gen, circuit, nongen, solarbus,
 163      interface, interfacemap (interface,bus,bus),
 164      demandbid, demandbidmap,
 165      fuel_t, fuel_s, prime_mover,
 166      bus_t, bus_s,
 167      gen_t, gen_s,
 168      branch_t, branch_s,
 169   
 170      interface_t,
 171      line(bus,bus,circuit),
 172      transformer(bus,bus,circuit),
 173      monitored_lines(bus,bus,circuit)
 174  ;
 175  set demanStep  "demandresponse-steps"  /1 * 5/;
 176  set demanRang  "demandresponse-steps"  /1 * 4/;
 177  alias(bus,i,j);
 178  alias(circuit,c);
 179  alias(gen,gen1);
 180  alias(bus_s,bus_s_0,bus_s_1,bus_s_2);
 181  parameters
 182      version, baseMVA, total_cost,Nb,
 183  * Domain info not stated because of how we iterate through data
 184       businfo(*,*,*),
 185       geninfo(*,*,*),
 186       fuelinfo(*,*),
 187       branchinfo(*,*,*,*,*),
 188       interfaceinfo(*,*,*)
 189  ;
 190  *-- Specially handled data (option specific)
 192  sets
 193    demandbid_t(*) / /
 194    demandbid_s(*) / /
 195    demandbid(*) / /
 196    demandbidmap (*,*) / /
 197  ;
 198   
 199  parameters
 200    demandbidinfo(*,*,*,*) / /
 201  ;
 203  *==== SECTION: Data read-in from input file
GDXIN   /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/7bus.gdx
--- LOAD  version = 1:version
--- LOAD  baseMVA = 3:baseMVA
--- LOAD  total_cost = 2:total_cost
--- LOAD  bus = 6:bus
--- LOAD  gen = 7:gen
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      10/30/17 23:29:47 Page 4
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


--- LOAD  circuit = 8:circuit
--- LOAD  bus_s = 17:bus_s
--- LOAD  line = 9:line
--- LOAD  transformer = 10:transformer
--- LOAD  bus_t = 16:bus_t
--- LOAD  gen_t = 18:gen_t
--- LOAD  branch_t = 20:branch_t
--- LOAD  branch_s = 21:branch_s
 208  *$LOAD fuel_t, fuel_s, prime_mover
--- LOAD  businfo = 28:businfo
--- LOAD  geninfo = 29:geninfo
--- LOAD  branchinfo = 30:branchinfo
--- LOAD  fuelinfo = 33:fuelinfo
--- LOAD  interface = 14:interface
--- LOAD  interfacemap = 15:interfacemap
--- LOAD  interfaceinfo = 32:interfaceinfo
 211  *$load bus_s, gen_s,
 212  *susceptance of switched shunt
 214   
 215   
 216  set pq  "real and reactive"  /1 * 2/;
 217  *$call 'GDXXRW input=solarbus.xlsx output=solarbus.gdx set=solarbus rng=Sheet1!A1:CX1 Cdim=1';
 218   
 219   
GDXIN   /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/solarbus2.gdx
--- LOAD  solarbus = 1:solarbus
 223   
 224  * Option to use elastic demand bidding turned on
 227  *==== SECTION: Validity of options
 228  * linelimits, case insensitive
 229   
 230   
 231   
 232   
 233  * allon, case insensitive
 234  * this will allow u to turn on certain bus or circuit selectively
 237   
 238  *==== SECTION: Data Declaration (extracted/manipulated from datafile)
 239  *-- All OPF models
 240  parameters
 241    type(bus)         "bus type (probably irrelevant, but gives reference bus[es])"
 242    pf(bus)           "bus demand power factor"
 243    Pd(bus)           "bus real power demand"
 244    Pd_respon_p_up(bus)   "the upper cap of real power of demand response"
 245    Pd_respon_p_down(bus)   "the downer cap of real power of demand response"
 246    Pd_respon_q_up(bus)   "the upper cap of reactive power of demand response"
 247    Pd_respon_q_down(bus)   "the downer cap of reactive power of demand response"
 248    Pd_respon_location(bus) "the location of demandresponse bus, equals 1 if that bus has this solar"
 249    gentype(gen)      "generator if equals 1 or slack bus equals 0"
 250    Pg(gen)           "gen real power output"
 251    PgSch(gen)        "gen scheduled power output"
 252    Pmax(gen)         "gen maximum real power output"
 253    Pmin(gen)         "gen minimum real power output"
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      10/30/17 23:29:47 Page 5
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 254    Va(bus)           "bus voltage angle"
 255    Vm(bus)           "bus voltage magnitude"
 256    MaxVm(bus)        "maximum bus voltage magnitude"
 257    MinVm(bus)        "minimum bus voltage magnitude"
 258    Gs(bus)           "bus shunt conductance"
 259    solar_r(bus)  "solar real power"
 260    dis_gen_par1(bus)      "distributed generator parameter 1"
 261    dis_gen_par2(bus)      "distributed generator parameter 1"
 262    dis_gen_par3(bus)      "distributed generator parameter 1"
 263    atBus(gen,bus)    "Location of generator"
 264    status(gen)       "generator status"
 265    status2(gen,bus)   "Online generator status marked for all bus"
 266    Vsch(bus)          "generator voltage schedule"
 267    r(i,j,c)          "line resistance"
 268    x(i,j,c)          "line reactance"
 269    B(i,j,c)          "line susceptance"
 270    ratio(i,j,c)      "transformer tap ratio",
 271    angle(i,j,c)      "transformer tap angle",
 272    rateA(i,j,c)      "line power limits (MW)",
 273    currentrate(i,j,c)  "line current limits",
 274    branchstatus(i,j,c) "line status",
 275    interfaceLimit(interface) "Limit on power across each interface"
 276    solarlocation(solarbus,bus)  "the location of solar bus"
 277    contro_solar_location(bus) "the location of controllable solar bus, equals 1 if that bus has this solar"
 278    csolar_Q_limit_up(bus) "the location of controllable solar bus, equals 1 if that bus has this solar"
 279    csolar_Q_limit_down(bus) "the location of controllable solar bus, equals 1 if that bus has this solar"
 280    contro_solar_pout(bus)   "the real power output of curtailable solar bus"
 281    Qd(bus)           "bus reactive power demand"
 282    Qg(gen)           "gen reactive power output"
 283    Qmax(gen)         "gen maximum reactive power output"
 284    Qmin(gen)         "gen minimum reactive power output"
 285    Bs(bus)           "bus shunt susceptance"
 286    yb(i,j,conj)      "Bus admittance matrix, Ybus"
 287    g(i,j,c)          "line conductance"
 288    bc(i,j,c)         "line charging susceptance"
 289    Bswitched(bus,bus_s)     "susceptance of switched shunts",
 290    numBswitched(bus,bus_s)  "number of each type of switched shunt elements at each bus"
 291  *  switchedShuntB_init(bus,bus_s) "initial value of switched shunt susceptance"
 292    switchedShuntB_init(bus) "initial value of switched shunt susceptance"
 293    numShuntStepsOn_init(bus,bus_s) "initial number of switched shunt steps on"
 294    demLoad(demanStep) "demandresponse load"
 295    demPrice(demanStep) "demandresponse price"
 296    demSlope(demanStep) "slope"
 297    demLocation(bus)      "location of demand response"
 298  ;
 299   
 300   
 301   
 302   
 303  *r(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'r','given');
 304  *x(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'x','given');
 305  *branchstatus(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'branchstatus','%timeperiod%');
 306   
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      10/30/17 23:29:47 Page 6
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


GDXIN   /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/geni_st.gdx
--- LOAD  status = 1:status
 310   
GDXIN   /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/demand_response.gdx
--- LOAD  Pd_respon_location = 5:Pd_respon_location
--- LOAD  Pd_respon_p_down = 2:Pd_respon_p_down
--- LOAD  Pd_respon_q_down = 4:Pd_respon_q_down
--- LOAD  Pd_respon_p_up = 1:Pd_respon_p_up
--- LOAD  Pd_respon_q_up = 3:Pd_respon_q_up
 314   
GDXIN   /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/demandresponseload.gdx
--- LOAD  demLoad = 1:demLoad
 318   
GDXIN   /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/demandresponseprice.gdx
--- LOAD  demPrice = 1:demPrice
 322  demLocation('18')=1;
 323   
 324  demLoad(demanStep)=demLoad(demanStep)/baseMVA;
 325  demSlope(demanStep)$(ord(demanStep) > 1)= -(demPrice(demanStep)-demPrice(demanStep-1) ) /(demLoad(demanStep)-demLoad(demanStep-1) )
 326   
 327   
 328   
 329  display demLoad,demPrice,demLocation,demSlope;
 330  dis_gen_par1('13')=0.25;
 331  dis_gen_par1('57')=0.31;
 332  dis_gen_par2('13')=15.6;
 333  dis_gen_par2('57')=29.7;
 334  dis_gen_par3('13')=330;
 335  dis_gen_par3('57')=300;
 336   
 338  Pd_respon_p_down(bus)= Pd_respon_p_down(bus)/baseMVA;
 339  Pd_respon_q_down(bus)$Pd_respon_q_down(bus)= Pd_respon_q_down(bus)/Pd_respon_p_down(bus)/baseMVA;
 340  *Pd_respon_q_down(bus)= Pd_respon_q_down(bus)/baseMVA;
 341  Pd_respon_p_up(bus)= Pd_respon_p_up(bus)/baseMVA;
 342  *Pd_respon_q_up(bus)=Pd_respon_q_up(bus)/baseMVA;
 343  Pd_respon_q_up(bus)$Pd_respon_q_up(bus)= Pd_respon_q_up(bus)/Pd_respon_p_up(bus)/baseMVA;
 345   
 346   
 347   
 349  contro_solar_pout(bus)=0;
 350  contro_solar_location(bus)=0;
 352   
 354  csolar_Q_limit_up(bus)=0;
 355  csolar_Q_limit_down(bus)=0;
 356  contro_solar_location(bus)=0;
 358  *to per unit
 359  csolar_Q_limit_up(bus) =csolar_Q_limit_up(bus)/baseMVA;
 360  csolar_Q_limit_down(bus) =csolar_Q_limit_down(bus)/baseMVA;
 361   
 362  * trying to replace the input file in the gdx above using wisconsin gdx
 363  *solar section
 364  *$call 'GDXXRW input=solar_s.xlsx output=solar_s.gdx par=solar_s rng=Sheet1!B1:CX2 Cdim=1';
 365  *$call 'GDXXRW input=solarindex.xlsx output=solarlocation.gdx par=solarlocation rng=Sheet1!B1:CX3 Cdim=2 ';
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      10/30/17 23:29:47 Page 7
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


GDXIN   /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/solarlocation.gdx
--- LOAD  solarlocation = 1:solarlocation
 369  * Bus type
 370  type(bus) = businfo(bus,'type','given');
 371  atBus(gen,bus)$geninfo(gen,'atBus',bus) = 1;
 372  Pmax(gen) = geninfo(gen,'Pmax','given')/baseMVA;
 373  Pmin(gen) = geninfo(gen,'Pmin','given')/baseMVA;
 374  Qmax(gen) = geninfo(gen,'Qmax','given')/baseMVA;
 375  Qmin(gen) = geninfo(gen,'Qmin','given')/baseMVA;
 376   
 377   
 378  *gentype  generator if equals 1 or slack bus equals 0
 379  gentype(gen)=1$(sum(bus$(atBus(gen,bus)), type(bus) eq 2));
 380  Vsch(bus)$(sum(gen,atBus(gen,bus)) > 0)=sum(gen$(atBus(gen,bus)), geninfo(gen,'Vg','given'))/ sum(gen, atBus(gen,bus));
 381  * Line resistance (r) and reactance (x)
 382  r(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'r','given');
 383  x(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'x','given');
 384  r(j,i,c)$r(i,j,c) = r(i,j,c);
 385  x(j,i,c)$x(i,j,c) = x(i,j,c);
 386  * line charging conductance
 387  bc(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'bc','given');
 388  bc(j,i,c)$(bc(i,j,c)) = bc(i,j,c);
 389  * transformer tap ratios and angles
 390  ratio(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'ratio','given');
 391  ratio(j,i,c)$(ratio(i,j,c)) =  1/ratio(i,j,c);
 392  * TODO is this right?
 393  * should we have 1/ratio and -angle? or
 394  * ratio and angle?
 395  * original was ratio and -angle, which makes no sense
 396  *CHECK the angle is all zero in 118 system, should be checked in other system
 397  angle(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'angle','given') * pi/180;
 398  * TODO is this right?
 399  angle(j,i,c)$(angle(i,j,c)) = -angle(i,j,c);
 400  *TODO the time step for branchstatus
 401  *time step has checked with Sidhart
 402  branchstatus(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'branchstatus','1');
 403  * Bus shunt conductance and susceptance
 404  * in the 118 system fixed shunt elements all got replaced by switched shunt elements
 405  Gs(bus) = businfo(bus,'Gs','given')/baseMVA;
 406  Bs(bus) = businfo(bus,'Bs','given')/baseMVA;
 407   
 408  * add the input replacement above
 409   
 410  status2(gen,bus) = 1$(atBus(gen,bus) and status(gen) eq 1 );
GDXIN   /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/UC_OPF_load_elwi_BV.gdx
--- LOAD  Pd = 1:Pd
 414   
 415  Pd(bus) =Pd(bus)/baseMVA;
 416   
 417   
 418  * Voltage angle
 419  Va(bus) = businfo(bus,'Va','1')*pi/180;
 420  *Va(bus) = 0;
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      10/30/17 23:29:47 Page 8
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 421  *Voltage magnitude information
 422  Vm(bus) = businfo(bus,'Vm','1');
 423  *Vm(bus) = 1;
 424  maxVm(bus) = businfo(bus,'maxVm','given');
 425  minVm(bus) = businfo(bus,'minVm','given');
 426   
 427  * Initial branch status (active/not connected)
 428   
 429  * Define original cost model in dataset
 430  * If linelimits=inf, no monitored lines
 432   
 433  * Limit on power across each interface
 434  *interfaceLimit(interface) = interfaceinfo(interface,'%timeperiod%','rateA')/baseMVA;
 435   
 436  * Line current
 437  *currentrate(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'currentrateA','%linelimits%');
 438  *currentrate(j,i,c)$(line(i,j,c)) = branchinfo(i,j,c,'currentrateA','%linelimits%');
 439   
 440  * Take down all lines to buses marked as "isolated"
 441  branchstatus(i,j,c)$(type(i) eq 4 or type(j) eq 4) = 0;
 442   
 443  * Line susceptance
 444  B(i,j,c)$line(i,j,c) = -x(i,j,c)/(sqr(r(i,j,c))+sqr(x(i,j,c)));
 445  B(j,i,c)$(b(i,j,c)) = b(i,j,c);
 446   
 447   
 448   
GDXIN   /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/geni_p.gdx
--- LOAD  PgSch = 1:PgSch
 452  PgSch(gen) =PgSch(gen)/baseMVA;
 453  *starting searching point of generator real power output, might need obtained from input data
 454  Pg(gen)=PgSch(gen);
 455  *generator scheduled volage output
 456   
 457   
 458  * Line limit (active power)
 459  *line limit is disabled to match Matpower
 460  *rateA(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'rateA','%linelimits%')/baseMVA;
 461  *rateA(j,i,c)$(line(i,j,c)) = branchinfo(i,j,c,'rateA','%linelimits%')/baseMVA;
 462   
 463   
 464   
GDXIN   /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/UC_OPF_load_elwi_Q.gdx
--- LOAD  Qd = 1:Qd
 468  Qd(bus) =Qd(bus)/baseMVA;
 469   
 470   
 471   
 472   
 473  *$GDXIN geni_q.gdx
 474  *$LOAD Qg
 475  *$GDXIN
 476  *Qg(gen) =Qg(gen)/baseMVA;
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                      10/30/17 23:29:47 Page 9
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 477  *Qg is zero from gdx.
 478  Qg(gen)=geninfo(gen,'Qg','1')/baseMVA;
 479   
 480  * Bus shunt conductance and susceptance
 481   
 482   
 483  * line conductance
 484  g(i,j,c)$line(i,j,c) =  r(i,j,c)/(sqr(r(i,j,c))+sqr(x(i,j,c)));
 485  g(j,i,c)$(g(i,j,c)) = g(i,j,c);
 486   
 487   
 488   
 489   
 490  * line charging conductance
 491  *bc(i,j,c)$line(i,j,c) = branchinfo(i,j,c,'bc','given');
 492   
 493   
 494  * number and susceptance of switched shunt element data
 495  * number of steps in each switched shunt
 496  numBswitched(bus,bus_s) =
 497    businfo(bus,'switchedelements',bus_s)
 498  *  $(
 499  *    businfo(bus,'SwSh_Stat','given') = 1 and
 500  *    businfo(bus,'MODSW','given') = 1 and
 501  *    businfo(bus,'SwSh_RMPCT','given') = 100)
 502      ;
 503  * step size in each switched shunt
 504  Bswitched(bus,bus_s)$numBswitched(bus,bus_s) =
 505    businfo(bus,'switchedBs',bus_s)/baseMVA;
 506  * switched shunt susceptance in a prior solution
 507  switchedShuntB_init(bus)$(sum(bus_s,numBswitched(bus,bus_s))) =
 508    businfo(bus,'SwSh_Stat','given')* businfo(bus,'BINIT','given')/baseMVA;
 509  *switchedShuntB_init('307723')=0;
 510  * not sure if there is any better way to set this
 511  * but we only need it for the first time step
 512  numShuntStepsOn_init(bus,bus_s)$numBswitched(bus,bus_s)
 513    = switchedshuntB_init(bus) * numBswitched(bus,bus_s)
 514    / sum(bus_s_1, numBswitched(bus,bus_s_1) * Bswitched(bus,bus_s_1));
 515   
 516  * ==== SECTION: Additional Model Options
 517  *-- Elastic demand bidding turned on/off
 519   
 520  *-- %allon% options
 522  *branchstatus(j,i,c)$(branchstatus(i,j,c)) =  branchstatus(i,j,c);
 523  * filepath is not coming in from batinclude from iv_acopf correctly
 524  * use setnames to get it
 525  * temp_solution.gdx not found. is that OK?
 527  * load prior sol switched shunt settings if this is not the first time step
 529   
 530  *===== SECTION: PARAMETERS FROM USER
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/params_from_user.gms
 532   
 533  * switched shunt penalty parameters
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 10
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 534  parameter
 535    shuntSwitchingPenalty1 /0.001/
 536    shuntSwitchingPenalty2 /1e6/
 537    shuntSwitchingTolerance /1e0/
 538    shuntSwitchingBudgetPenalty /1e6/
 539    shuntSwitchingBudget /5e0/;
 540   
 541  * other penalty parameters
 542  parameter
 543    load_bus_volt_pen_coeff_1 /1/
 544    load_bus_volt_pen_coeff_2 /0/
 545    demand_response_decrease_penalty /10/
 546    demand_response_increase_penalty /10/
 547    solar_curtail_penalty /50/
 548    generator_voltage_deviation_penalty /100000.0/
 549    previous_solution_penalty_2 /0/;
 550   
 551  * other parameters
 552  parameter
 553    previous_solution_as_start_point /0/
 554    load_bus_volt_dead_band /0.01/
 555    load_bus_voltage_goal /1.0/
 556    use_constrs /0/
 557    use_pv_pq_smoothing /0/
 558    pv_pq_smoothing_param /0.001/;
 559   
 560   
 561  *===== SECTION: MODEL PARAMETERS
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/model_params.gms
 563   
 564   
 565  * generator participation in system adjustment from real generation schedule
 566  parameter
 567    gen_participation_factor(gen);
 568   
 569  sets
 570      load(bus) "Load buses"
 571      isGen(bus) "Generator buses"
 572      activeGen(bus) "Active generator buses"
 573      isLine(i,j) "Active (i,j) line"
 574      isSolar(bus) "solar bus";
 575   
 576  * prior variable values
 577  * penalize the distance of the new solution to
 578  * these prior variables in order to promote
 579  * continuity
 580  parameter
 581      V_P_prior(gen)           "Real power generation of generator",
 582      V_Q_prior(gen)           "Reactive power generation of generator",
 583      P_S_prior(i)      "real power generation of solar bus"
 584      Q_S_prior(i)      "reactive power generation of solar bus"
 585      V_real_prior(i)          "Real part of bus voltage",
 586      V_imag_prior(i)          "Imaginary part of bus voltage",
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 11
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 587      Solar_p_curtail_prior(i)    "the amount of real power cutailed from controllable",
 588      De_response_Dec_P_prior(i)         "the decrease in demand response",
 589      De_response_Inc_P_prior(i)         "the increment in demand response"
 590      balance_real_bound
 591      balance_react_bound
 592  ;
 593   
 594  parameters
 595    saturaup(bus) "the saturation status of generator bus"
 596    saturalow(bus) "the saturation status of generator bus"
 597    genQtemp(gen)      "the reactive of generator ";
 598   
 599  scalar voltageran_low,voltageran_high,step_leng;
 600   
 601  * bus voltage target info
 602  set
 603      bus_penalize_volt_mag_target(bus) "yes if the voltage magnitude target penalty should be assessed for this bus"
 604  parameter
 605      volt_mag_target(bus) ideal voltage magnitude for each bus;
 606   
 607  * variable values, constraint violation, and objective. at start point
 608  parameter
 609  * control variables
 610      V_P_start(gen)
 611      V_Q_start(gen)
 612      P_S_start(i)
 613      Q_S_start(i)
 614      V_real_start(i)
 615      V_imag_start(i)
 616      Solar_p_curtail_start(i)
 617      De_response_Dec_P_start(i)
 618      De_response_Inc_P_start(i)
 619      V_shunt_start(bus,bus_s)
 620      V_P_system_deviation_start
 621      V_switchedshuntB_start(i)
 622  * current
 623      V_LineIr_start(i,j,c)
 624      V_LineIr_start(j,i,c)
 625      V_LineIq_start(i,j,c)
 626      V_LineIq_start(j,i,c)
 627  * losses
 628      V_Lossijc_start(i,j,c)
 629      V_Lossi_start(i)
 630  * penalties and objectives
 631      V_load_bus_volt_pen_dev_start
 632      V_load_bus_volt_pen_start
 633      V_shuntSwitching_start(i,bus_s)
 634      V_totalShuntSwitching_start
 635      V_shuntSwitchingPenalty_start(i,bus_s)
 636      V_shuntTotalSwitchingPenalty_start
 637      V_shuntSwitchingTotalPenalty_start
 638      V_previous_solution_penalty_start
 639      V_objcost_start
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 12
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 640  * variable bound violations
 641      gen_p_lo_viol_start(gen)
 642      gen_p_up_viol_start(gen)
 643      gen_q_lo_viol_start(gen)
 644      gen_q_up_viol_start(gen)
 645      solar_p_fx_viol_start(i)
 646      solar_q_up_viol_start(i)
 647      solar_q_lo_viol_start(i)
 648      solar_p_curtail_up_viol_start(bus)
 649      De_response_Inc_P_up_viol_start(bus)
 650      De_response_dec_P_lo_viol_start(bus)
 651      v_shunt_up_viol_start(bus,bus_s)
 652  * constraint violations
 653      balance_p_viol_start(i)
 654      balance_q_viol_start(i)
 655      p_generator_add_viol_start(gen)
 656      c_I_limit_viol_start(i,j,c)
 657      c_V_limit_lo_viol_start(i)
 658      c_V_limit_up_viol_start(i)
 659      v_generator_hardupl_viol_start(i)
 660      v_generator_harddownl_viol_start(i)
 661      v_under_q_up_slack_viol_start(gen)
 662      v_over_q_lo_slack_viol_start(gen)
 663  * summaries
 664      p_load_start
 665      p_gen_start
 666      p_shunt_start
 667      p_solar_start
 668      p_dr_start
 669      p_imbalance_start
 670      min_p_shortfall
 671      sum_loss_start
 672  *    v_load_bus_volt_pen_start
 673  *    v_total_shunt_switching_start
 674  *    v_shunt_switching_total_penalty_start
 675  *    v_previous_solution_penalty_start
 676  *    v_objcost_start
 677      max_gen_p_lo_viol_start
 678      max_gen_p_up_viol_start
 679      max_gen_q_lo_viol_start
 680      max_gen_q_up_viol_start
 681      max_solar_p_fx_viol_start
 682      max_solar_q_up_viol_start
 683      max_solar_q_lo_viol_start
 684      max_solar_p_curtail_up_viol_start
 685      max_De_response_Inc_P_up_viol_start
 686      max_De_response_dec_P_lo_viol_start
 687      max_v_shunt_up_viol_start
 688      max_balance_p_viol_start
 689      max_balance_q_viol_start
 690      max_p_generator_add_viol_start
 691      max_c_I_limit_viol_start
 692      max_c_V_limit_lo_viol_start
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 13
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 693      max_c_V_limit_up_viol_start
 694      max_v_generator_hardupl_viol_start
 695      max_v_generator_harddownl_viol_start
 696      max_v_under_q_up_slack_viol_start
 697      max_v_over_q_lo_slack_viol_start;
 698   
 699  * variable values, constraint violation, and objective. at solution point
 700  parameter
 701  * control variables
 702      V_P_sol(gen)
 703      V_Q_sol(gen)
 704      P_S_sol(i)
 705      Q_S_sol(i)
 706      V_real_sol(i)
 707      V_imag_sol(i)
 708      Solar_p_curtail_sol(i)
 709      De_response_Dec_P_sol(i)
 710      De_response_Inc_P_sol(i)
 711      V_shunt_sol(bus,bus_s)
 712      V_P_system_deviation_sol
 713      V_switchedshuntB_sol(i)
 714  * current
 715      V_LineIr_sol(i,j,c)
 716      V_LineIr_sol(j,i,c)
 717      V_LineIq_sol(i,j,c)
 718      V_LineIq_sol(j,i,c)
 719  * losses
 720      V_Lossijc_sol(i,j,c)
 721      V_Lossi_sol(i)
 722  * penalties and objectives
 723      V_shuntSwitching_sol(i,bus_s)
 724      V_totalShuntSwitching_sol
 725      V_shuntSwitchingPenalty_sol(i,bus_s)
 726      V_shuntTotalSwitchingPenalty_sol
 727      V_shuntSwitchingTotalPenalty_sol
 728      V_previous_solution_penalty_sol
 729      V_objcost_sol
 730  * variable bound violations
 731      gen_p_lo_viol_sol(gen)
 732      gen_p_up_viol_sol(gen)
 733      gen_q_lo_viol_sol(gen)
 734      gen_q_up_viol_sol(gen)
 735      solar_p_fx_viol_sol(i)
 736      solar_q_up_viol_sol(i)
 737      solar_q_lo_viol_sol(i)
 738      solar_p_curtail_up_viol_sol(bus)
 739      De_response_Inc_P_up_viol_sol(bus)
 740      De_response_dec_P_lo_viol_sol(bus)
 741      v_shunt_up_viol_sol(bus,bus_s)
 742  * constraint violations
 743      balance_p_viol_sol(i)
 744      balance_q_viol_sol(i)
 745      p_generator_add_viol_sol(gen)
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 14
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 746      c_I_limit_viol_sol(i,j,c)
 747      c_V_limit_lo_viol_sol(i)
 748      c_V_limit_up_viol_sol(i)
 749      v_generator_hardupl_viol_sol(i)
 750      v_generator_harddownl_viol_sol(i)
 751      v_under_q_up_slack_viol_sol(gen)
 752      v_over_q_lo_slack_viol_sol(gen)
 753  * summaries
 754      sum_loss_sol
 755  *    v_load_bus_volt_pen_sol
 756  *    v_total_shunt_switching_sol
 757  *    v_shunt_switching_total_penalty_sol
 758  *    v_previous_solution_penalty_sol
 759  *    v_objcost_sol
 760      max_gen_p_lo_viol_sol
 761      max_gen_p_up_viol_sol
 762      max_gen_q_lo_viol_sol
 763      max_gen_q_up_viol_sol
 764      max_solar_p_fx_viol_sol
 765      max_solar_q_up_viol_sol
 766      max_solar_q_lo_viol_sol
 767      max_solar_p_curtail_up_viol_sol
 768      max_De_response_Inc_P_up_viol_sol
 769      max_De_response_dec_P_lo_viol_sol
 770      max_v_shunt_up_viol_sol
 771      max_balance_p_viol_sol
 772      max_balance_q_viol_sol
 773      max_p_generator_add_viol_sol
 774      max_c_I_limit_viol_sol
 775      max_c_V_limit_lo_viol_sol
 776      max_c_V_limit_up_viol_sol
 777      max_v_generator_hardupl_viol_sol
 778      max_v_generator_harddownl_viol_sol
 779      max_v_under_q_up_slack_viol_sol
 780      max_v_over_q_lo_slack_viol_sol;
 781   
 782  * files for output
 783  file report_file /'report.txt'/;
 784  report_file.nr = 2;
 785  report_file.nd = 6;
 786  report_file.pc = 5;
 788  put report_file;
 789  put 'sunlamp crest-vct prototype acopf model' /;
 790  put 'start run' /;
 791  putclose;
 792   
 793  *===== SECTION: DATA MANIPULATION
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/data_manipulation.gms
 795   
 796  gen_participation_factor(gen)
 797    = 1$(sum(bus$(atBus(gen,bus) and businfo(bus,'type','given') eq 3),1) > 0);
 798   
 799  * set shunt penalties to 0
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 15
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 800  * if this is the first time step
 802  shuntSwitchingPenalty1 = 0;
 803  shuntSwitchingPenalty2 = 0;
 804  shuntSwitchingTolerance = 0;
 805  shuntSwitchingBudgetPenalty = 0;
 806  shuntSwitchingBudget = 0;
 808   
 809  display Bswitched;
 810   
 811  *--- Define load, gen buses and active lines
 812  file fx;
 813  put fx;
 814   
 815  load(bus)$(type(bus) eq 1)  = 1;
 816  isSolar(bus)$(sum(solarbus, solarlocation(solarbus,bus)) eq 1) = 1;
 817  isGen(bus)$(not(load(bus))) = 1;
 818  activeGen(bus)$(isGen(bus) and (sum(gen$atBus(gen,bus), status(gen))>0) ) = 1;
 819  option isLine < branchstatus;
 820   
 821  * disable solar
 823   
 824  saturaup(bus)=0;
 825   saturalow(bus)=0;
 826  genQtemp(gen)=0;
 827  *voltageran_low=0.999;
 828  *voltageran_high=1.001;
 829  voltageran_low=1;
 830  voltageran_high=1;
 831  step_leng=0.1;
 832   
 833  * voltage magnitude target will be loaded from a file
 834  * for now set it as the scalar voltage goal
 835   
 836  * load from a gdx file if desired
 837  * this gdx file can be written in the Python simulation code
 838  * after reading from csv
 839  * or else we can read from csv and construct a gdx file in the Gams code
 840  * for now we assume the gdx file is constructed externally to the Gams code
 841  volt_mag_target(bus) = load_bus_voltage_goal;
 842   
 843  * which buses should be subject to a voltage magnitude target deviation penalty?
 844  * for any given bus, if the real power load has a nonzero value,
 845  * then we should penalize the deviation from the voltage magnitude target
 846  bus_penalize_volt_mag_target(bus) = yes$(abs(pd(bus)) > 0 and abs(volt_mag_target(bus)) > 0);
 847   
 848  *===== SECTION: VARIABLE DEFINITION
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/var_declaration.gms
 850  free variables
 851      V_P(gen)           "Real power generation of generator",
 852      V_Q(gen)           "Reactive power generation of generator",
 853      P_S(i)      "real power generation of solar bus"
 854      Q_S(i)      "reactive power generation of solar bus"
 855      V_real(i)          "Real part of bus voltage",
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 16
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 856      V_imag(i)          "Imaginary part of bus voltage",
 857   
 858      V_LineIr(i,j,c)    "Real current flowing from bus i towards bus j on line c",
 859      V_LineIq(i,j,c)    "Reactive current flowing from bus i towards bus j on line c"
 860   
 861      V_Lossijc(i,j,c)      "Loss on line c connecting bus i and bus j"
 862      V_Lossi(i)         "Loss on lines connecting with bus i"
 863      V_switchedshuntB(i) "total susceptance from switched shunts connected to bus i"
 864  ;
 865   
 866  integer variables
 867      V_shunt(bus,bus_s)    "number of shunt steps switched on"
 868  ;
 869   
 870  negative variables
 871      De_response_Dec_P(bus)         "the decrease in demand response"
 872  ;
 873   
 874  positive variables
 875      V_p_over(bus) "real power over"
 876      V_p_under(bus) "real power under"
 877      V_q_over(bus) "reactive power over"
 878      V_q_under(bus) "reactive power under"
 879      Solar_p_curtail(bus)    "the amount of real power cutailed from controllable solar bus"
 880      De_response_Inc_P(bus)         "the increment in demand response"
 881      controlLoad(bus)       "controllableload"
 882      V_load_bus_volt_pen "total penalty from load bus voltage deviation"
 883      V_load_bus_volt_pen_dev(i) "penalized load bus voltage deviation - i.e. deviation less dead band radius"
 884      V_shuntSwitching(i,bus_s) "number of steps switched"
 885      V_totalShuntSwitching "total number of steps switched"
 886      V_shuntSwitchingPenalty(i,bus_s) "defines local shunt switching"
 887      V_shuntTotalSwitchingPenalty "penalty incurred by total shunt switching"
 888      V_shuntSwitchingTotalPenalty "total penalty incurrent by shunt switching"
 889      V_devi(bus)          "absolute value of voltage deviation"
 890      V_pw_cost(gen)    "Generator piecewise cost"
 891      V_dem_Load(demanStep)        "demand load level"
 892  *    V_Pd_elastic(demandbid)     "Elastic incremental demand"
 893  *    V_demandbid_rev(demandbid)  "Revenue from elastic incremental demand"
 894      V_artup(bus)       "artificial variablers"
 895      V_artlow(bus)       "artificial variablers"
 896      V_previous_solution_penalty "total penalty on deviation to previous solution"
 897  ;
 898  * these are not necessary as the vars are defined as positive variables
 899  *V_artup.l(bus)=0;
 900  *V_artlow.l(bus)=0;
 901   
 902  free variable
 903  V_objcost  "Total cost of objective function"
 904  V_objcosttest  "Total cost of objective function"
 905  V_P_system_deviation "system total adjustment from real generation schedule"
 906  ;
 907  *display  V_real.l;
 908  *===== SECTION: EQUATION DECLARATION
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 17
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


INCLUDE    /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/eqn_declaration.gms
 910  equations
 911      c_load_bus_volt_pen_def "defines total load bus voltage deviation penalty"
 912      c_load_bus_volt_pen_dev_def1(i) "first constraint defining penalized load bus voltage deviation"
 913      c_load_bus_volt_pen_dev_def2(i) "second constraint defining penalized load bus voltage deviation"
 914   
 915      c_switchedshuntB_Def(i) "defines total susceptance from switched shunts at bus i"
 916      c_shuntSwitchingDef1(i,bus_s) "defines number of steps switched - side 1"
 917      c_shuntSwitchingDef2(i,bus_s) "defines number of steps switched - side 2"
 918      c_totalShuntSwitchingDef "defines total number of steps switched"
 919      c_shuntSwitchingPenaltyDef1(i,bus_s) "defines local shunt switching penalty - segment 1"
 920      c_shuntSwitchingPenaltyDef2(i,bus_s) "defines local shunt switching penalty - segment 2"
 921      c_shuntTotalSwitchingPenalty "defines penalty incurred by total shunt switching"
 922      c_shuntSwitchingTotalPenaltyDef " defines total penalty incurrent by shunt switching"
 923   
 924      c_I_limit(i,j,c)     "Limit apparent current on a line"
 925      c_V_limit_lo(i)      "Limit voltage magnitude on a line"
 926      c_V_limit_up(i)      "Limit voltage magnitude on a line"
 927      c_LineIrij(i,j,c)    "Real current flowing from bus i into bus j along line c"
 928      c_LineIrji(i,j,c)    "Real  current flowing from bus j into bus i along line c"
 929      c_LineIqij(i,j,c)    "Reactive current  flowing from bus i into bus j along line c"
 930      c_LineIqji(i,j,c)    "Reactive current flowing from bus j into bus i along line c"
 931   
 932      c_Lossijc(i,j,c)     "Loss on line c connecting bus i and bus j"
 933      c_Lossi(i)           "Loss on lines connected with bus i"
 934   
 935      c_BalanceP_nosolar(bus)      "Balance of real power for bus without solar"
 936      c_BalanceP_solar(bus)      "Balance of real power for bus with solar"
 937      c_BalanceP_control_solar(bus)        "balance of real power for controllable solar"
 938      c_BalanceQ_nosolar(bus)      "Balance of reactive power for bus without solar"
 939      c_BalanceQ_solar(bus)      "Balance of reactive power for bus with solar"
 940      v_generator_addup(bus) "generator voltage constraints added selectively"
 941      v_generator_addlow(bus) "generator voltage constraints added"
 942      v_generator_addup_arti(bus)  "generator voltage up constraints added with artificial variables"
 943      v_generator_addlow_arti(bus)  "generator voltage low constraints added with artificial variables"
 944      v_generator_hardupl(bus) "bus voltage constraints upper bound"
 945      v_generator_harddownl(bus) "bus voltage constraints lower bound"
 946      p_generator_add(gen) "enforces generator participation factor in adjustment from schedule"
 947      p_generator_addup(gen) "generator real power constraints added"
 948      p_generator_addlow(gen) "generator real power constraints added"
 949      c_obj  "Objective function"
 950      c_objtest  "Objective function"
 951      c_previous_solution_penalty_def "defines previous solution deviation penalty"
 952      c_gen_q_arctan_v(gen) "smooth arctan formulation of pv/pq complementarity constraint"
 953  ;
 954  *display V_P.l,V_P.up, V_P.lo;
 955  *===== SECTION: EQUATION DEFINITION
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/eqn_definition.gms
 957   
 958  * defines previous solution deviation penalty
 959  c_previous_solution_penalty_def..
 960      V_previous_solution_penalty
 961        =g=
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 18
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


 962      previous_solution_penalty_2 * (
 963          sum(gen, sqr(V_P_prior(gen) - V_P(gen)))
 964        + sum(gen, sqr(V_Q_prior(gen) - V_Q(gen)))
 965        + sum(i, sqr(P_S_prior(i) - P_S(i)))
 966        + sum(i, sqr(Q_S_prior(i) - Q_S(i)))
 967        + sum(i, sqr(V_real_prior(i) - V_real(i)))
 968        + sum(i, sqr(V_imag_prior(i) - V_imag(i)))
 969        + sum(i, sqr(Solar_p_curtail_prior(i) - Solar_p_curtail(i)))
 970        + sum(i, sqr(De_response_Inc_P_prior(i) - De_response_Inc_P(i)))
 971        + sum(i, sqr(De_response_Dec_P_prior(i) - De_response_Dec_P(i))));
 972   
 973  * defines total load bus voltage deviation penalty
 974  c_load_bus_volt_pen_def..
 975      V_load_bus_volt_pen
 976        =g=
 977      sum(i$(bus_penalize_volt_mag_target(i) and type(i) eq 1),
 978            load_bus_volt_pen_coeff_1 * V_load_bus_volt_pen_dev(i)
 979          + load_bus_volt_pen_coeff_2 * sqr(V_load_bus_volt_pen_dev(i)))
 980  ;
 981   
 982   
 983   
 984  * defines total susceptance from switched shunts connected to a bus
 985  c_switchedshuntB_def(i)$sum(bus_s$numBswitched(i, bus_s), 1)..
 986      V_switchedshuntB(i)
 987        =e=
 988      sum(bus_s$numBswitched(i,bus_s), Bswitched(i,bus_s) * V_shunt(i,bus_s));
 989   
 990  * defines number of steps switched - side 1
 991  c_shuntSwitchingDef1(i,bus_s)$numBswitched(i,bus_s)..
 992      V_shuntSwitching(i,bus_s)
 993        =g=
 994      V_shunt(i,bus_s) - numShuntStepsOn_init(i,bus_s)
 995  ;
 996   
 997  * defines number of steps switched - side 2
 998  c_shuntSwitchingDef2(i,bus_s)$numBswitched(i,bus_s)..
 999      V_shuntSwitching(i,bus_s)
1000        =g=
1001      numShuntStepsOn_init(i,bus_s) - V_shunt(i,bus_s)
1002  ;
1003   
1004  * defines total number of steps switched
1005  c_totalShuntSwitchingDef..
1006      V_totalShuntSwitching
1007        =g=
1008      sum((i,bus_s)$numBswitched(i,bus_s),V_shuntSwitching(i,bus_s))
1009  ;
1010   
1011  * defines local shunt switching penalty - segment 1
1012  c_shuntSwitchingPenaltyDef1(i,bus_s)$numBswitched(i,bus_s)..
1013      V_shuntSwitchingPenalty(i,bus_s)
1014        =g=
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 19
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


1015      shuntSwitchingPenalty1 * V_shuntSwitching(i,bus_s)
1016  ;
1017   
1018  * defines local shunt switching penalty - segment 2
1019  c_shuntSwitchingPenaltyDef2(i,bus_s)$numBswitched(i,bus_s)..
1020      V_shuntSwitchingPenalty(i,bus_s)
1021        =g=
1022      shuntSwitchingPenalty2 * (V_shuntSwitching(i,bus_s) - shuntSwitchingTolerance)
1023  ;
1024   
1025  * defines penalty incurred by total shunt switching
1026  c_shuntTotalSwitchingPenalty..
1027      V_shuntTotalSwitchingPenalty
1028        =g=
1029      shuntSwitchingBudgetPenalty * (V_totalShuntSwitching - shuntSwitchingBudget)
1030  ;
1031   
1032  * defines total penalty incurrent by shunt switching
1033  c_shuntSwitchingTotalPenaltyDef..
1034      V_shuntSwitchingTotalPenalty
1035        =g=
1036      V_shuntTotalSwitchingPenalty +
1037      sum((i,bus_s)$numBswitched(i,bus_s),V_shuntSwitchingPenalty(i,bus_s))
1038  ;
1039   
1040  * Limit apparent current on a line
1041  c_I_limit(i,j,c)$(branchstatus(i,j,c) or branchstatus(j,i,c))..
1042      sqr(V_LineIr(i,j,c)) + sqr(V_LineIq(i,j,c))
1043        =l=
1044      sqr(currentrate(i,j,c))
1045  ;
1046   
1047  *Limit voltage magnitude on a line
1048  c_V_limit_lo(i)..
1049      sqr(V_real(i)) + sqr(V_imag(i)) =g= sqr(minVm(i))
1050  ;
1051   
1052  *Limit voltage magnitude on a line
1053  c_V_limit_up(i)..
1054      sqr(V_real(i)) + sqr(V_imag(i)) =l= sqr(maxVm(i))
1055  ;
1056   
1057  *Real current flowing from bus i into bus j along line c
1058  c_LineIrij(i,j,c)$(branchstatus(i,j,c))..
1059           V_LineIr(i,j,c) =e=
1060              1/sqr(ratio(i,j,c))
1061                  * (g(i,j,c)*V_real(i) - (b(i,j,c) + bc(i,j,c)/2)*V_imag(i))
1062              - 1/ratio(i,j,c)
1063                  * (  (g(i,j,c)*V_real(j) - b(i,j,c)*V_imag(j))*cos(angle(i,j,c))
1064                     - (g(i,j,c)*V_imag(j) + b(i,j,c)*V_real(j))*sin(angle(i,j,c))
1065                    )
1066  ;
1067   
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 20
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


1068  *Real current flowing from bus j into bus i along line c
1069  c_LineIrji(i,j,c)$(branchstatus(i,j,c))..
1070           V_LineIr(j,i,c) =e=
1071              (g(i,j,c)*V_real(j) - (b(i,j,c) + bc(i,j,c)/2)*V_imag(j))
1072              - 1/ratio(i,j,c)
1073                  * (  (g(i,j,c)*V_real(i) - b(i,j,c)*V_imag(i))*cos(-angle(i,j,c))
1074                     - (g(i,j,c)*V_imag(i) + b(i,j,c)*V_real(i))*sin(-angle(i,j,c))
1075                    )
1076  ;
1077   
1078  *Reactive current flowing from bus i into bus j along line c
1079  c_LineIqij(i,j,c)$(branchstatus(i,j,c))..
1080           V_LineIq(i,j,c) =e=
1081              1/sqr(ratio(i,j,c))
1082                  * (g(i,j,c)*V_imag(i) + (b(i,j,c) + bc(i,j,c)/2)*V_real(i))
1083              - 1/ratio(i,j,c)
1084                  * (  (g(i,j,c)*V_imag(j) + b(i,j,c)*V_real(j))*cos(angle(i,j,c))
1085                     + (g(i,j,c)*V_real(j) - b(i,j,c)*V_imag(j))*sin(angle(i,j,c))
1086                    )
1087  ;
1088   
1089  *Reactive current flowing from bus j into bus i along line c
1090  c_LineIqji(i,j,c)$(branchstatus(i,j,c))..
1091           V_LineIq(j,i,c) =e=
1092              (g(i,j,c)*V_imag(j) + (b(i,j,c) + bc(i,j,c)/2)*V_real(j))
1093              - 1/ratio(i,j,c)
1094                  * (  (g(i,j,c)*V_imag(i) + b(i,j,c)*V_real(i))*cos(-angle(i,j,c))
1095                     + (g(i,j,c)*V_real(i) - b(i,j,c)*V_imag(i))*sin(-angle(i,j,c))
1096                    )
1097  ;
1098   
1099  *Balance of real power for bus without solar
1100  c_BalanceP_nosolar(i)$(type(i) ne 4 and (sum(solarbus,solarlocation(solarbus,i)) eq 0))..
1101          sum(gen$(atBus(gen,i) and status(gen)), V_P(gen))
1102          - (Pd(i)+ demLoad('1')$(demLocation(i) eq 1)-sum(demanStep ,V_dem_Load(demanStep))$(demLocation(i) eq 1)+ De_response_Inc_P(i)$(Pd_respon_location(i)) + De_response_Dec_P(i)$(Pd_respon_location(i))   )
1103          + V_p_over(i)
1104          - V_p_under(i)
1105              =e=
1106            V_real(i) *
1107          ( sum((j,c)$(branchstatus(i,j,c) ), V_LineIr(i,j,c))
1108            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIr(i,j,c)) )
1109          + V_imag(i) *
1110           (sum((j,c)$(branchstatus(i,j,c) ), V_LineIq(i,j,c))
1111            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIq(i,j,c)))
1112          + Gs(i) * (sqr(V_real(i)) + sqr(V_imag(i)))
1113  ;
1114  *Balance of real power for bus with uncontrollable solar installed
1115  c_BalanceP_solar(i)$(type(i) ne 4 and (sum(solarbus,solarlocation(solarbus,i)) ne 0) and contro_solar_location(i) eq 0)..
1116          sum(gen$(atBus(gen,i) and status(gen)), V_P(gen))
1117           - (Pd(i)+ demLoad('1')$(demLocation(i) eq 1)-sum(demanStep ,V_dem_Load(demanStep))$(demLocation(i) eq 1)- P_S(i)+De_response_Inc_P(i)$(Pd_respon_location(i)) + De_response_Dec_P(i)$(Pd_respon_location(i)))
1118          + V_p_over(i)
1119          - V_p_under(i)
1120              =e=
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 21
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


1121            V_real(i) *
1122          ( sum((j,c)$(branchstatus(i,j,c) ), V_LineIr(i,j,c))
1123            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIr(i,j,c)) )
1124          + V_imag(i) *
1125           (sum((j,c)$(branchstatus(i,j,c) ), V_LineIq(i,j,c))
1126            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIq(i,j,c)))
1127          + Gs(i) * (sqr(V_real(i)) + sqr(V_imag(i)))
1128  ;
1129   
1130  c_BalanceP_control_solar(i)$(type(i) ne 4 and  contro_solar_location(i) ne 0)..
1131          sum(gen$(atBus(gen,i) and status(gen)), V_P(gen))
1132           - (Pd(i)+ demLoad('1')$(demLocation(i) eq 1)-sum(demanStep ,V_dem_Load(demanStep))$(demLocation(i) eq 1)+ De_response_Inc_P(i)$(Pd_respon_location(i))+ De_response_Dec_P(i)$(Pd_respon_location(i)) - (P_S(i)-Solar_p_curtail(i) ))
1133          + V_p_over(i)
1134          - V_p_under(i)
1135              =e=
1136            V_real(i) *
1137          ( sum((j,c)$(branchstatus(i,j,c) ), V_LineIr(i,j,c))
1138            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIr(i,j,c)) )
1139          + V_imag(i) *
1140           (sum((j,c)$(branchstatus(i,j,c) ), V_LineIq(i,j,c))
1141            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIq(i,j,c)))
1142          + Gs(i) * (sqr(V_real(i)) + sqr(V_imag(i)))
1143  ;
1144  * Balance of reactive power for bus without solar
1145  c_BalanceQ_nosolar(i)$(type(i) ne 4 and (sum(solarbus,solarlocation(solarbus,i)) eq 0))..
1146          sum(gen$(atBus(gen,i) and status(gen)), V_Q(gen))
1147          - (Qd(i)+Pd_respon_q_up(i)*De_response_Inc_P(i)$(Pd_respon_location(i)) + Pd_respon_q_down(i)*De_response_Dec_P(i)$(Pd_respon_location(i))  )
1148          + V_q_over(i)
1149          - V_q_under(i)
1150              =e=
1151          - V_real(i) *
1152          ( sum((j,c)$(branchstatus(i,j,c) ), V_LineIq(i,j,c))
1153            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIq(i,j,c)))
1154          + V_imag(i) *
1155          ( sum((j,c)$(branchstatus(i,j,c) ), V_LineIr(i,j,c))
1156            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIr(i,j,c)))
1157          - (Bs(i) + V_switchedshuntB(i)$sum(bus_s$numbswitched(i, bus_s), 1)) * (sqr(V_real(i)) + sqr(V_imag(i)));
1158  ;
1159  * Balance of reactive power for bus with solar
1160  c_BalanceQ_solar(i)$(type(i) ne 4 and (sum(solarbus,solarlocation(solarbus,i)) ne 0))..
1161          sum(gen$(atBus(gen,i) and status(gen)), V_Q(gen))
1162          - ( Qd(i)+ Pd_respon_q_up(i)*De_response_Inc_P(i)$(Pd_respon_location(i)) + Pd_respon_q_down(i)*De_response_Dec_P(i)$(Pd_respon_location(i)) - Q_S(i) )
1163          + V_q_over(i)
1164          - V_q_under(i)
1165              =e=
1166          - V_real(i) *
1167          ( sum((j,c)$(branchstatus(i,j,c) ), V_LineIq(i,j,c))
1168            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIq(i,j,c)))
1169          + V_imag(i) *
1170          ( sum((j,c)$(branchstatus(i,j,c) ), V_LineIr(i,j,c))
1171            + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIr(i,j,c)))
1172          - (Bs(i) + V_switchedshuntB(i)$sum(bus_s$numbswitched(i, bus_s), 1)) * (sqr(V_real(i)) + sqr(V_imag(i)));
1173  ;
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 22
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


1174   
1175  * Loss on line c connecting bus i and bus j
1176  c_Lossijc(i,j,c)$(branchstatus(i,j,c))..
1177            V_Lossijc(i,j,c) =e=
1178                 g(i,j,c)/( sqr(b(i,j,c))+ sqr(g(i,j,c)) ) * (  sqr(V_LineIr(i,j,c))+ sqr(V_LineIq(i,j,c)) )
1179  ;
1180   
1181  *Loss on lines connected with bus i
1182  c_Lossi(i)..
1183         V_Lossi(i) =e=
1184                sum((j,c)$(branchstatus(i,j,c)),V_Lossijc(i,j,c))
1185  ;
1186   
1187  * generator bus voltage set points enforced with violation variables
1188  v_generator_addup(i)$(sum(gen,status2(gen,i)) eq 1 and saturaup(i) eq 0)..
1189           sqrt(sqr(V_real(i)) + sqr(V_imag(i))) =l= voltageran_high*Vsch(i)
1190  ;
1191  v_generator_addlow(i)$(sum(gen,status2(gen,i)) eq 1 and saturalow(i) eq 0)..
1192           sqrt(sqr(V_real(i)) + sqr(V_imag(i))) =g= voltageran_low*Vsch(i)
1193  ;
1194   
1195   
1196  v_generator_addup_arti(i)$(sum(gen,status2(gen,i)) eq 1 )..
1197           sqrt(sqr(V_real(i)) + sqr(V_imag(i))) =l= voltageran_high*Vsch(i) + V_artup(i)
1198  ;
1199  v_generator_addlow_arti(i)$(sum(gen,status2(gen,i)) eq 1 )..
1200           sqrt(sqr(V_real(i)) + sqr(V_imag(i))) =g= voltageran_low*Vsch(i) - V_artlow(i)
1201  ;
1202   
1203  v_generator_hardupl(i)..
1204           sqrt(sqr(V_real(i)) + sqr(V_imag(i))) =l= 1.15
1205  ;
1206   
1207  v_generator_harddownl(i)..
1208           sqrt(sqr(V_real(i)) + sqr(V_imag(i))) =g= 0.88
1209  ;
1210   
1211  * enforces generator participation factor in adjustment from schedule
1212  p_generator_add(gen)$(status(gen) eq 1 and abs(gen_participation_factor(gen)))..
1213           V_P(gen) =e= PgSch(gen) + gen_participation_factor(gen) * V_P_system_deviation
1214  ;
1215   
1216  p_generator_addup(gen)$(status(gen) eq 1 and gentype(gen) eq 1)..
1217           V_P(gen) =l= 1.001*PgSch(gen)
1218  ;
1219  p_generator_addlow(gen)$(status(gen) eq 1 and gentype(gen) eq 1 and PgSch(gen) > 0 )..
1220           V_P(gen) =g= 0.999*PgSch(gen)
1221   
1222  ;
1223  *solar bus active power constraints uppr bound
1224  ;
1225  * WARNING TODO JH this equation has an error
1226  * causes infeasibility
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 23
"AC optimal power flow model, rectangular current-voltage formulation"
C o m p i l a t i o n


1227  * e.g. 0 =g= 1e-6
1228  *
1229  * fixed it
1230  * Xinda can you check that this is correct?
1231  * am I understanding the data and model correctly?
1232  *solar bus  power constraints lower bound
1233  ;
1234   
1235   
1236  * Objective functions and pwl costs are listed in a separate file
1237  *$batinclude "%filepath%objective_voltage_stability_addterm.gms" obj demandbids
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 24
Cost objective calculations for OPF models
C o m p i l a t i o n


1239  *this file is modified by Xinda Ke from Wisconsin university IV_acopf.gms
1240  *updated by Xinda ke in 7/26/2016
1241   
      * Set costmodel variable
      costmodel(gen)= 2;
       
      *-- Convexity Check
      * Not part of system of equations
      * LP/QCP/NLP can't handle nonconvex piecewise linear cost functions
      set thisgen(gen);
       
      parameters cur_slope, next_slope;
      loop(gen$(status(gen) and (costmodel(gen) eq 1) and (numcostpts(gen) > 2)),
          next_slope = (costpts_y(gen,'2') - costpts_y(gen,'1'))
                       / (costpts_x(gen,'2') - costpts_x(gen,'1'));
          loop(costptset$(ord(costptset) < numcostpts(gen) - 1),
              cur_slope = next_slope;
              if((ord(costptset) < numcostpts(gen) - 2) and (costpts_x(gen,costptset+2) eq costpts_x(gen,costptset+1)),
                  abort "Zero-length piecewise segment detected";
              );
              next_slope = (costpts_y(gen,costptset+2) - costpts_y(gen,costptset+1))
                           / (costpts_x(gen,costptset+2) - costpts_x(gen,costptset+1))
       
              if(cur_slope - next_slope > 1e-8,
                  thisgen(gen1)=no; thisgen(gen)=yes;
                  display thisgen;
                  abort "Nonconvex piecewise linear costs not supported";
              );
          );
      );
1271   
1272  *===== SECTION: EQUATIONS PART 2
1273  * Defining piecewise linear generator cost curves
1274  * P is in per-unit, costpts_x is in MW, and costpts_y is in $/hr
1275   
1276   
1278   
1279   
1280   
1281   
1282  c_obj..
1283      V_objcost =e=
1284             V_shuntSwitchingTotalPenalty
1285  *penalty for contro_solar_pout
1286           +sum(demanStep ,demSlope(demanStep)*V_dem_Load(demanStep))
1287           + sum(i,P_S(i)*sqr(dis_gen_par1(i))+P_S(i)*dis_gen_par2(i)+dis_gen_par3(i))
1288           + solar_curtail_penalty * sum(i,Solar_p_curtail(i))
1289           + demand_response_increase_penalty * sum(i,De_response_Inc_P(i))
1290           - demand_response_decrease_penalty * sum(i,De_response_Dec_P(i))
1291  *the demand response q is comment out because it change with respose to p
1292  *+5*sum(i,De_response_Inc_Q(i))-5*sum(i,De_response_Dec_Q(i))
1293  *the term of line losses. tobe checked, tobe verified
1294           + sum(i,V_Lossi(i))
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 25
Cost objective calculations for OPF models
C o m p i l a t i o n


1295           + V_previous_solution_penalty
1296  *the penalty for power balancing relaxation
1297  *         + %balance_constr_penalty% * (
1298  *               sum(i,V_p_over(i))
1299  *             + sum(i,V_p_under(i))
1300  *             + sum(i,V_q_over(i))
1301  *             + sum(i,V_q_under(i)))
1302  ;
1303   
1304  c_objtest..
1305      V_objcosttest =e=
1306             V_shuntSwitchingTotalPenalty
1307           +sum(demanStep ,demSlope(demanStep)*V_dem_Load(demanStep))
1308           + sum(i,P_S(i)*sqr(dis_gen_par1(i))+P_S(i)*dis_gen_par2(i)+dis_gen_par3(i))
1309  *penalty for contro_solar_pout
1310           + solar_curtail_penalty * sum(i,Solar_p_curtail(i))
1311           + demand_response_increase_penalty * sum(i,De_response_Inc_P(i))
1312           - demand_response_decrease_penalty * sum(i,De_response_Dec_P(i))
1313  *the demand response q is comment out because it change with respose to p
1314  *+5*sum(i,De_response_Inc_Q(i))-5*sum(i,De_response_Dec_Q(i))
1315  *the term of line losses. tobe checked, tobe verified
1316           + sum(i,V_Lossi(i))
1317  * artificial variables is included in objective function with high penalty cost
1318           + generator_voltage_deviation_penalty
1319               * sum(bus$(sum(gen,status2(gen,bus)) eq 1),  V_artup(bus))
1320           + generator_voltage_deviation_penalty
1321               * sum(bus$(sum(gen,status2(gen,bus)) eq 1),  V_artlow(bus))
1322           + V_previous_solution_penalty
1323  *the penalty for power balancing relaxation
1324  *         + %balance_constr_penalty% * (
1325  *               sum(i,V_p_over(i))
1326  *             + sum(i,V_p_under(i))
1327  *             + sum(i,V_q_over(i))
1328  *             + sum(i,V_q_under(i)))
1329  ;
1330   
1331  c_gen_q_arctan_v(gen)$status(gen)..
1332      v_q(gen) =e=
1333      qmin(gen) +
1334      (qmax(gen) - qmin(gen))
1335      * (0.5 -
1336         (1 / pi) *
1337         arctan(
1338             sum(bus$atbus(gen,bus),
1339                 sqrt(sqr(v_real(bus)) + sqr(v_imag(bus))) - vsch(bus)) /
1340             pv_pq_smoothing_param));
1341  *display Pmax, Pmin, V_P.l;
1342  *===== SECTION: MODEL DEFINITION
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/mod_definition.gms
1344   
1345  model base_model /
1347  **    c_I_limit
1348  **    c_V_limit_lo
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 26
Cost objective calculations for OPF models
C o m p i l a t i o n


1349  **    c_V_limit_up
1350      c_LineIrij
1351      c_LineIrji
1352      c_LineIqij
1353      c_LineIqji
1354      c_BalanceP_nosolar
1355      c_BalanceP_solar
1356      c_BalanceQ_nosolar
1357      c_BalanceQ_solar
1358      c_Lossijc
1359      c_Lossi
1360      v_generator_hardupl
1361      v_generator_harddownl
1362      p_generator_add
1363      c_BalanceP_control_solar
1364      c_switchedshuntB_def
1365      c_shuntSwitchingDef1
1366      c_shuntSwitchingDef2
1367      c_totalShuntSwitchingDef
1368      c_shuntSwitchingPenaltyDef1
1369      c_shuntSwitchingPenaltyDef2
1370      c_shuntTotalSwitchingPenalty
1371      c_shuntSwitchingTotalPenaltyDef
1372      c_previous_solution_penalty_def
1373      /;
1374  model feas /
1375      base_model
1376      v_generator_addup
1377      v_generator_addlow
1378      /;
1379  model test /
1380      base_model
1381      v_generator_addup_arti
1382      v_generator_addlow_arti
1383      /;
1384  model acopf /
1385      feas
1386      c_obj
1387      /;
1388  model acopf_check /
1389      test
1390      c_objtest
1391      /;
1392  model acopf_arctan /
1393      base_model
1394      c_gen_q_arctan_v
1395      c_obj /;
1396  display Pmax, Pmin, Pd, Va, Vm, Qg, Gs, b, bc;
1397  *===== SECTION: VARIABLE BOUNDS
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/var_bounds.gms
1399   
1400  * shunt switching
1401  V_shunt.lo(bus,bus_s)$numBswitched(bus,bus_s) = 0;
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 27
Cost objective calculations for OPF models
C o m p i l a t i o n


1402  V_shunt.up(bus,bus_s)$numBswitched(bus,bus_s) = numBswitched(bus,bus_s);
1404  V_shunt.fx(bus,bus_s)$numBswitched(bus,bus_s) = numShuntStepsOn_init(bus,bus_s);
1406   
1407  * Generator active power generation limits
1408  V_P.lo(gen)$(status(gen) and abs(gen_participation_factor(gen))) = Pmin(gen);
1409  V_P.up(gen)$(status(gen) and abs(gen_participation_factor(gen))) = Pmax(gen);
1410  V_P.fx(gen)$(status(gen) and not abs(gen_participation_factor(gen))) = PgSch(gen);
1411  V_P.fx(gen)$(not status(gen)) = 0;
1412   
1413   
1415  Solar_p_curtail.fx(bus)=0;
1416  contro_solar_location(bus) = 0;
1418   
1419   
1420   
1421  V_dem_Load.up(demanStep)$(ord(demanStep) > 1)=  demLoad(demanStep)-demLoad(demanStep-1);
1422  V_dem_Load.fx('1')=0;
1423  Q_s.lo('13')=-300;
1424  Q_s.lo('57')=-300;
1425  Q_s.up('13')=300;
1426  Q_s.up('57')=300;
1427   
1428   
1429  P_S.lo('13')=0.03;
1430  P_S.lo('57')=0.02;
1431  P_S.up('13')=0.3;
1432  P_S.up('57')=0.25;
1433   
1434   
1435   
1436   
1437  De_response_Inc_P.up(bus)$(Pd_respon_location(bus))=Pd_respon_p_up(bus);
1438  De_response_Inc_P.lo(bus)$(Pd_respon_location(bus))=0;
1439  De_response_Inc_P.fx(bus)$(not Pd_respon_location(bus))=0;
1440   
1441  De_response_Dec_P.lo(bus)$(Pd_respon_location(bus))=Pd_respon_p_down(bus);
1442  De_response_Dec_P.up(bus)$(Pd_respon_location(bus))=0;
1443  De_response_Dec_P.fx(bus)$(not Pd_respon_location(bus))=0;
1444   
1445   
1446   
1447  * disable demand response
1449   
1450  * Generator reactive power generation limits
1451  * Does not impose Qmax, Qmin limits when the D-curve contraint is applied
1452  *$ifthen %qlim% == 0
1453  V_Q.lo(gen)$status(gen) = Qmin(gen);
1454  V_Q.up(gen)$status(gen) = Qmax(gen);
1455  *$endif
1456  V_Q.fx(gen)$(not status(gen)) = 0;
1457  *display V_Q.l, V_Q.up, V_Q.lo;
1458  * Bus voltage magnitude limits
1459  * Note these bounds are numerically helpful
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 28
Cost objective calculations for OPF models
C o m p i l a t i o n


1460  * even if they are not necessary for the correctness
1461  * of the formulation
1462  V_real.lo(bus) = -MaxVm(bus); V_real.up(bus) = MaxVm(bus);
1463  V_imag.lo(bus) = -MaxVm(bus); V_imag.up(bus) = MaxVm(bus);
1464  V_imag.fx(bus)$(type(bus) eq 3) = 0;
1465   
1466  * disable solar q
1468   
1469   
1470  * soft power balance constraints
1471  balance_real_bound=0.01;
1472  balance_react_bound=0.01;
1474  V_p_over.up(i) = balance_real_bound;
1475  V_p_under.up(i) = balance_real_bound;
1476  V_q_over.up(i) = balance_react_bound;
1477  V_q_under.up(i) = balance_react_bound;
1478   
1480   
1481  *===== SECTION: VARIABLE START VALUES
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/start_point.gms
1483   
1484  * Set initial conditions
BATINCLUDE /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/ic_iv/preset.gms
      sets values for some variables that might not otherwise be set
1489   
1490  V_P.l(gen) = 0;
1491  V_Q.l(gen) = 0;
1492  V_LineIr.l(i,j,c) = 0;
1493  V_LineIq.l(i,j,c) = 0;
1494  V_P_system_deviation.l = 0;
1495  V_switchedshuntB.l(i)$sum(bus_s$numBswitched(i,bus_s), 1) = 0;
1496  V_shunt.l(bus,bus_s)$numBswitched(bus,bus_s) = 0;
1497  *P_S.l(i)$(isSolar(i) and contro_solar_location(i) ne 1) = solar_r(i);
1498  *P_S.l(i)$(isSolar(i) and contro_solar_location(i) eq 1) = contro_solar_pout(i);
1499  Q_S.l(i)$isSolar(i) = 0;
1500  solar_p_curtail.l(bus)$contro_solar_location(bus) = 0;
1501  de_response_dec_p.l(bus)$pd_respon_location(bus) = 0;
1502  de_response_inc_p.l(bus)$pd_respon_location(bus) = 0;
1503   
BATINCLUDE /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/ic_iv/given.gms
      Use given initial conditions for Polar ACOPF.
1508   
1510   
1511  V_P.l(gen) = Pg(gen)$status(gen);
1512  V_Q.l(gen) = Qg(gen)$status(gen);
1513  V_real.l(bus) = Vm(bus)*cos(Va(bus));
1514  V_imag.l(bus) = Vm(bus)*sin(Va(bus));
1515  V_switchedshuntB.l(i)$sum(bus_s$numBswitched(i,bus_s), 1) = switchedshuntB_init(i);
1516  V_shunt.l(bus,bus_s)$numBswitched(bus,bus_s)
1517    = switchedshuntB_init(bus) * numBswitched(bus,bus_s)
1518    / sum(bus_s_1, numBswitched(bus,bus_s_1) * Bswitched(bus,bus_s_1));
1519   
1520  *Parameter Bs_solved(bus);
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 29
Cost objective calculations for OPF models
C o m p i l a t i o n


1521  *Bs_solved(bus) = businfo(bus,'switchedBsSolved','%timeperiod%')/baseMVA;
1522  *loop((bus,bus_s)$((not sameas(bus_s,'given') and (Bswitched(bus,bus_s) ne 0)) and (abs(Bs_solved(bus)) > 1e-6)),
1523  *    V_shunt.l(bus,bus_s) = min(Bs_solved(bus)/Bswitched(bus,bus_s), V_shunt.up(bus,bus_s));
1524  *    Bs_solved(bus) = Bs_solved(bus) - V_shunt.l(bus,bus_s)*Bswitched(bus,bus_s);
1525  *);
1526   
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/ic_iv/calc_derived_vars.gms
      independent variables V_real and V_imag are set prior to this code
      other independent variables are set here
      then dependent variables are computed here - including objective
      finally we could check constraint violations - e.g. balance constraints
1534   
1535  *--------------------
1536  * derived variables -
1537  *--------------------
1538   
1539           V_LineIr.l(i,j,c)$(branchstatus(i,j,c)) =
1540              1/sqr(ratio(i,j,c))
1541                  * (g(i,j,c)*V_real.l(i) - (b(i,j,c) + bc(i,j,c)/2)*V_imag.l(i))
1542              - 1/ratio(i,j,c)
1543                  * (  (g(i,j,c)*V_real.l(j) - b(i,j,c)*V_imag.l(j))*cos(angle(i,j,c))
1544                     - (g(i,j,c)*V_imag.l(j) + b(i,j,c)*V_real.l(j))*sin(angle(i,j,c)));
1545   
1546           V_LineIr.l(j,i,c)$(branchstatus(i,j,c)) =
1547              (g(i,j,c)*V_real.l(j) - (b(i,j,c) + bc(i,j,c)/2)*V_imag.l(j))
1548              - 1/ratio(i,j,c)
1549                  * (  (g(i,j,c)*V_real.l(i) - b(i,j,c)*V_imag.l(i))*cos(-angle(i,j,c))
1550                     - (g(i,j,c)*V_imag.l(i) + b(i,j,c)*V_real.l(i))*sin(-angle(i,j,c)));
1551   
1552           V_LineIq.l(i,j,c)$(branchstatus(i,j,c)) =
1553              1/sqr(ratio(i,j,c))
1554                  * (g(i,j,c)*V_imag.l(i) + (b(i,j,c) + bc(i,j,c)/2)*V_real.l(i))
1555              - 1/ratio(i,j,c)
1556                  * (  (g(i,j,c)*V_imag.l(j) + b(i,j,c)*V_real.l(j))*cos(angle(i,j,c))
1557                     + (g(i,j,c)*V_real.l(j) - b(i,j,c)*V_imag.l(j))*sin(angle(i,j,c)));
1558   
1559           V_LineIq.l(j,i,c)$(branchstatus(i,j,c)) =
1560              (g(i,j,c)*V_imag.l(j) + (b(i,j,c) + bc(i,j,c)/2)*V_real.l(j))
1561              - 1/ratio(i,j,c)
1562                  * (  (g(i,j,c)*V_imag.l(i) + b(i,j,c)*V_real.l(i))*cos(-angle(i,j,c))
1563                     + (g(i,j,c)*V_real.l(i) - b(i,j,c)*V_imag.l(i))*sin(-angle(i,j,c)));
1564   
1565      V_devi.l(i)$(sum(gen,status2(gen,i)) eq 1 ) =
1566      abs(sqrt(sqr(V_real.l(i)) + sqr(V_imag.l(i))) - Vsch(i));
1567   
1568      V_artup.l(i)$(sum(gen,status2(gen,i)) eq 1 ) =
1569      max(0,
1570      sqrt(sqr(V_real.l(i)) + sqr(V_imag.l(i))) - voltageran_high*Vsch(i));
1571   
1572      V_artlow.l(i)$(sum(gen,status2(gen,i)) eq 1 ) =
1573      max(0,
1574      voltageran_low*Vsch(i) - sqrt(sqr(V_real.l(i)) + sqr(V_imag.l(i))));
1575   
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 30
Cost objective calculations for OPF models
C o m p i l a t i o n


1576      V_Lossijc.l(i,j,c)$(branchstatus(i,j,c)) =
1577      g(i,j,c) / (sqr(b(i,j,c)) + sqr(g(i,j,c))) *
1578      (sqr(V_LineIr.l(i,j,c)) + sqr(V_LineIq.l(i,j,c)));
1579   
1580      V_Lossi.l(i) =
1581      sum((j,c)$(branchstatus(i,j,c)),V_Lossijc.l(i,j,c));
1582   
1583      V_load_bus_volt_pen_dev.l(i)$bus_penalize_volt_mag_target(i) =
1584      max(
1585        sqrt(sqr(V_real.l(i)) + sqr(V_imag.l(i)))
1586      - load_bus_voltage_goal
1587      - load_bus_volt_dead_band,
1588        load_bus_voltage_goal
1589      - sqrt(sqr(V_real.l(i)) + sqr(V_imag.l(i)))
1590      - load_bus_volt_dead_band);
1591   
1592      V_load_bus_volt_pen.l =
1593      max(0,
1594      sum(i$bus_penalize_volt_mag_target(i),
1595            load_bus_volt_pen_coeff_1 * V_load_bus_volt_pen_dev.l(i)
1596          + load_bus_volt_pen_coeff_2 * sqr(V_load_bus_volt_pen_dev.l(i))));
1597   
1598      V_shuntSwitching.l(i,bus_s)$numBswitched(i,bus_s) =
1599      abs(V_shunt.l(i,bus_s) - numShuntStepsOn_init(i,bus_s));
1600   
1601      V_shuntSwitchingPenalty.l(i,bus_s)$numBswitched(i,bus_s) =
1602      max(0,
1603      shuntSwitchingPenalty1 * V_shuntSwitching.l(i,bus_s),
1604      shuntSwitchingPenalty2 * (V_shuntSwitching.l(i,bus_s) - shuntSwitchingTolerance));
1605   
1606      V_totalShuntSwitching.l =
1607      max(0,
1608      sum((i,bus_s)$numBswitched(i,bus_s),V_shuntSwitching.l(i,bus_s)));
1609   
1610      V_shuntTotalSwitchingPenalty.l =
1611      max(0,
1612      shuntSwitchingBudgetPenalty * (V_totalShuntSwitching.l - shuntSwitchingBudget));
1613   
1614      V_shuntSwitchingTotalPenalty.l =
1615      max(0,
1616      V_shuntTotalSwitchingPenalty.l +
1617      sum((i,bus_s)$numBswitched(i,bus_s),V_shuntSwitchingPenalty.l(i,bus_s)));
1618   
1619      V_previous_solution_penalty.l = 0;
1620   
1621      V_objcost.l =
1622             V_shuntSwitchingTotalPenalty.l
1623           + V_load_bus_volt_pen.l
1624           + solar_curtail_penalty * sum(i,Solar_p_curtail.l(i))
1625           + demand_response_increase_penalty * sum(i,De_response_Inc_P.l(i))
1626           - demand_response_decrease_penalty * sum(i,De_response_Dec_P.l(i))
1627           + sum(i,V_Lossi.l(i))
1628           + V_previous_solution_penalty.l;
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 31
Cost objective calculations for OPF models
C o m p i l a t i o n


1629   
1630      V_objcosttest.l =
1631             V_objcost.l
1632           + generator_voltage_deviation_penalty
1633               * sum(bus$(sum(gen,status2(gen,bus)) eq 1),  V_artup.l(bus))
1634           + generator_voltage_deviation_penalty
1635               * sum(bus$(sum(gen,status2(gen,bus)) eq 1),  V_artlow.l(bus));
1636   
1638   
1639  * set prior values of distance-penalized variables
1640  * to their current levels.
1641  V_P_prior(gen) = V_P.l(gen);
1642  V_Q_prior(gen) = V_Q.l(gen);
1643  P_S_prior(i) = P_S.l(i);
1644  Q_S_prior(i) = Q_S.l(i);
1645  V_real_prior(i) = V_real.l(i);
1646  V_imag_prior(i) = V_imag.l(i);
1647  Solar_p_curtail_prior(i) = Solar_p_curtail.l(i);
1648  De_response_Inc_P_prior(i) = De_response_Inc_P.l(i);
1649  De_response_Dec_P_prior(i) = De_response_Dec_P.l(i);
1650   
1651  display V_real.l, V_imag.l, Vm;
1652   
1653   
1654  *===== SECTION: COMPUTE START METRICS
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/compute_start_metrics.gms
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 32
compute_start_metrics
C o m p i l a t i o n


      evaluate individual componenets of feasibility and optimality for the start point
1660   
1661  * set these from variable levels
1662      V_P_start(gen) = V_P.l(gen);
1663      V_Q_start(gen) = V_Q.l(gen);
1664      P_S_start(i) = P_S.l(i);
1665      Q_S_start(i) = Q_S.l(i);
1666      V_real_start(i) = V_real.l(i);
1667      V_imag_start(i) = V_imag.l(i);
1668      Solar_p_curtail_start(i) = solar_p_curtail.l(i);
1669      De_response_Dec_P_start(i) = de_response_dec_p.l(i);
1670      De_response_Inc_P_start(i) = de_response_inc_p.l(i);
1671      V_switchedshuntB_start(i)$sum(bus_s$numBswitched(i,bus_s), 1) = V_switchedshuntB.l(i);
1672      V_shunt_start(bus,bus_s) = v_shunt.l(bus,bus_s);
1673      V_P_system_deviation_start = v_p_system_deviation.l;
1674      V_LineIr_start(i,j,c)$(branchstatus(i,j,c)) = V_LineIr.l(i,j,c);
1675      V_LineIr_start(j,i,c)$(branchstatus(i,j,c)) = V_LineIr.l(j,i,c);
1676      V_LineIq_start(i,j,c)$(branchstatus(i,j,c)) = V_LineIq.l(i,j,c);
1677      V_LineIq_start(j,i,c)$(branchstatus(i,j,c)) = V_LineIq.l(j,i,c);
1678   
1679  * compute losses
1680      V_Lossijc_start(i,j,c)$(branchstatus(i,j,c)) =
1681                 g(i,j,c)/( sqr(b(i,j,c))+ sqr(g(i,j,c)) ) * (  sqr(V_LineIr_start(i,j,c))+ sqr(V_LineIq_start(i,j,c)) );
1682      V_Lossi_start(i) = sum((j,c)$(branchstatus(i,j,c)),V_Lossijc_start(i,j,c));
1683   
1684  * compute penalties and objectives
1685      V_load_bus_volt_pen_dev_start(i)$bus_penalize_volt_mag_target(i) = abs(
1686            sqrt(sqr(V_real_start(i)) + sqr(V_imag_start(i)))
1687          - volt_mag_target(i)
1688          - load_bus_volt_dead_band);
1689      V_load_bus_volt_pen_start =
1690          sum(i$bus_penalize_volt_mag_target(i),
1691                load_bus_volt_pen_coeff_1 * V_load_bus_volt_pen_dev_start(i)
1692              + load_bus_volt_pen_coeff_2 * sqr(V_load_bus_volt_pen_dev_start(i)));
1693      V_shuntSwitching_start(i,bus_s)$numBswitched(i,bus_s) =
1694          abs(V_shunt_start(i,bus_s) - numShuntStepsOn_init(i,bus_s));
1695      V_totalShuntSwitching_start =
1696          sum((i,bus_s)$numBswitched(i,bus_s),V_shuntSwitching_start(i,bus_s));
1697      V_shuntSwitchingPenalty_start(i,bus_s)$numBswitched(i,bus_s) = max(0,
1698          shuntSwitchingPenalty1 * V_shuntSwitching_start(i,bus_s),
1699          shuntSwitchingPenalty2 * (V_shuntSwitching_start(i,bus_s) - shuntSwitchingTolerance));
1700      V_shuntTotalSwitchingPenalty_start =
1701          shuntSwitchingBudgetPenalty * max(0, V_totalShuntSwitching_start - shuntSwitchingBudget);
1702      V_shuntSwitchingTotalPenalty_start =
1703            V_shuntTotalSwitchingPenalty_start
1704          + sum((i,bus_s)$numBswitched(i,bus_s),V_shuntSwitchingPenalty_start(i,bus_s));
1705      V_previous_solution_penalty_start =
1706        previous_solution_penalty_2 * (
1707            sum(gen, sqr(V_P_prior(gen) - V_P_start(gen)))
1708          + sum(gen, sqr(V_Q_prior(gen) - V_Q_start(gen)))
1709          + sum(i, sqr(P_S_prior(i) - P_S_start(i)))
1710          + sum(i, sqr(Q_S_prior(i) - Q_S_start(i)))
1711          + sum(i, sqr(V_real_prior(i) - V_real_start(i)))
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 33
compute_start_metrics
C o m p i l a t i o n


1712          + sum(i, sqr(V_imag_prior(i) - V_imag_start(i)))
1713          + sum(i, sqr(Solar_p_curtail_prior(i) - Solar_p_curtail_start(i)))
1714          + sum(i, sqr(De_response_Inc_P_prior(i) - De_response_Inc_P_start(i)))
1715          + sum(i, sqr(De_response_Dec_P_prior(i) - De_response_Dec_P_start(i))));
1716      V_objcost_start =
1717             V_shuntSwitchingTotalPenalty_start
1718           + V_load_bus_volt_pen_start
1719           + solar_curtail_penalty * sum(i,Solar_p_curtail_start(i))
1720           + demand_response_increase_penalty * sum(i,De_response_Inc_P_start(i))
1721           - demand_response_decrease_penalty * sum(i,De_response_Dec_P_start(i))
1722           + sum(i,V_Lossi_start(i))
1723           + V_previous_solution_penalty_start;
1724   
1725  * compute variable bound violations
1726      gen_p_lo_viol_start(gen)$status(gen) =
1727          max(0, pmin(gen) - v_p_start(gen));
1728      gen_p_up_viol_start(gen)$status(gen) =
1729          max(0, v_p_start(gen) - pmax(gen));
1730      gen_q_lo_viol_start(gen)$status(gen) =
1731          max(0, qmin(gen) - v_q_start(gen));
1732      gen_q_up_viol_start(gen)$status(gen) =
1733          max(0, v_q_start(gen) - qmax(gen));
1734      De_response_Inc_P_up_viol_start(bus)$(Pd_respon_location(bus)) =
1735          max(0, de_response_inc_p_start(bus) - Pd_respon_p_up(bus));
1736      De_response_dec_P_lo_viol_start(bus)$(Pd_respon_location(bus)) =
1737          max(0, Pd_respon_p_down(bus) - de_response_dec_p_start(bus));
1738      v_shunt_up_viol_start(bus,bus_s)$numbswitched(bus,bus_s) =
1739          max(0, v_shunt_start(bus,bus_s) - numbswitched(bus,bus_s));
1740   
1741  * compute constraint violations
1742      balance_p_viol_start(i)$(type(i) ne 4) =
1743            sum(gen$(atBus(gen,i) and status(gen)), V_P_start(gen))
1744          - Pd(i)
1745          - De_response_Inc_P_start(i)$Pd_respon_location(i)
1746          - De_response_Dec_P_start(i)$Pd_respon_location(i)
1747          + P_S_start(i)$sum(solarbus,solarlocation(solarbus,i))
1748          - Solar_p_curtail_start(i)$contro_solar_location(i)
1749          - V_real_start(i) *
1750            (  sum((j,c)$(branchstatus(i,j,c)), V_LineIr_start(i,j,c))
1751             + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIr_start(i,j,c)) )
1752          - V_imag_start(i) *
1753            (  sum((j,c)$(branchstatus(i,j,c) ), V_LineIq_start(i,j,c))
1754             + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIq_start(i,j,c)))
1755          - Gs(i) * (sqr(V_real_start(i)) + sqr(V_imag_start(i)));
1756      balance_q_viol_start(i)$(type(i) ne 4) =
1757            sum(gen$(atBus(gen,i) and status(gen)), V_Q_start(gen))
1758          - Qd(i)
1759          - Pd_respon_q_up(i)*De_response_Inc_P_start(i)$Pd_respon_location(i)
1760          - Pd_respon_q_down(i)*De_response_Dec_P_start(i)$Pd_respon_location(i)
1761          + Q_S_start(i)$sum(solarbus,solarlocation(solarbus,i))
1762          + V_real_start(i) *
1763            (  sum((j,c)$(branchstatus(i,j,c) ), V_LineIq_start(i,j,c))
1764             + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIq_start(i,j,c)))
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 34
compute_start_metrics
C o m p i l a t i o n


1765          - V_imag_start(i) *
1766            (  sum((j,c)$(branchstatus(i,j,c) ), V_LineIr_start(i,j,c))
1767             + sum((j,c)$(branchstatus(j,i,c) and not(branchstatus(i,j,c))  ), V_LineIr_start(i,j,c)))
1768          + (Bs(i) + V_switchedShuntB_start(i)$sum(bus_s$numBswitched(i,bus_s), 1)) * (sqr(V_real_start(i)) + sqr(V_imag_start(i)));
1769      p_generator_add_viol_start(gen)$(status(gen) eq 1) =
1770            V_P_start(gen)
1771          - PgSch(gen)
1772          - gen_participation_factor(gen) * V_P_system_deviation_start;
1773      c_I_limit_viol_start(i,j,c)$(branchstatus(i,j,c) or branchstatus(j,i,c)) =
1774  *        max(0,  sqrt(sqr(V_LineIr_start(i,j,c)) + sqr(V_LineIq_start(i,j,c)))
1775  *              - currentrate(i,j,c));
1776  0;
1777  * NOTE: currentrate apparently is not defined and we are not enforcing this constraint
1778      c_V_limit_lo_viol_start(i) =
1779          max(0, minVm(i) - sqrt(sqr(V_real_start(i)) + sqr(V_imag_start(i))));
1780      c_V_limit_up_viol_start(i) =
1781          max(0, sqrt(sqr(V_real_start(i)) + sqr(V_imag_start(i))) - maxVm(i));
1782      v_generator_hardupl_viol_start(i) =
1783          max(0, sqrt(sqr(V_real_start(i)) + sqr(V_imag_start(i))) - 1.15);
1784      v_generator_harddownl_viol_start(i) =
1785          max(0, 0.88 - sqrt(sqr(V_real_start(i)) + sqr(V_imag_start(i))));
1786      v_under_q_up_slack_viol_start(gen)$status(gen) =
1787          sum(i$atbus(gen,i),
1788              min(max(0, vsch(i) - sqrt(sqr(v_real_start(i)) + sqr(v_imag_start(i)))),
1789                  max(0, qmax(gen) - v_q_start(gen))));
1790      v_over_q_lo_slack_viol_start(gen)$status(gen) =
1791          sum(i$atbus(gen,i),
1792              min(max(0, sqrt(sqr(v_real_start(i)) + sqr(v_imag_start(i))) - vsch(i)),
1793                  max(0, v_q_start(gen) - qmin(gen))));
1794   
1795  * compute summaries
1796      p_load_start = sum(i, pd(i));
1797      p_gen_start = sum(gen$status(gen), V_P_start(gen));
1798      p_shunt_start = sum(i, Gs(i) * (sqr(V_real_start(i)) + sqr(V_imag_start(i))));
1799      p_solar_start
1800        = sum(i$sum(solarbus,solarlocation(solarbus,i)), P_S_start(i))
1801        - sum(i$contro_solar_location(i), Solar_p_curtail_start(i));
1802      p_dr_start
1803        = sum(i$Pd_respon_location(i), De_response_Inc_P_start(i))
1804        + sum(i$Pd_respon_location(i), De_response_Dec_P_start(i));
1805      p_imbalance_start
1806        = p_gen_start
1807        - p_load_start
1808        - p_shunt_start
1809        + p_solar_start
1810        - p_dr_start;
1811      sum_loss_start = sum(i,v_lossi_start(i));
1812  *    v_load_bus_volt_pen_start
1813  *    v_totalshuntswitching_start
1814  *    v_shuntswitchingtotalpenalty_start
1815  *    v_previous_solution_penalty_start
1816  *    v_objcost_start
1817      max_gen_p_lo_viol_start = smax(gen$status(gen), gen_p_lo_viol_start(gen));
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 35
compute_start_metrics
C o m p i l a t i o n


1818      max_gen_p_up_viol_start = smax(gen$status(gen), gen_p_up_viol_start(gen));
1819      max_gen_q_lo_viol_start = smax(gen$status(gen), gen_q_lo_viol_start(gen));
1820      max_gen_q_up_viol_start = smax(gen$status(gen), gen_q_up_viol_start(gen));
1821      max_De_response_Inc_P_up_viol_start = smax(bus$Pd_respon_location(bus), de_response_inc_p_up_viol_start(bus));
1822      max_De_response_dec_P_lo_viol_start = smax(bus$Pd_respon_location(bus), de_response_dec_p_lo_viol_start(bus));
1823      max_v_shunt_up_viol_start = smax((bus,bus_s)$numbswitched(bus,bus_s), v_shunt_up_viol_start(bus,bus_s));
1824      max_balance_p_viol_start = smax(i$(type(i) ne 4), abs(balance_p_viol_start(i)));
1825      max_balance_q_viol_start = smax(i$(type(i) ne 4), abs(balance_q_viol_start(i)));
1826      max_p_generator_add_viol_start = smax(gen$(status(gen) eq 1), abs(p_generator_add_viol_start(gen)));
1827      max_c_I_limit_viol_start = smax((i,j,c)$(branchstatus(i,j,c) or branchstatus(j,i,c)), c_i_limit_viol_start(i,j,c));
1828      max_c_V_limit_lo_viol_start = smax(i, c_v_limit_lo_viol_start(i));
1829      max_c_V_limit_up_viol_start = smax(i, c_v_limit_up_viol_start(i));
1830      max_v_generator_hardupl_viol_start = smax(i, v_generator_hardupl_viol_start(i));
1831      max_v_generator_harddownl_viol_start = smax(i, v_generator_harddownl_viol_start(i));
1832      max_v_under_q_up_slack_viol_start = smax(gen$status(gen), v_under_q_up_slack_viol_start(gen));
1833      max_v_over_q_lo_slack_viol_start = smax(gen$status(gen), v_over_q_lo_slack_viol_start(gen));
1834   
1835  *===== SECTION: DISPLAY START METRICS
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/display_start.gms
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 36
display_start
C o m p i l a t i o n


      Display variable values, constraint violations, bound violations, penalties, objectives, and summaries at the start point
1841   
1842  display
1843      "display start"
1844  * data
1845      Pd
1846      Qd
1847  * control variables
1848      V_P_start
1849      V_Q_start
1850      P_S_start
1851      Q_S_start
1852      V_real_start
1853      V_imag_start
1854      Solar_p_curtail_start
1855      De_response_Dec_P_start
1856      De_response_Inc_P_start
1857      V_switchedshuntB_start
1858      V_shunt_start
1859      V_P_system_deviation_start
1860  * current
1861      V_LineIr_start
1862      V_LineIq_start
1863  * losses
1864      V_Lossijc_start
1865      V_Lossi_start
1866  * penalties and objectives
1867      V_load_bus_volt_pen_dev_start
1868      V_load_bus_volt_pen_start
1869      V_shuntSwitching_start
1870      V_totalShuntSwitching_start
1871      V_shuntSwitchingPenalty_start
1872      V_shuntTotalSwitchingPenalty_start
1873      V_shuntSwitchingTotalPenalty_start
1874      V_previous_solution_penalty_start
1875      V_objcost_start
1876  * variable bound violations
1877      gen_p_lo_viol_start
1878      gen_p_up_viol_start
1879      gen_q_lo_viol_start
1880      gen_q_up_viol_start
1881      De_response_Inc_P_up_viol_start
1882      De_response_dec_P_lo_viol_start
1883      v_shunt_up_viol_start
1884  * constraint violations
1885      balance_p_viol_start
1886      balance_q_viol_start
1887      p_generator_add_viol_start
1888      c_I_limit_viol_start
1889      c_V_limit_lo_viol_start
1890      c_V_limit_up_viol_start
1891      v_generator_hardupl_viol_start
1892      v_generator_harddownl_viol_start
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 37
display_start
C o m p i l a t i o n


1893      v_under_q_up_slack_viol_start
1894      v_over_q_lo_slack_viol_start
1895  * summaries
1896      "display start summary"
1897      p_load_start
1898      p_gen_start
1899      p_shunt_start
1900      sum_loss_start
1901      v_load_bus_volt_pen_start
1902      v_totalshuntswitching_start
1903      v_shuntswitchingtotalpenalty_start
1904      v_previous_solution_penalty_start
1905      v_objcost_start
1906      max_gen_p_lo_viol_start
1907      max_gen_p_up_viol_start
1908      max_gen_q_lo_viol_start
1909      max_gen_q_up_viol_start
1910      max_De_response_Inc_P_up_viol_start
1911      max_De_response_dec_P_lo_viol_start
1912      max_v_shunt_up_viol_start
1913      max_balance_p_viol_start
1914      max_balance_q_viol_start
1915      max_p_generator_add_viol_start
1916      max_c_I_limit_viol_start
1917      max_c_V_limit_lo_viol_start
1918      max_c_V_limit_up_viol_start
1919      max_v_generator_hardupl_viol_start
1920      max_v_generator_harddownl_viol_start
1921      max_v_under_q_up_slack_viol_start
1922      max_v_over_q_lo_slack_viol_start;
1923   
1925   
1926  put report_file;
1927  report_file.ap = 1;
1928  put
1929      'start point summary' /
1930      'p_load'
1931      p_load_start /
1932      'p_gen'
1933      p_gen_start /
1934      'p_shunt'
1935      p_shunt_start /
1936      'p_solar'
1937      p_solar_start /
1938      'p_dr'
1939      p_dr_start /
1940      'p_imbalance'
1941      p_imbalance_start /
1942      'sum_loss'
1943      sum_loss_start /
1944      'v_load_bus_volt_pen'
1945      v_load_bus_volt_pen_start /
1946      'v_totalshuntswitching'
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 38
display_start
C o m p i l a t i o n


1947      v_totalshuntswitching_start /
1948      'v_shuntswitchingtotalpenalty'
1949      v_shuntswitchingtotalpenalty_start /
1950      'v_previous_solution_penalty'
1951      v_previous_solution_penalty_start /
1952      'v_objcost'
1953      v_objcost_start /
1954      'max_gen_p_lo_viol'
1955      max_gen_p_lo_viol_start /
1956      'max_gen_p_up_viol'
1957      max_gen_p_up_viol_start /
1958      'max_gen_q_lo_viol'
1959      max_gen_q_lo_viol_start /
1960      'max_gen_q_up_viol'
1961      max_gen_q_up_viol_start /
1962      'max_De_response_Inc_P_up_viol'
1963      max_De_response_Inc_P_up_viol_start /
1964      'max_De_response_dec_P_lo_viol'
1965      max_De_response_dec_P_lo_viol_start /
1966      'max_v_shunt_up_viol'
1967      max_v_shunt_up_viol_start /
1968      'max_balance_p_viol'
1969      max_balance_p_viol_start /
1970      'max_balance_q_viol'
1971      max_balance_q_viol_start /
1972      'max_p_generator_add_viol'
1973      max_p_generator_add_viol_start /
1974      'max_c_I_limit_viol'
1975      max_c_I_limit_viol_start /
1976      'max_c_V_limit_lo_viol'
1977      max_c_V_limit_lo_viol_start /
1978      'max_c_V_limit_up_viol'
1979      max_c_V_limit_up_viol_start /
1980      'max_v_generator_hardupl_viol'
1981      max_v_generator_hardupl_viol_start /
1982      'max_v_generator_harddownl_viol'
1983      max_v_generator_harddownl_viol_start /
1984      'max_v_under_q_up_slack_viol'
1985      max_v_under_q_up_slack_viol_start /
1986      'max_v_over_q_lo_slack_viol'
1987      max_v_over_q_lo_slack_viol_start /;
1988  putclose;
1989   
1990  *===== SECTION: MODEL OPTIONS AND SOLVE
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/solve_procedure.gms
1993   
1994  *nlpfile knitroset.opt
1995  option  nlp = KNITRO;
1996  option  rminlp = KNITRO;
1997  option  minlp = knitro;
1998  option SysOut = On;
1999  *feastol =1e-7
2000   
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 39
display_start
C o m p i l a t i o n


2017   
2034   
2035  acopf.optfile=1;
2036  acopf.optca = 0;
2037  *acopf.optcr = 1e-8;
2038  acopf.reslim = 60;
2039  acopf.holdfixed = 1;
2040  acopf_check.optfile=1;
2041  acopf_check.optca = 0;
2042  *acopf_check.optcr = 1e-8;
2043  acopf_check.reslim = 60;
2044  acopf_check.holdfixed = 1;
2045   
      * TODO JH remove this solve
      * initial solve with penalty model
      * we seem to have significant difficulty solving a minlp problem,
      * at some time steps, even if we provide a feasible solution.
      * this is a problem with the knitro solver.
      *display "foo", numShuntStepsOn_init;
      V_shunt.l(bus,bus_s)$numBswitched(bus,bus_s) = numShuntStepsOn_init(bus,bus_s);
      solve acopf_check min V_objcosttest using rminlp;
      V_shunt.fx(bus,bus_s)$numBswitched(bus,bus_s) = round(V_shunt.l(bus,bus_s));
      solve acopf_check min V_objcosttest using rminlp;
      *solve acopf_check min V_objcosttest using minlp;
      V_shunt.lo(bus,bus_s)$numBswitched(bus,bus_s) = 0;
      V_shunt.up(bus,bus_s)$numBswitched(bus,bus_s) = numBswitched(bus,bus_s);
      *solve acopf_check min V_objcosttest using minlp;
      * PHASE 3:
      * set voltage penalty parameters to 0
      * fix voltage magnitude deviations to 0 for buses already achieving 0 deviation
      * fix reactive power (to what value?) for buses with nonzero deviation
      *   specifically,
      *     if deviation > 0 fix q to qlo
      *     if deviation < 0 fix q to qup
      *   what if deviation is nonzero but q is not at a bound already?
      *   this procedure risks infeasibility. Instead we could do:
      *     if deviation <> fix q to q.l
      *   or
      *     if deviation > 0 require q <= q.l
      *     if deviation < 0 require q >= q.l
      parameter
          sstat "final solver status"
          mstat "final model status"
          infeas "Number of infeasibilities from model solve"
          sumInf "SUM OF infeasibility";
      sstat=acopf_check.solvestat;
      mstat=acopf_check.modelstat;
      infeas = acopf_check.numInfes;
      sumInf = acopf_check.sumInfes;
2084   
2085  * TODO JH - feasibility problems with these solves
2086  * need to fix this
2087  *$ontext
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 40
display_start
C o m p i l a t i o n


2088   
2089  *==== SECTION: Solution Analysis
2090  * See if model is solved
2091  parameter
2092      sstat "final solver status"
2093      mstat "final model status"
2094      infeas "Number of infeasibilities from model solve"
2095      sumInf "SUM OF infeasibility";
2096   
2097  * for test to evaluate quality of start point
2098  * remove these lines for a real run
2099  *option rminlp=examiner;
2100  *solve acopf min V_objcost using rminlp;
2101  *$exit
2102   
2103  *** solve the model (phase 1)
2104  solve acopf min V_objcost using rminlp;
2105  **$exit
2106  **OPTION NLP=GAMSCHK;
2107  **solve acopf min V_objcost using rminlp;
2108  *
2109  *
2110  *
2111  infeas = acopf.numInfes;
2112  sumInf = acopf.sumInfes;
2113  sstat=acopf.solvestat;
2114  mstat=acopf.modelstat;
2115  *display infeas,sumInf;
2116   
2117  if(infeas ne 0,
2118  *        solve phase 2
2119  *        what is the best shunt starting point?
2120  *        does it matter?
2121           display  V_shunt.l;
2122           V_shunt.l(bus,bus_s)$numBswitched(bus,bus_s) = numShuntStepsOn_init(bus,bus_s);
2123           solve acopf_check min V_objcosttest using rminlp;
2124  *         if(acopf_check.modelstat ne 2 or acopf_check.modelstat ne 7,
2125  *            abort "failed to solve acopf_check with relaxed shunt settings";);
2127           display  V_shunt.l;
2128  *         if(acopf_check.modelstat ne 2 or acopf_check.modelstat ne 7,
2129  *            abort "failed to solve scopf_check after fixing shunts";);
2130           infeas = acopf_check.numInfes;
2131           sstat=acopf_check.solvestat;
2132           mstat=acopf_check.modelstat;
2133           saturaup(i)=V_artup.l(i);
2134           saturalow(i)=V_artlow.l(i);
2135  *        solve phase 3
2136           V_Q.fx(gen)$((sum(bus$atBus(gen,bus),saturaup(bus)) ne 0) or (sum(bus$atBus(gen,bus),saturalow(bus)) ne 0)) =V_Q.l(gen);
2137  *        V_Q.fx(gen)$(genQtemp(gen) ne 0 )=genQtemp(gen);
2138  *         acopf.optfile=2;
2139           solve acopf min V_objcost using rminlp;
2140  *         if(acopf.modelstat ne 2,
2141  *            abort "failed to solve acopf after fixing V at saturated buses";);
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 41
display_start
C o m p i l a t i o n


2142           infeas = acopf.numInfes;
2143           sstat=acopf.solvestat;
2144           mstat=acopf.modelstat;
2145  *        solve acopf_resolve min V_objcosttest using rminlp;
2146  );
2147   
2148  *$batinclude "%filepath%objective_voltage_stability_addterm.gms" obj demandbids
2149   
2150  * TODO - need to fix above solves
2151  *$offtext
2152   
2153  *while((infeas ne 0),
2154  *   voltageran_low=voltageran_low-step_leng;
2155  *   voltageran_high=voltageran_high+step_leng;
2156  *   display voltageran_low,voltageran_high;
2157  *   solve acopf min V_objcost using minlp;
2158  *);
2160   
2161   
2162   
2163  *===== SECTION: SOLUTION ANALYSIS
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/solution_analysis.gms
2165   
2166  * Declaration needs to be made outside loop
2167  set
2168      lines_at_limit(i,j,c) "lines at their bound"
2169  ;
2170  parameters
2171      total_cost "Cost of objective function"
2172      LMP(bus) "Locational marginal price"
2173      LineSP(i,j,c) "Marginal price of active power on line (i,j,c)"
2174      shuntB(i)
2175      TotalLoss         " Total Loss of all the lines"
2176      TotalSwitches "number of shunt switches used"
2177      RMSVoltageDeviation "root mean square of load bus voltage deviations"
2178      AverageLoadBusVoltageDeviation "average of load bus voltage deviations"
2179      VoltageDevNongen(bus) "voltage deviation in percentage"
2180      vmgen(gen) "generator voltage magnitude"
2181      vmgenBus(bus) "generator voltage magnitude at bus, consider multiple gen at same bus"
2182      vmnongen(bus) "nongenerator voltage magnitude"
2183      Totalvgendev "total gen voltage deviation from schedule"
2184      Totalvnongendev "total nongen voltage deviation from schedule"
2185      genbusid(gen)
2186      solarQupperlimit(bus)
2187      solarQlowerlimit(bus)
2188  ;
2189   
2190      TotalLoss=sum(i,V_Lossi.l(i));
2191  *     TotalLoss=0;
2192      TotalSwitches = sum((i,bus_s)$numBswitched(i,bus_s),abs(V_shunt.l(i,bus_s) - numShuntStepsOn_init(i,bus_s)));
2193  *    RMSVoltageDeviation=sqrt(sum(bus$load(bus), sqr(load_bus_voltage_goal - sqrt(sqr(V_real.l(bus)) + sqr(V_imag.l(bus))))) / max(sum(bus$load(bus),1),1));
2194      AverageLoadBusVoltageDeviation = sum(bus$load(bus), abs(load_bus_voltage_goal - sqrt(sqr(V_real.l(bus)) + sqr(V_imag.l(bus))))) / max(sum(bus$load(bus),1),1);
2195      VoltageDevNongen(bus)$(bus_penalize_volt_mag_target(bus) and type(bus) eq 1)=  load_bus_voltage_goal - sqrt(sqr(V_real.l(bus)) + sqr(V_imag.l(bus)));
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 42
display_start
C o m p i l a t i o n


2196  *calculate the total voltage deviation of generator bus and nongenerator bus
2197      Totalvnongendev= sum(bus$load(bus), abs(load_bus_voltage_goal - sqrt(sqr(V_real.l(bus)) + sqr(V_imag.l(bus)))));
2198      Totalvgendev= sum(bus$isGen(bus), abs(Vsch(bus) - sqrt(sqr(V_real.l(bus)) + sqr(V_imag.l(bus)))));
2199   
2200   
2201   
2202   
2203  *    Totalvgendev
2204   
2205   
2206  display  TotalLoss, infeas;
2207   
2208  ** switched shunt solution values
2209  parameter
2210    numShuntStepsOn_final(bus,bus_s)
2211    switched_shunt_susceptance_final(bus,bus_s);
2212  set
2213    switched_shunt_susceptance_keys(bus,bus_s);
2214  switched_shunt_susceptance_keys(bus,bus_s) = yes$numBswitched(bus,bus_s);
2215  numShuntStepsOn_final(i,bus_s)$numBswitched(i,bus_s) = V_shunt.l(i,bus_s);
2216  switched_shunt_susceptance_final(bus,bus_s)$numBswitched(bus,bus_s) = V_shunt.l(bus,bus_s) * Bswitched(bus,bus_s);
2217  execute_unload 'switched_shunt_current.gdx', numShuntStepsOn_final=numShuntStepsOn;
2218  *display switched_shunt_susceptance_keys;
2219  if(infeas eq 0,
2220  * Final Objective function value
2221      total_cost = V_objcost.l;
2222  * Generator real power solution
2223      Pg(gen) = V_P.l(gen);
2224  * Generator reactive power solution
2225      Qg(gen) = V_Q.l(gen);
2226  * Voltage magnitude solution
2227      Vm(bus) = sqrt(sqr(V_real.l(bus)) + sqr(V_imag.l(bus)));
2228      vmgen(gen) =sum(bus$(atBus(gen,bus)), Vm(bus));
2229      vmgenBus(bus)$(sum(gen,atBus(gen,bus)) > 0)= Vm(bus);
2230      vmnongen(bus)=Vm(bus)$(load(bus))
2231      display Vm;
2232  * Voltage angle solution
2233  *    Va(bus) = arctan2(V_imag.l(bus),V_real.l(bus)) * 180 / pi;
2234      loop(bus,
2235      if(V_real.l(bus) > 0,
2236          Va(bus) = arctan(V_imag.l(bus)/V_real.l(bus)) * 180/pi;
2237      else
2238          Va(bus) = arctan(V_imag.l(bus)/V_real.l(bus)) * 180/pi + 180;
2239      );
2240      );
2241  * Bus shunt solution
2242      shuntB(i) = sum(bus_s$numBswitched(i,bus_s), V_shunt.l(i,bus_s)*Bswitched(i,bus_s));
2243  * Locational marginal price of bus at time t
2244  *    LMP(bus) = c_BalanceP_nosolar.m(bus);
2245   
2246  * Marginal for active power on a line
2247  *    LineSP(i,j,c)$branchstatus(i,j,c) = c_I_Limit.m(i,j,c);
2248  *    LineSP(j,i,c)$branchstatus(i,j,c) = c_I_Limit.m(j,i,c);
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 43
display_start
C o m p i l a t i o n


2249   
2250  * Find which lines are at their limits
2251  *lines_at_limit(i,j,c)$(branchstatus(i,j,c) or branchstatus(j,i,c)) = yes$
2252  *     (sqr(currentrate(i,j,c)) - sqr(V_LineIr.L(i,j,c)) - sqr(V_LineIq.L(i,j,c)) le 1e-4);
2253  *display lines_at_limit;
2254   
2255  *==== SECTION: SOLUTION SAVE
INCLUDE    /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/solution_save.gms
2257  *file filename;
2258  *put_utility filename 'Exec' / 'results_' i.tl:0 '.gdx';
2259   
2260   
2261   
2262   
2263   
2264   
2265  *put_utilities  'gdxout' / 'out' Nb:0:0;
2266   
2268  );
2269   
2270  display Pmax, Pmin,ratio,switchedShuntB_init, V_dem_Load.l, V_switchedshuntB.l,V_P.l,V_P.up, V_P.lo, V_Q.l, V_Q.up, V_Q.lo, Qmax, Qmin;

**** LIST OF STRAY NAMES - CHECK DECLARATIONS FOR SPURIOUS COMMAS
**** STRAY NAME nongen OF TYPE SET  
**** STRAY NAME fuel_t OF TYPE SET  
**** STRAY NAME fuel_s OF TYPE SET  
**** STRAY NAME prime_mover OF TYPE SET  
**** STRAY NAME gen_s OF TYPE SET  
**** STRAY NAME interface_t OF TYPE SET  
**** STRAY NAME Nb OF TYPE PARAM
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 44
display_start
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/iv_acopf_reformulation_lop_adj.gms
     2      147 BATINCLUDE     1     151  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/extract_data_SunLamp_newformulation_cle.gms
     3      204 GDXIN          2      57  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/7bus.gdx
     4      220 GDXIN          2      73  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/solarbus2.gdx
     5      307 GDXIN          2     164  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/geni_st.gdx
     6      311 GDXIN          2     168  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/demand_response.gdx
     7      315 GDXIN          2     172  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/demandresponseload.gdx
     8      319 GDXIN          2     176  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/demandresponseprice.gdx
     9      366 GDXIN          2     244  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/solarlocation.gdx
    10      411 GDXIN          2     289  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/UC_OPF_load_elwi_BV.gdx
    11      449 GDXIN          2     327  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/geni_p.gdx
    12      465 GDXIN          2     343  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/UC_OPF_load_elwi_Q.gdx
    13      528 IF EXIST       1     153  /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/switched_shunt_current.gdx
    14      531 INCLUDE        1     158  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/params_from_user.gms
    15      562 INCLUDE        1     161  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/model_params.gms
    16      794 INCLUDE        1     164  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/data_manipulation.gms
    17      801 IF EXIST      16       7  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/switched_shunt_current.gdx
    18      849 INCLUDE        1     167  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/var_declaration.gms
    19      909 INCLUDE        1     170  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/eqn_declaration.gms
    20      956 INCLUDE        1     173  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/eqn_definition.gms
    21     1343 INCLUDE        1     176  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/mod_definition.gms
    22     1398 INCLUDE        1     179  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/var_bounds.gms
    23     1482 INCLUDE        1     182  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/start_point.gms
    24     1485 BATINCLUDE    23       3  ../home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/ic_iv/preset.gms
    25     1504 BATINCLUDE    23      12  ../home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/ic_iv/given.gms
    26     1527 INCLUDE       25      23  .../home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/ic_iv/calc_derived_vars.gms
    27     1655 INCLUDE        1     184  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/compute_start_metrics.gms
    28     1836 INCLUDE        1     187  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/display_start.gms
    29     1992 INCLUDE        1     193  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/solve_procedure.gms
    30     2164 INCLUDE        1     199  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/solution_analysis.gms
    31     2256 INCLUDE        1     202  ./home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/solution_save.gms


COMPILATION TIME     =        0.015 SECONDS      3 MB  24.9.1 r63795 LEX-LEG
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 45
display_start
E x e c u t i o n


----    329 PARAMETER demLoad  demandresponse load

1 2.108907E-4,    2 4.217813E-4,    3 6.326720E-4,    4 8.435626E-4,    5       0.001


----    329 PARAMETER demPrice  demandresponse price

1 0.036,    2 0.071,    3 0.107,    4 0.142,    5 0.178


----    329 PARAMETER demLocation  location of demand response

18 1.000


----    329 PARAMETER demSlope  slope

2 -168.611,    3 -168.611,    4 -168.611,    5 -168.611


----    809 PARAMETER Bswitched  susceptance of switched shunts

                      ( ALL       0.000 )


----   1396 PARAMETER Pmax  gen maximum real power output

1 1.089


----   1396 PARAMETER Pmin  gen minimum real power output

1 0.206


----   1396 PARAMETER Pd  bus real power demand

7  0.071,    18 0.113,    57 0.159


----   1396 PARAMETER Va  bus voltage angle

                      ( ALL       0.000 )


----   1396 PARAMETER Vm  bus voltage magnitude

7   1.000,    13  1.000,    18  1.000,    149 1.000,    54  1.000,    57  1.000,    56  1.000

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 46
display_start
E x e c u t i o n


----   1396 PARAMETER Qg  gen reactive power output

1 0.085


----   1396 PARAMETER Gs  bus shunt conductance

                      ( ALL       0.000 )


----   1396 PARAMETER B  line susceptance

                  1

7  .13      -46.943
7  .149     -33.624
13 .7       -46.943
13 .18      -28.548
13 .54      -72.445
18 .13      -28.548
149.7       -33.624
54 .13      -72.445
54 .57      -67.110
54 .56      -46.943
57 .54      -67.110
56 .54      -46.943


----   1396 PARAMETER bc  line charging susceptance

                  1

7  .13  1.891335E-7
7  .149 2.647869E-7
13 .7   1.891335E-7
13 .18  3.120704E-7
13 .54  1.229368E-7
18 .13  3.120704E-7
149.7   2.647869E-7
54 .13  1.229368E-7
54 .57  1.323935E-7
54 .56  1.891335E-7
57 .54  1.323935E-7
56 .54  1.891335E-7


----   1651 VARIABLE V_real.L  Real part of bus voltage

7   1.000,    13  1.000,    18  1.000,    149 1.000,    54  1.000,    57  1.000,    56  1.000

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 47
display_start
E x e c u t i o n


----   1651 VARIABLE V_imag.L  Imaginary part of bus voltage

                      ( ALL       0.000 )


----   1651 PARAMETER Vm  bus voltage magnitude

7   1.000,    13  1.000,    18  1.000,    149 1.000,    54  1.000,    57  1.000,    56  1.000


----   1843 display start

----   1843 PARAMETER Pd  bus real power demand

7  0.071,    18 0.113,    57 0.159


----   1843 PARAMETER Qd  bus reactive power demand

7  0.023,    18 0.025,    57 0.045


----   1843 PARAMETER V_P_start  

1 0.400


----   1843 PARAMETER V_Q_start  

1 0.085


----   1843 PARAMETER P_S_start  

                      ( ALL       0.000 )


----   1843 PARAMETER Q_S_start  

                      ( ALL       0.000 )


----   1843 PARAMETER V_real_start  

7   1.000,    13  1.000,    18  1.000,    149 1.000,    54  1.000,    57  1.000,    56  1.000


----   1843 PARAMETER V_imag_start  

                      ( ALL       0.000 )

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 48
display_start
E x e c u t i o n


----   1843 PARAMETER Solar_p_curtail_start  

                      ( ALL       0.000 )


----   1843 PARAMETER De_response_Dec_P_start  

                      ( ALL       0.000 )


----   1843 PARAMETER De_response_Inc_P_start  

                      ( ALL       0.000 )


----   1843 PARAMETER V_switchedshuntB_start  

                      ( ALL       0.000 )


----   1843 PARAMETER V_shunt_start  

                      ( ALL       0.000 )


----   1843 PARAMETER V_P_system_deviation_start =        0.000  

----   1843 PARAMETER V_LineIr_start  

                      ( ALL       0.000 )


----   1843 PARAMETER V_LineIq_start  

                  1

7  .13  9.456675E-8
7  .149 1.323935E-7
13 .7   9.456675E-8
13 .18  1.560352E-7
13 .54  6.146840E-8
18 .13  1.560352E-7
149.7   1.323935E-7
54 .13  6.146840E-8
54 .57  6.619675E-8
54 .56  9.456675E-8
57 .54  6.619675E-8
56 .54  9.456675E-8

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 49
display_start
E x e c u t i o n


----   1843 PARAMETER V_Lossijc_start  

                 1

7  .13 7.51201E-17
13 .18 3.35988E-16
13 .54 2.04032E-17
149.7  2.05499E-16
54 .57 2.58539E-17
54 .56 7.51201E-17


----   1843 PARAMETER V_Lossi_start  

7   7.51201E-17,    13  3.56392E-16,    149 2.05499E-16,    54  1.00974E-16


----   1843 PARAMETER V_load_bus_volt_pen_dev_start  

7  0.010,    18 0.010,    57 0.010


----   1843 PARAMETER V_load_bus_volt_pen_start =        0.030  

----   1843 PARAMETER V_shuntSwitching_start  

                      ( ALL       0.000 )


----   1843 PARAMETER V_totalShuntSwitching_start =        0.000  

----   1843 PARAMETER V_shuntSwitchingPenalty_start  

                      ( ALL       0.000 )


----   1843 PARAMETER V_shuntTotalSwitchingPenalty_start =        0.000  
            PARAMETER V_shuntSwitchingTotalPenalty_start =        0.000  
            PARAMETER V_previous_solution_penalty_start =        0.000  
            PARAMETER V_objcost_start      =        0.030  

----   1843 PARAMETER gen_p_lo_viol_start  

                      ( ALL       0.000 )


----   1843 PARAMETER gen_p_up_viol_start  

                      ( ALL       0.000 )


----   1843 PARAMETER gen_q_lo_viol_start  

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 50
display_start
E x e c u t i o n


                      ( ALL       0.000 )


----   1843 PARAMETER gen_q_up_viol_start  

                      ( ALL       0.000 )


----   1843 PARAMETER De_response_Inc_P_up_viol_start  

                      ( ALL       0.000 )


----   1843 PARAMETER De_response_dec_P_lo_viol_start  

                      ( ALL       0.000 )


----   1843 PARAMETER v_shunt_up_viol_start  

                      ( ALL       0.000 )


----   1843 PARAMETER balance_p_viol_start  

7   -0.071,    18  -0.113,    149  0.400,    57  -0.159


----   1843 PARAMETER balance_q_viol_start  

7        -0.023,    13  3.120703E-7,    18       -0.025,    149       0.085,    54  2.222319E-7,    57       -0.045,    56  9.456675E-8


----   1843 PARAMETER p_generator_add_viol_start  

                      ( ALL       0.000 )


----   1843 PARAMETER c_I_limit_viol_start  

                      ( ALL       0.000 )


----   1843 PARAMETER c_V_limit_lo_viol_start  

                      ( ALL       0.000 )


----   1843 PARAMETER c_V_limit_up_viol_start  

                      ( ALL       0.000 )

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 51
display_start
E x e c u t i o n


----   1843 PARAMETER v_generator_hardupl_viol_start  

                      ( ALL       0.000 )


----   1843 PARAMETER v_generator_harddownl_viol_start  

                      ( ALL       0.000 )


----   1843 PARAMETER v_under_q_up_slack_viol_start  

                      ( ALL       0.000 )


----   1843 PARAMETER v_over_q_lo_slack_viol_start  

                      ( ALL       0.000 )


----   1843 display start summary
            PARAMETER p_load_start         =        0.343  
            PARAMETER p_gen_start          =        0.400  
            PARAMETER p_shunt_start        =        0.000  
            PARAMETER sum_loss_start       =  7.37984E-16  
            PARAMETER V_load_bus_volt_pen_start =        0.030  
            PARAMETER V_totalShuntSwitching_start =        0.000  
            PARAMETER V_shuntSwitchingTotalPenalty_start =        0.000  
            PARAMETER V_previous_solution_penalty_start =        0.000  
            PARAMETER V_objcost_start      =        0.030  
            PARAMETER max_gen_p_lo_viol_start =        0.000  
            PARAMETER max_gen_p_up_viol_start =        0.000  
            PARAMETER max_gen_q_lo_viol_start =        0.000  
            PARAMETER max_gen_q_up_viol_start =        0.000  
            PARAMETER max_De_response_Inc_P_up_viol_start =         -INF  
            PARAMETER max_De_response_dec_P_lo_viol_start =         -INF  
            PARAMETER max_v_shunt_up_viol_start =         -INF  
            PARAMETER max_balance_p_viol_start =        0.400  
            PARAMETER max_balance_q_viol_start =        0.085  
            PARAMETER max_p_generator_add_viol_start =        0.000  
            PARAMETER max_c_I_limit_viol_start =        0.000  
            PARAMETER max_c_V_limit_lo_viol_start =        0.000  
            PARAMETER max_c_V_limit_up_viol_start =        0.000  
            PARAMETER max_v_generator_hardupl_viol_start =        0.000  
            PARAMETER max_v_generator_harddownl_viol_start =        0.000  
            PARAMETER max_v_under_q_up_slack_viol_start =        0.000  
            PARAMETER max_v_over_q_lo_slack_viol_start =        0.000  

**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 52
display_start
E x e c u t i o n


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 53
display_start
E x e c u t i o n


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET


**** PUT ERROR FOR FILE report_file AT LINE 1928: NOT ENOUGH SPACE FOR E-FORMAT - RESET

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 54
display_start
Equation Listing    SOLVE acopf Using RMINLP From line 2104


---- c_LineIrij  =E=  Real current flowing from bus i into bus j along line c

c_LineIrij(7,13,1)..  - 22.9257641921397*V_real(7) + 22.9257641921397*V_real(13) - 46.9432313464813*V_imag(7) + 46.943231441048*V_imag(13) + V_LineIr(7,13,1) =E= 0 ; (LHS = 0)
     
c_LineIrij(13,18,1)..  - 13.9206924031352*V_real(13) + 13.9206924031352*V_real(18) - 28.5475067286551*V_imag(13) + 28.5475068846903*V_imag(18) + V_LineIr(13,18,1) =E= 0 ; (LHS = 0)
     
c_LineIrij(13,54,1)..  - 34.9288486416559*V_real(13) + 34.9288486416559*V_real(54) - 72.4450193434475*V_imag(13) + 72.4450194049159*V_imag(54) + V_LineIr(13,54,1) =E= 0 ; (LHS = 0)
     
REMAINING 3 ENTRIES SKIPPED


---- c_LineIrji  =E=  Real  current flowing from bus j into bus i along line c

c_LineIrji(7,13,1)..  22.9257641921397*V_real(7) - 22.9257641921397*V_real(13) + 46.943231441048*V_imag(7) - 46.9432313464813*V_imag(13) + V_LineIr(13,7,1) =E= 0 ; (LHS = 0)
     
c_LineIrji(13,18,1)..  13.9206924031352*V_real(13) - 13.9206924031352*V_real(18) + 28.5475068846903*V_imag(13) - 28.5475067286551*V_imag(18) + V_LineIr(18,13,1) =E= 0 ; (LHS = 0)
     
c_LineIrji(13,54,1)..  34.9288486416559*V_real(13) - 34.9288486416559*V_real(54) + 72.4450194049159*V_imag(13) - 72.4450193434475*V_imag(54) + V_LineIr(54,13,1) =E= 0 ; (LHS = 0)
     
REMAINING 3 ENTRIES SKIPPED


---- c_LineIqij  =E=  Reactive current  flowing from bus i into bus j along line c

c_LineIqij(7,13,1)..  46.9432313464813*V_real(7) - 46.943231441048*V_real(13) - 22.9257641921397*V_imag(7) + 22.9257641921397*V_imag(13) + V_LineIq(7,13,1) =E= 0 ; (LHS = 0)
     
c_LineIqij(13,18,1)..  28.5475067286551*V_real(13) - 28.5475068846903*V_real(18) - 13.9206924031352*V_imag(13) + 13.9206924031352*V_imag(18) + V_LineIq(13,18,1) =E= 0 ; (LHS = 0)
     
c_LineIqij(13,54,1)..  72.4450193434475*V_real(13) - 72.4450194049159*V_real(54) - 34.9288486416559*V_imag(13) + 34.9288486416559*V_imag(54) + V_LineIq(13,54,1) =E= 0 ; (LHS = 0)
     
REMAINING 3 ENTRIES SKIPPED


---- c_LineIqji  =E=  Reactive current flowing from bus j into bus i along line c

c_LineIqji(7,13,1)..  - 46.943231441048*V_real(7) + 46.9432313464813*V_real(13) + 22.9257641921397*V_imag(7) - 22.9257641921397*V_imag(13) + V_LineIq(13,7,1) =E= 0 ; (LHS = 0)
     
c_LineIqji(13,18,1)..  - 28.5475068846903*V_real(13) + 28.5475067286551*V_real(18) + 13.9206924031352*V_imag(13) - 13.9206924031352*V_imag(18) + V_LineIq(18,13,1) =E= 0 ; (LHS = 0)
     
c_LineIqji(13,54,1)..  - 72.4450194049159*V_real(13) + 72.4450193434475*V_real(54) + 34.9288486416559*V_imag(13) - 34.9288486416559*V_imag(54) + V_LineIq(54,13,1) =E= 0 ; (LHS = 0)
     
REMAINING 3 ENTRIES SKIPPED


---- c_BalanceP_nosolar  =E=  Balance of real power for bus without solar

c_BalanceP_nosolar(7)..  (0)*V_real(7) - (2.26960203519866E-7)*V_imag(7) - (1)*V_LineIr(7,13,1) - (1)*V_LineIr(7,149,1) + (0)*V_LineIq(7,13,1) + (0)*V_LineIq(7,149,1) + V_p_over(7) - V_p_under(7) =E= 0.0707451959526 ;
     
      (LHS = 0, INFES = 0.0707451959526 ****)
     
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 55
display_start
Equation Listing    SOLVE acopf Using RMINLP From line 2104


     c_BalanceP_nosolar  =E=  Balance of real power for bus without solar

c_BalanceP_nosolar(18)..  (0)*V_real(18) - (1.56035198983773E-7)*V_imag(18) - (1)*V_LineIr(18,13,1) + (0)*V_LineIq(18,13,1) + V_p_over(18) - V_p_under(18) + V_dem_Load(2) + V_dem_Load(3) + V_dem_Load(4) + V_dem_Load(5) =E= 0.113395450071744 ;
     
      (LHS = 0, INFES = 0.113395450071744 ****)
     
c_BalanceP_nosolar(149)..  V_P(1) + (0)*V_real(149) - (1)*V_LineIr(149,7,1) + V_p_over(149) - V_p_under(149) =E= 0 ; (LHS = 0.4, INFES = 0.4 ****)
     
REMAINING 2 ENTRIES SKIPPED


---- c_BalanceP_solar  =E=  Balance of real power for bus with solar

c_BalanceP_solar(13)..  P_S(13) + (0)*V_real(13) - (3.12070348229554E-7)*V_imag(13) - (1)*V_LineIr(13,7,1) - (1)*V_LineIr(13,18,1) - (1)*V_LineIr(13,54,1) + (0)*V_LineIq(13,7,1) + (0)*V_LineIq(13,18,1) + (0)*V_LineIq(13,54,1) + V_p_over(13)
     
      - V_p_under(13) =E= 0 ; (LHS = 0.03, INFES = 0.03 ****)
     
c_BalanceP_solar(57)..  P_S(57) + (0)*V_real(57) - (6.61967476389691E-8)*V_imag(57) - (1)*V_LineIr(57,54,1) + (0)*V_LineIq(57,54,1) + V_p_over(57) - V_p_under(57) =E= 0.1585704061908 ; (LHS = 0.02, INFES = 0.1385704061908 ****)
     

---- c_BalanceQ_nosolar  =E=  Balance of reactive power for bus without solar

c_BalanceQ_nosolar(7)..  (2.26960203519866E-7)*V_real(7) + (0)*V_imag(7) + (0)*V_LineIr(7,13,1) + (0)*V_LineIr(7,149,1) + (1)*V_LineIq(7,13,1) + (1)*V_LineIq(7,149,1) + V_q_over(7) - V_q_under(7) =E= 0.02337236510606 ;
     
      (LHS = 2.26960203519866E-7, INFES = 0.0233721381458565 ****)
     
c_BalanceQ_nosolar(18)..  (1.56035198983773E-7)*V_real(18) + (0)*V_imag(18) + (0)*V_LineIr(18,13,1) + (1)*V_LineIq(18,13,1) + V_q_over(18) - V_q_under(18) =E= 0.025235205634 ; (LHS = 1.56035198983773E-7, INFES = 0.025235049598801 ****)
     
c_BalanceQ_nosolar(149)..  V_Q(1) + (1.32393452645374E-7)*V_real(149) + (1)*V_LineIq(149,7,1) + V_q_over(149) - V_q_under(149) =E= 0 ; (LHS = 0.0852001323934526, INFES = 0.0852001323934526 ****)
     
REMAINING 2 ENTRIES SKIPPED


---- c_BalanceQ_solar  =E=  Balance of reactive power for bus with solar

c_BalanceQ_solar(13)..  Q_S(13) + (3.12070348229554E-7)*V_real(13) + (0)*V_imag(13) + (0)*V_LineIr(13,7,1) + (0)*V_LineIr(13,18,1) + (0)*V_LineIr(13,54,1) + (1)*V_LineIq(13,7,1) + (1)*V_LineIq(13,18,1) + (1)*V_LineIq(13,54,1) + V_q_over(13)
     
      - V_q_under(13) =E= 0 ; (LHS = 3.12070348229554E-7, INFES = 3.12070348229554E-7 ****)
     
c_BalanceQ_solar(57)..  Q_S(57) + (6.61967476389691E-8)*V_real(57) + (0)*V_imag(57) + (0)*V_LineIr(57,54,1) + (1)*V_LineIq(57,54,1) + V_q_over(57) - V_q_under(57) =E= 0.045344252202 ; (LHS = 6.61967476389691E-8, INFES = 0.0453441860052524 ****)
     

---- c_Lossijc  =E=  Loss on line c connecting bus i and bus j

c_Lossijc(7,13,1)..  (0)*V_LineIr(7,13,1) - (1.58872141469146E-9)*V_LineIq(7,13,1) + V_Lossijc(7,13,1) =E= 0 ; (LHS = 0)
     
c_Lossijc(13,18,1)..  (0)*V_LineIr(13,18,1) - (4.30657149195213E-9)*V_LineIq(13,18,1) + V_Lossijc(13,18,1) =E= 0 ; (LHS = 0)
     
c_Lossijc(13,54,1)..  (0)*V_LineIr(13,54,1) - (6.63858702409925E-10)*V_LineIq(13,54,1) + V_Lossijc(13,54,1) =E= 0 ; (LHS = 0)
     
REMAINING 3 ENTRIES SKIPPED

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 56
display_start
Equation Listing    SOLVE acopf Using RMINLP From line 2104


---- c_Lossi  =E=  Loss on lines connected with bus i

c_Lossi(7)..  - V_Lossijc(7,13,1) + V_Lossi(7) =E= 0 ; (LHS = 0)
     
c_Lossi(13)..  - V_Lossijc(13,18,1) - V_Lossijc(13,54,1) + V_Lossi(13) =E= 0 ; (LHS = 0)
     
c_Lossi(18)..  V_Lossi(18) =E= 0 ; (LHS = 0)
     
REMAINING 4 ENTRIES SKIPPED


---- v_generator_hardupl  =L=  bus voltage constraints upper bound

v_generator_hardupl(7)..  (1)*V_real(7) + (0)*V_imag(7) =L= 1.15 ; (LHS = 1)
     
v_generator_hardupl(13)..  (1)*V_real(13) + (0)*V_imag(13) =L= 1.15 ; (LHS = 1)
     
v_generator_hardupl(18)..  (1)*V_real(18) + (0)*V_imag(18) =L= 1.15 ; (LHS = 1)
     
REMAINING 4 ENTRIES SKIPPED


---- v_generator_harddownl  =G=  bus voltage constraints lower bound

v_generator_harddownl(7)..  (1)*V_real(7) + (0)*V_imag(7) =G= 0.88 ; (LHS = 1)
     
v_generator_harddownl(13)..  (1)*V_real(13) + (0)*V_imag(13) =G= 0.88 ; (LHS = 1)
     
v_generator_harddownl(18)..  (1)*V_real(18) + (0)*V_imag(18) =G= 0.88 ; (LHS = 1)
     
REMAINING 4 ENTRIES SKIPPED


---- p_generator_add  =E=  enforces generator participation factor in adjustment from schedule

p_generator_add(1)..  V_P(1) - V_P_system_deviation =E= 0.4 ; (LHS = 0.4)
     

---- c_BalanceP_control_solar  =E=  balance of real power for controllable solar

                NONE


---- c_switchedshuntB_Def  =E=  defines total susceptance from switched shunts at bus i

                NONE


---- c_shuntSwitchingDef1  =G=  defines number of steps switched - side 1

                NONE

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 57
display_start
Equation Listing    SOLVE acopf Using RMINLP From line 2104


---- c_shuntSwitchingDef2  =G=  defines number of steps switched - side 2

                NONE


---- c_totalShuntSwitchingDef  =G=  defines total number of steps switched

c_totalShuntSwitchingDef..  V_totalShuntSwitching =G= 0 ; (LHS = 0)
     

---- c_shuntSwitchingPenaltyDef1  =G=  defines local shunt switching penalty - segment 1

                NONE


---- c_shuntSwitchingPenaltyDef2  =G=  defines local shunt switching penalty - segment 2

                NONE


---- c_shuntTotalSwitchingPenalty  =G=  defines penalty incurred by total shunt switching

c_shuntTotalSwitchingPenalty..  V_shuntTotalSwitchingPenalty =G= 0 ; (LHS = 0)
     

---- c_shuntSwitchingTotalPenaltyDef  =G=   defines total penalty incurrent by shunt switching

c_shuntSwitchingTotalPenaltyDef..  - V_shuntTotalSwitchingPenalty + V_shuntSwitchingTotalPenalty =G= 0 ; (LHS = 0)
     

---- c_previous_solution_penalty_def  =G=  defines previous solution deviation penalty

c_previous_solution_penalty_def..  V_previous_solution_penalty =G= 0 ; (LHS = 0)
     

---- v_generator_addup  =L=  generator voltage constraints added selectively

v_generator_addup(149)..  (1)*V_real(149) =L= 1 ; (LHS = 1)
     

---- v_generator_addlow  =G=  generator voltage constraints added

v_generator_addlow(149)..  (1)*V_real(149) =G= 1 ; (LHS = 1)
     

---- c_obj  =E=  Objective function

c_obj..  - 15.6625*P_S(13) - 29.7961*P_S(57) - V_Lossi(7) - V_Lossi(13) - V_Lossi(18) - V_Lossi(149) - V_Lossi(54) - V_Lossi(57) - V_Lossi(56) - V_shuntSwitchingTotalPenalty + 168.610981076261*V_dem_Load(2) + 168.610981076261*V_dem_Load(3)
     
      + 168.610981076261*V_dem_Load(4) + 168.610981076261*V_dem_Load(5) - V_previous_solution_penalty + V_objcost =E= 630 ; (LHS = -1.06579699999998, INFES = 631.065797 ****)
     
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 58
display_start
Column Listing      SOLVE acopf Using RMINLP From line 2104


---- V_P  Real power generation of generator

V_P(1)
                (.LO, .L, .UP, .M = 0.206, 0.4, 1.0886, 0)
        1       c_BalanceP_nosolar(149)
        1       p_generator_add(1)


---- V_Q  Reactive power generation of generator

V_Q(1)
                (.LO, .L, .UP, .M = -60, 0.0852, 60, 0)
        1       c_BalanceQ_nosolar(149)


---- P_S  real power generation of solar bus

P_S(13)
                (.LO, .L, .UP, .M = 0.03, 0.03, 0.3, 0)
        1       c_BalanceP_solar(13)
      -15.6625  c_obj
        0       (OLD LEVEL ****)

P_S(57)
                (.LO, .L, .UP, .M = 0.02, 0.02, 0.25, 0)
        1       c_BalanceP_solar(57)
      -29.7961  c_obj
        0       (OLD LEVEL ****)


---- Q_S  reactive power generation of solar bus

Q_S(13)
                (.LO, .L, .UP, .M = -300, 0, 300, 0)
        1       c_BalanceQ_solar(13)

Q_S(57)
                (.LO, .L, .UP, .M = -300, 0, 300, 0)
        1       c_BalanceQ_solar(57)


---- V_real  Real part of bus voltage

V_real(7)
                (.LO, .L, .UP, .M = -1.05, 1, 1.05, 0)
      -22.9258  c_LineIrij(7,13,1)
       16.4129  c_LineIrij(149,7,1)
       22.9258  c_LineIrji(7,13,1)
      -16.4129  c_LineIrji(149,7,1)
       46.9432  c_LineIqij(7,13,1)
      -33.6238  c_LineIqij(149,7,1)
      -46.9432  c_LineIqji(7,13,1)
       33.6238  c_LineIqji(149,7,1)
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 59
display_start
Column Listing      SOLVE acopf Using RMINLP From line 2104


     V_real  Real part of bus voltage

       (0)      c_BalanceP_nosolar(7)
 (2.2696020E-7) c_BalanceQ_nosolar(7)
       (1)      v_generator_hardupl(7)
       (1)      v_generator_harddownl(7)

V_real(13)
                (.LO, .L, .UP, .M = -1.05, 1, 1.05, 0)
       22.9258  c_LineIrij(7,13,1)
      -13.9207  c_LineIrij(13,18,1)
      -34.9288  c_LineIrij(13,54,1)
      -22.9258  c_LineIrji(7,13,1)
       13.9207  c_LineIrji(13,18,1)
       34.9288  c_LineIrji(13,54,1)
      -46.9432  c_LineIqij(7,13,1)
       28.5475  c_LineIqij(13,18,1)
       72.445   c_LineIqij(13,54,1)
       46.9432  c_LineIqji(7,13,1)
      -28.5475  c_LineIqji(13,18,1)
      -72.445   c_LineIqji(13,54,1)
       (0)      c_BalanceP_solar(13)
 (3.1207035E-7) c_BalanceQ_solar(13)
       (1)      v_generator_hardupl(13)
       (1)      v_generator_harddownl(13)

V_real(18)
                (.LO, .L, .UP, .M = -1.05, 1, 1.05, 0)
       13.9207  c_LineIrij(13,18,1)
      -13.9207  c_LineIrji(13,18,1)
      -28.5475  c_LineIqij(13,18,1)
       28.5475  c_LineIqji(13,18,1)
       (0)      c_BalanceP_nosolar(18)
 (1.5603520E-7) c_BalanceQ_nosolar(18)
       (1)      v_generator_hardupl(18)
       (1)      v_generator_harddownl(18)

REMAINING 4 ENTRIES SKIPPED

---- V_imag  Imaginary part of bus voltage

V_imag(7)
                (.LO, .L, .UP, .M = -1.05, 0, 1.05, 0)
      -46.9432  c_LineIrij(7,13,1)
       33.6238  c_LineIrij(149,7,1)
       46.9432  c_LineIrji(7,13,1)
      -33.6238  c_LineIrji(149,7,1)
      -22.9258  c_LineIqij(7,13,1)
       16.4129  c_LineIqij(149,7,1)
       22.9258  c_LineIqji(7,13,1)
      -16.4129  c_LineIqji(149,7,1)
 (-2.269602E-7) c_BalanceP_nosolar(7)
       (0)      c_BalanceQ_nosolar(7)
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 60
display_start
Column Listing      SOLVE acopf Using RMINLP From line 2104


     V_imag  Imaginary part of bus voltage

       (0)      v_generator_hardupl(7)
       (0)      v_generator_harddownl(7)

V_imag(13)
                (.LO, .L, .UP, .M = -1.05, 0, 1.05, 0)
       46.9432  c_LineIrij(7,13,1)
      -28.5475  c_LineIrij(13,18,1)
      -72.445   c_LineIrij(13,54,1)
      -46.9432  c_LineIrji(7,13,1)
       28.5475  c_LineIrji(13,18,1)
       72.445   c_LineIrji(13,54,1)
       22.9258  c_LineIqij(7,13,1)
      -13.9207  c_LineIqij(13,18,1)
      -34.9288  c_LineIqij(13,54,1)
      -22.9258  c_LineIqji(7,13,1)
       13.9207  c_LineIqji(13,18,1)
       34.9288  c_LineIqji(13,54,1)
 (-3.120703E-7) c_BalanceP_solar(13)
       (0)      c_BalanceQ_solar(13)
       (0)      v_generator_hardupl(13)
       (0)      v_generator_harddownl(13)

V_imag(18)
                (.LO, .L, .UP, .M = -1.05, 0, 1.05, 0)
       28.5475  c_LineIrij(13,18,1)
      -28.5475  c_LineIrji(13,18,1)
       13.9207  c_LineIqij(13,18,1)
      -13.9207  c_LineIqji(13,18,1)
 (-1.560352E-7) c_BalanceP_nosolar(18)
       (0)      c_BalanceQ_nosolar(18)
       (0)      v_generator_hardupl(18)
       (0)      v_generator_harddownl(18)

REMAINING 3 ENTRIES SKIPPED

---- V_LineIr  Real current flowing from bus i towards bus j on line c

V_LineIr(7,13,1)
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       c_LineIrij(7,13,1)
      (-1)      c_BalanceP_nosolar(7)
       (0)      c_BalanceQ_nosolar(7)
       (0)      c_Lossijc(7,13,1)

V_LineIr(7,149,1)
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       c_LineIrji(149,7,1)
      (-1)      c_BalanceP_nosolar(7)
       (0)      c_BalanceQ_nosolar(7)

V_LineIr(13,7,1)
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 61
display_start
Column Listing      SOLVE acopf Using RMINLP From line 2104


     V_LineIr  Real current flowing from bus i towards bus j on line c

                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       c_LineIrji(7,13,1)
      (-1)      c_BalanceP_solar(13)
       (0)      c_BalanceQ_solar(13)

REMAINING 9 ENTRIES SKIPPED

---- V_LineIq  Reactive current flowing from bus i towards bus j on line c

V_LineIq(7,13,1)
                (.LO, .L, .UP, .M = -INF, 9.45667508744918E-8, +INF, 0)
        1       c_LineIqij(7,13,1)
       (0)      c_BalanceP_nosolar(7)
       (1)      c_BalanceQ_nosolar(7)
 (-1.588721E-9) c_Lossijc(7,13,1)

V_LineIq(7,149,1)
                (.LO, .L, .UP, .M = -INF, 1.32393452645374E-7, +INF, 0)
        1       c_LineIqji(149,7,1)
       (0)      c_BalanceP_nosolar(7)
       (1)      c_BalanceQ_nosolar(7)

V_LineIq(13,7,1)
                (.LO, .L, .UP, .M = -INF, 9.45667508744918E-8, +INF, 0)
        1       c_LineIqji(7,13,1)
       (0)      c_BalanceP_solar(13)
       (1)      c_BalanceQ_solar(13)

REMAINING 9 ENTRIES SKIPPED

---- V_Lossijc  Loss on line c connecting bus i and bus j

V_Lossijc(7,13,1)
                (.LO, .L, .UP, .M = -INF, 7.51201111160489E-17, +INF, 0)
        1       c_Lossijc(7,13,1)
       -1       c_Lossi(7)

V_Lossijc(13,18,1)
                (.LO, .L, .UP, .M = -INF, 3.35988369842297E-16, +INF, 0)
        1       c_Lossijc(13,18,1)
       -1       c_Lossi(13)

V_Lossijc(13,54,1)
                (.LO, .L, .UP, .M = -INF, 2.04031655909903E-17, +INF, 0)
        1       c_Lossijc(13,54,1)
       -1       c_Lossi(13)

REMAINING 3 ENTRIES SKIPPED
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 62
display_start
Column Listing      SOLVE acopf Using RMINLP From line 2104


---- V_Lossi  Loss on lines connecting with bus i

V_Lossi(7)
                (.LO, .L, .UP, .M = -INF, 7.51201111160489E-17, +INF, 0)
        1       c_Lossi(7)
       -1       c_obj

V_Lossi(13)
                (.LO, .L, .UP, .M = -INF, 3.56391535433287E-16, +INF, 0)
        1       c_Lossi(13)
       -1       c_obj

V_Lossi(18)
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       c_Lossi(18)
       -1       c_obj

REMAINING 4 ENTRIES SKIPPED

---- V_p_over  real power over

V_p_over(7)
                (.LO, .L, .UP, .M = 0, 0, 0.01, 0)
        1       c_BalanceP_nosolar(7)

V_p_over(13)
                (.LO, .L, .UP, .M = 0, 0, 0.01, 0)
        1       c_BalanceP_solar(13)

V_p_over(18)
                (.LO, .L, .UP, .M = 0, 0, 0.01, 0)
        1       c_BalanceP_nosolar(18)

REMAINING 4 ENTRIES SKIPPED

---- V_p_under  real power under

V_p_under(7)
                (.LO, .L, .UP, .M = 0, 0, 0.01, 0)
       -1       c_BalanceP_nosolar(7)

V_p_under(13)
                (.LO, .L, .UP, .M = 0, 0, 0.01, 0)
       -1       c_BalanceP_solar(13)

V_p_under(18)
                (.LO, .L, .UP, .M = 0, 0, 0.01, 0)
       -1       c_BalanceP_nosolar(18)

REMAINING 4 ENTRIES SKIPPED
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 63
display_start
Column Listing      SOLVE acopf Using RMINLP From line 2104


---- V_q_over  reactive power over

V_q_over(7)
                (.LO, .L, .UP, .M = 0, 0, 0.01, 0)
        1       c_BalanceQ_nosolar(7)

V_q_over(13)
                (.LO, .L, .UP, .M = 0, 0, 0.01, 0)
        1       c_BalanceQ_solar(13)

V_q_over(18)
                (.LO, .L, .UP, .M = 0, 0, 0.01, 0)
        1       c_BalanceQ_nosolar(18)

REMAINING 4 ENTRIES SKIPPED

---- V_q_under  reactive power under

V_q_under(7)
                (.LO, .L, .UP, .M = 0, 0, 0.01, 0)
       -1       c_BalanceQ_nosolar(7)

V_q_under(13)
                (.LO, .L, .UP, .M = 0, 0, 0.01, 0)
       -1       c_BalanceQ_solar(13)

V_q_under(18)
                (.LO, .L, .UP, .M = 0, 0, 0.01, 0)
       -1       c_BalanceQ_nosolar(18)

REMAINING 4 ENTRIES SKIPPED

---- V_totalShuntSwitching  total number of steps switched

V_totalShuntSwitching
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       c_totalShuntSwitchingDef


---- V_shuntTotalSwitchingPenalty  penalty incurred by total shunt switching

V_shuntTotalSwitchingPenalty
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       c_shuntTotalSwitchingPenalty
       -1       c_shuntSwitchingTotalPenaltyDef


---- V_shuntSwitchingTotalPenalty  total penalty incurrent by shunt switching

V_shuntSwitchingTotalPenalty
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       c_shuntSwitchingTotalPenaltyDef
       -1       c_obj
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 64
display_start
Column Listing      SOLVE acopf Using RMINLP From line 2104


     V_shuntSwitchingTotalPenalty  total penalty incurrent by shunt switching



---- V_dem_Load  demand load level

V_dem_Load(2)
                (.LO, .L, .UP, .M = 0, 0, 0.000210890660714, 0)
        1       c_BalanceP_nosolar(18)
      168.611   c_obj

V_dem_Load(3)
                (.LO, .L, .UP, .M = 0, 0, 0.000210890660714, 0)
        1       c_BalanceP_nosolar(18)
      168.611   c_obj

V_dem_Load(4)
                (.LO, .L, .UP, .M = 0, 0, 0.000210890660714, 0)
        1       c_BalanceP_nosolar(18)
      168.611   c_obj

REMAINING ENTRY SKIPPED

---- V_previous_solution_penalty  total penalty on deviation to previous solution

V_previous_solution_penalty
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       c_previous_solution_penalty_def
       -1       c_obj


---- V_objcost  Total cost of objective function

V_objcost
                (.LO, .L, .UP, .M = -INF, 7.37984193494078E-16, +INF, 0)
        1       c_obj


---- V_P_system_deviation  system total adjustment from real generation schedule

V_P_system_deviation
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
       -1       p_generator_add(1)

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 65
display_start
Model Statistics    SOLVE acopf Using RMINLP From line 2104


MODEL STATISTICS

BLOCKS OF EQUATIONS          26     SINGLE EQUATIONS           73
BLOCKS OF VARIABLES          21     SINGLE VARIABLES           94  2 projected
NON ZERO ELEMENTS           308     NON LINEAR N-Z            112
DERIVATIVE POOL              20     CONSTANT POOL              23
CODE LENGTH                 313


GENERATION TIME      =        0.002 SECONDS      4 MB  24.9.1 r63795 LEX-LEG


EXECUTION TIME       =        0.004 SECONDS      4 MB  24.9.1 r63795 LEX-LEG
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 66
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2104


               S O L V E      S U M M A R Y

     MODEL   acopf               OBJECTIVE  V_objcost
     TYPE    RMINLP              DIRECTION  MINIMIZE
     SOLVER  KNITRO              FROM LINE  2104

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      2 Locally Optimal           
**** OBJECTIVE VALUE              630.9248

 RESOURCE USAGE, LIMIT          0.028        60.000
 ITERATION COUNT, LIMIT         0    2000000000
 EVALUATION ERRORS              0             0

KNITRO           24.9.1 r63795 Released Aug 30, 2017 LEG x86 64bit/Linux      

*** Error Cannot open parameter file "/home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/knitro.opt"
*** Error Error code = 2; No such file or directory
Artelys Knitro Optimizer 10.3.0

=======================================
          Commercial License
         Artelys Knitro 10.3.0
=======================================

Knitro presolve eliminated 8 variables 
and 11 constraints.

datacheck:               0
hessian_no_f:            1
maxtime_real:            60
newpoint:                3
par_concurrent_evals:    0
Knitro changing algorithm from AUTO to 1.
Knitro changing bar_initpt from AUTO to 3.
Knitro changing bar_murule from AUTO to 4.
Knitro changing bar_penaltycons from AUTO to 1.
Knitro changing bar_penaltyrule from AUTO to 2.
Knitro changing bar_switchrule from AUTO to 2.
Knitro changing linesearch from AUTO to 1.
Knitro changing linsolver from AUTO to 2.
Knitro shifted start point to satisfy presolved bounds (38 variables).
Knitro fixing 3 variables eliminated from the presolve.

Problem Characteristics                    ( Presolved)
-----------------------
Objective goal:  Minimize
Number of variables:                          93 (        85)
    bounded below only:                        4 (         4)
    bounded above only:                        0 (         0)
    bounded below and above:                  51 (        51)
    fixed:                                     0 (         0)
    free:                                     38 (        30)
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 67
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2104


Number of constraints:                        72 (        61)
    linear equalities:                        32 (        24)
    nonlinear equalities:                     20 (        20)
    linear one-sided inequalities:             4 (         1)
    nonlinear one-sided inequalities:         16 (        16)
    linear two-sided inequalities:             0 (         0)
    nonlinear two-sided inequalities:          0 (         0)
Number of nonzeros in Jacobian:              292 (       274)
Number of nonzeros in Hessian:                77 (        77)

  Iter      Objective      FeasError   OptError    ||Step||    CGits 
--------  --------------  ----------  ----------  ----------  -------
       0    6.379687e+02   4.000e-01
       8    6.309248e+02   1.412e-07   8.595e-08   8.888e-02        0

EXIT: Locally optimal solution found.

Final Statistics
----------------
Final objective value               =   6.30924763907592e+02
Final feasibility error (abs / rel) =   1.41e-07 / 1.41e-07
Final optimality error  (abs / rel) =   8.60e-08 / 8.60e-10
# of iterations                     =          8 
# of CG iterations                  =          0 
# of function evaluations           =         10
# of gradient evaluations           =         10
# of Hessian evaluations            =          8
Total program time (secs)           =       0.00274 (     0.000 CPU time)
Time spent in evaluations (secs)    =       0.00042

===============================================================================

Solve finished: status = optimal

---- EQU c_LineIrij  Real current flowing from bus i into bus j along line c

                LOWER          LEVEL          UPPER         MARGINAL

7  .13.1          .              .              .             0.0084      
13 .18.1          .              .              .             0.0112      
13 .54.1          .              .              .             0.0096      
149.7 .1          .              .              .             0.0055      
54 .57.1          .              .              .             0.0111      
54 .56.1          .              .              .             0.0094      

---- EQU c_LineIrji  Real  current flowing from bus j into bus i along line c

                LOWER          LEVEL          UPPER         MARGINAL

7  .13.1          .              .              .             0.0084      
13 .18.1          .              .              .             0.0113      
13 .54.1          .              .              .             0.0096      
149.7 .1          .              .              .             0.0055      
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 68
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2104


     EQU c_LineIrji  Real  current flowing from bus j into bus i along line c

                LOWER          LEVEL          UPPER         MARGINAL

54 .57.1          .              .              .             0.0111      
54 .56.1          .              .              .             0.0094      

---- EQU c_LineIqij  Reactive current  flowing from bus i into bus j along line c

                LOWER          LEVEL          UPPER         MARGINAL

7  .13.1          .              .              .       -3.693549E-5      
13 .18.1          .              .              .            -0.0005      
13 .54.1          .              .              .       -8.041176E-5      
149.7 .1          .              .              .            -0.0001      
54 .57.1          .              .              .            -0.0001      
54 .56.1          .              .              .       -9.266510E-5      

---- EQU c_LineIqji  Reactive current flowing from bus j into bus i along line c

                LOWER          LEVEL          UPPER         MARGINAL

7  .13.1          .              .              .       -7.234389E-5      
13 .18.1          .              .              .            -0.0006      
13 .54.1          .              .              .       -9.450914E-5      
149.7 .1          .              .              .            -0.0002      
54 .57.1          .              .              .            -0.0001      
54 .56.1          .              .              .       -9.102067E-5      

---- EQU c_BalanceP_nosolar  Balance of real power for bus without solar

           LOWER          LEVEL          UPPER         MARGINAL

7           0.0707         0.0707         0.0707         0.0055      
18          0.1134         0.1134         0.1134         0.0113      
149          .              .              .       -3.373107E-8      
54           .              .              .             0.0096      
56           .              .              .             0.0095      

---- EQU c_BalanceP_solar  Balance of real power for bus with solar

          LOWER          LEVEL          UPPER         MARGINAL

13          .       -8.140626E-8          .             0.0084      
57         0.1586         0.1586         0.1586         0.0112      

---- EQU c_BalanceQ_nosolar  Balance of reactive power for bus without solar

           LOWER          LEVEL          UPPER         MARGINAL

7           0.0234         0.0234         0.0234         0.0002      
18          0.0252         0.0252         0.0252         0.0004      
149          .              .              .       3.268805E-12      
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 69
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2104


     EQU c_BalanceQ_nosolar  Balance of reactive power for bus without solar

           LOWER          LEVEL          UPPER         MARGINAL

54           .              .              .       1.6434699E-7      
56           .              .              .       -2.227273E-8      

---- EQU c_BalanceQ_solar  Balance of reactive power for bus with solar

          LOWER          LEVEL          UPPER         MARGINAL

13          .       3.6915751E-8          .       -1.42543E-12      
57         0.0453         0.0453         0.0453   6.909812E-13      

---- EQU c_Lossijc  Loss on line c connecting bus i and bus j

                LOWER          LEVEL          UPPER         MARGINAL

7  .13.1          .       -3.526065E-8          .             1.0000      
13 .18.1          .       -4.058316E-8          .             1.0000      
13 .54.1          .              .              .             1.0000      
149.7 .1          .       -2.798638E-8          .             1.0000      
54 .57.1          .              .              .             1.0000      
54 .56.1          .              .              .             1.0000      

---- EQU c_Lossi  Loss on lines connected with bus i

           LOWER          LEVEL          UPPER         MARGINAL

7            .              .              .             1.0000      
13           .              .              .             1.0000      
18           .              .              .             1.0000      
149          .              .              .             1.0000      
54           .              .              .             1.0000      
57           .              .              .             1.0000      
56           .              .              .             1.0000      

---- EQU v_generator_hardupl  bus voltage constraints upper bound

           LOWER          LEVEL          UPPER         MARGINAL

7          -INF            0.9972         1.1500   -1.768825E-9      
13         -INF            0.9959         1.1500   -1.766301E-9      
18         -INF            0.9940         1.1500   -1.752697E-9      
149        -INF            1.0000         1.1500   -1.751884E-9      
54         -INF            0.9953         1.1500   -1.768775E-9      
57         -INF            0.9945         1.1500   -1.767229E-9      
56         -INF            0.9954         1.1500   -1.770842E-9      
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 70
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2104


---- EQU v_generator_harddownl  bus voltage constraints lower bound

           LOWER          LEVEL          UPPER         MARGINAL

7           0.8800         0.9972        +INF      2.1395526E-9      
13          0.8800         0.9959        +INF      2.1596550E-9      
18          0.8800         0.9940        +INF      2.1617726E-9      
149         0.8800         1.0000        +INF      2.1541358E-9      
54          0.8800         0.9953        +INF      2.1623620E-9      
57          0.8800         0.9945        +INF      2.1719959E-9      
56          0.8800         0.9954        +INF      2.1595555E-9      

---- EQU p_generator_add  enforces generator participation factor in adjustment from schedule

         LOWER          LEVEL          UPPER         MARGINAL

1         0.4000         0.4000         0.4000         EPS         

---- EQU c_BalanceP_control_solar  balance of real power for controllable solar

                NONE


---- EQU c_switchedshuntB_Def  defines total susceptance from switched shunts at bus i

                NONE


---- EQU c_shuntSwitchingDef1  defines number of steps switched - side 1

                NONE


---- EQU c_shuntSwitchingDef2  defines number of steps switched - side 2

                NONE


                           LOWER          LEVEL          UPPER         MARGINAL

---- EQU c_totalSh~          .             2.4183        +INF            EPS         

  c_totalShuntSwitchingDef  defines total number of steps switched

---- EQU c_shuntSwitchingPenaltyDef1  defines local shunt switching penalty - segment 1

                NONE

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 71
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2104


                           LOWER          LEVEL          UPPER         MARGINAL

---- EQU c_shuntTo~          .              .            +INF            EPS         
---- EQU c_shuntSw~          .              .            +INF            0.6951      
---- EQU c_previou~          .              .            +INF            EPS         

  c_shuntTotalSwitchingPenalty  defines penalty incurred by total shunt switching
  c_shuntSwitchingTotalPenaltyDef   defines total penalty incurrent by shunt switching
  c_previous_solution_penalty_def  defines previous solution deviation penalty

---- EQU v_generator_addup  generator voltage constraints added selectively

           LOWER          LEVEL          UPPER         MARGINAL

149        -INF            1.0000         1.0000        -5.8417      

---- EQU v_generator_addlow  generator voltage constraints added

           LOWER          LEVEL          UPPER         MARGINAL

149         1.0000         1.0000        +INF            5.8393      

                           LOWER          LEVEL          UPPER         MARGINAL

---- EQU c_obj            630.0000       630.0000       630.0000         1.0000      

  c_obj  Objective function

---- VAR V_P  Real power generation of generator

         LOWER          LEVEL          UPPER         MARGINAL

1         0.2060         0.2283         1.0886   3.3731074E-8      

---- VAR V_Q  Reactive power generation of generator

         LOWER          LEVEL          UPPER         MARGINAL

1       -60.0000         0.0054        60.0000   2.255611E-14      

---- VAR P_S  real power generation of solar bus

          LOWER          LEVEL          UPPER         MARGINAL

13         0.0300         0.0300         0.3000        15.6541      
57         0.0200         0.0200         0.2500        29.7849      
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 72
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2104


---- VAR Q_S  reactive power generation of solar bus

          LOWER          LEVEL          UPPER         MARGINAL

13      -300.0000         0.0253       300.0000   1.104082E-15      
57      -300.0000         0.0455       300.0000   -6.03220E-16      

---- VAR V_real  Real part of bus voltage

           LOWER          LEVEL          UPPER         MARGINAL

7          -1.0500         0.9971         1.0500   -7.744613E-8      
13         -1.0500         0.9958         1.0500   -4.381184E-9      
18         -1.0500         0.9940         1.0500   -4.656362E-8      
149        -1.0500         1.0000         1.0500   -6.538055E-9      
54         -1.0500         0.9952         1.0500   -5.091728E-9      
57         -1.0500         0.9945         1.0500   -4.816285E-9      
56         -1.0500         0.9953         1.0500   -4.993413E-9      

---- VAR V_imag  Imaginary part of bus voltage

          LOWER          LEVEL          UPPER         MARGINAL

7         -1.0500        -0.0055         1.0500   -3.145116E-8      
13        -1.0500        -0.0086         1.0500   3.9735448E-8      
18        -1.0500        -0.0113         1.0500   -2.213368E-8      
54        -1.0500        -0.0098         1.0500   -3.965441E-9      
57        -1.0500        -0.0113         1.0500   5.778367E-10      
56        -1.0500        -0.0096         1.0500   3.628792E-10      

---- VAR V_LineIr  Real current flowing from bus i towards bus j on line c

                 LOWER          LEVEL          UPPER         MARGINAL

7  .13 .1        -INF            0.1722        +INF            EPS         
7  .149.1        -INF           -0.2331        +INF            EPS         
13 .7  .1        -INF           -0.1722        +INF            EPS         
13 .18 .1        -INF            0.1030        +INF            EPS         
13 .54 .1        -INF            0.1092        +INF            EPS         
18 .13 .1        -INF           -0.1030        +INF            EPS         
149.7  .1        -INF            0.2331        +INF            EPS         
54 .13 .1        -INF           -0.1092        +INF            EPS         
54 .57 .1        -INF            0.1293        +INF            EPS         
54 .56 .1        -INF           -0.0100        +INF            EPS         
57 .54 .1        -INF           -0.1293        +INF            EPS         
56 .54 .1        -INF            0.0100        +INF            EPS         
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 73
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2104


---- VAR V_LineIq  Reactive current flowing from bus i towards bus j on line c

                 LOWER          LEVEL          UPPER         MARGINAL

7  .13 .1        -INF            0.0086        +INF            EPS         
7  .149.1        -INF            0.0053        +INF            EPS         
13 .7  .1        -INF           -0.0086        +INF            EPS         
13 .18 .1        -INF           -0.0165        +INF            EPS         
13 .54 .1        -INF           -0.0007        +INF            EPS         
18 .13 .1        -INF            0.0165        +INF            EPS         
149.7  .1        -INF           -0.0053        +INF            EPS         
54 .13 .1        -INF            0.0007        +INF            EPS         
54 .57 .1        -INF           -0.0013        +INF            EPS         
54 .56 .1        -INF            0.0001        +INF            EPS         
57 .54 .1        -INF            0.0013        +INF            EPS         
56 .54 .1        -INF           -0.0001        +INF            EPS         

---- VAR V_Lossijc  Loss on line c connecting bus i and bus j

                LOWER          LEVEL          UPPER         MARGINAL

7  .13.1        -INF            0.0002        +INF            EPS         
13 .18.1        -INF            0.0002        +INF            EPS         
13 .54.1        -INF      6.4374175E-5        +INF            EPS         
149.7 .1        -INF            0.0006        +INF            EPS         
54 .57.1        -INF      9.8604773E-5        +INF            EPS         
54 .56.1        -INF      8.4773462E-7        +INF            EPS         

---- VAR V_Lossi  Loss on lines connecting with bus i

           LOWER          LEVEL          UPPER         MARGINAL

7          -INF            0.0002        +INF            EPS         
13         -INF            0.0002        +INF            EPS         
18         -INF             .            +INF            EPS         
149        -INF            0.0006        +INF            EPS         
54         -INF      9.9452508E-5        +INF            EPS         
57         -INF             .            +INF            EPS         
56         -INF             .            +INF            EPS         

---- VAR V_p_over  real power over

           LOWER          LEVEL          UPPER         MARGINAL

7            .             0.0100         0.0100        -0.0055      
13           .             0.0100         0.0100        -0.0084      
18           .             0.0100         0.0100        -0.0113      
149          .             0.0074         0.0100   3.3732569E-8      
54           .             0.0100         0.0100        -0.0096      
57           .             0.0100         0.0100        -0.0112      
56           .             0.0100         0.0100        -0.0095      
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 74
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2104


---- VAR V_p_under  real power under

           LOWER          LEVEL          UPPER         MARGINAL

7            .       3.3956351E-8         0.0100         0.0055      
13           .       2.3477873E-8         0.0100         0.0084      
18           .       1.5412255E-8         0.0100         0.0113      
149          .             0.0026         0.0100   -3.373251E-8      
54           .       1.6952328E-8         0.0100         0.0096      
57           .       1.1633523E-8         0.0100         0.0112      
56           .       1.7441921E-8         0.0100         0.0095      

---- VAR V_q_over  reactive power over

           LOWER          LEVEL          UPPER         MARGINAL

7            .             0.0099         0.0100        -0.0002      
13           .             0.0051         0.0100   1.349174E-12      
18           .             0.0100         0.0100        -0.0004      
149          .             0.0049         0.0100   -3.03759E-12      
54           .             0.0051         0.0100   -1.643470E-7      
57           .             0.0050         0.0100   -6.90981E-13      
56           .             0.0050         0.0100   2.2272730E-8      

---- VAR V_q_under  reactive power under

           LOWER          LEVEL          UPPER         MARGINAL

7            .       7.9276742E-5         0.0100         0.0002      
13           .             0.0049         0.0100   -1.30235E-12      
18           .       1.2846618E-5         0.0100         0.0004      
149          .             0.0051         0.0100   3.084417E-12      
54           .             0.0048         0.0100   1.6434699E-7      
57           .             0.0050         0.0100   6.909812E-13      
56           .             0.0050         0.0100   -2.227268E-8      

                           LOWER          LEVEL          UPPER         MARGINAL

---- VAR V_totalSh~          .             2.4183        +INF            EPS         
---- VAR V_shuntTo~          .              .            +INF            0.6951      
---- VAR V_shuntSw~          .              .            +INF            0.3049      

  V_totalShuntSwitching  total number of steps switched
  V_shuntTotalSwitchingPenalty  penalty incurred by total shunt switching
  V_shuntSwitchingTotalPenalty  total penalty incurrent by shunt switching

---- VAR V_dem_Load  demand load level

         LOWER          LEVEL          UPPER         MARGINAL

2          .             0.0002         0.0002      -168.6223      
3          .             0.0002         0.0002      -168.6223      
4          .             0.0002         0.0002      -168.6223      
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 75
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2104


     VAR V_dem_Load  demand load level

         LOWER          LEVEL          UPPER         MARGINAL

5          .             0.0002         0.0002      -168.6223      

                           LOWER          LEVEL          UPPER         MARGINAL

---- VAR V_previou~          .              .            +INF            1.0000      
---- VAR V_objcost         -INF          630.9248        +INF             .          
---- VAR V_P_syste~        -INF           -0.1717        +INF            EPS         

  V_previous_solution_penalty  total penalty on deviation to previous solution
  V_objcost  Total cost of objective function
  V_P_system_deviation  system total adjustment from real generation schedule


**** REPORT SUMMARY :        0     NONOPT
                             0 INFEASIBLE
                             0  UNBOUNDED
                             0     ERRORS
                            50  PROJECTED
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 76
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2104


**** SOLVER STATUS FILE LISTED BELOW
=C
=CKNITRO           24.9.1 r63795 Released Aug 30, 2017 LEG x86 64bit/Linux      
=C
=0KNITRO           24.9.1 r63795 Released Aug 30, 2017 LEG x86 64bit/Linux      
=1
=2
=1
=C*** Error Cannot open parameter file "/home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/knitro.opt"
=C*** Error Error code = 2; No such file or directory
=2
=CArtelys Knitro Optimizer 10.3.0
=9?
?C
?C=======================================
?C          Commercial License
?C         Artelys Knitro 10.3.0
?C=======================================
?C
?CKnitro presolve eliminated 8 variables 
?Cand 11 constraints.
?C
?Cdatacheck:               0
?Chessian_no_f:            1
?Cmaxtime_real:            60
?Cnewpoint:                3
?Cpar_concurrent_evals:    0
?CKnitro changing algorithm from AUTO to 1.
?CKnitro changing bar_initpt from AUTO to 3.
?CKnitro changing bar_murule from AUTO to 4.
?CKnitro changing bar_penaltycons from AUTO to 1.
?CKnitro changing bar_penaltyrule from AUTO to 2.
?CKnitro changing bar_switchrule from AUTO to 2.
?CKnitro changing linesearch from AUTO to 1.
?CKnitro changing linsolver from AUTO to 2.
?CKnitro shifted start point to satisfy presolved bounds (38 variables).
?CKnitro fixing 3 variables eliminated from the presolve.
?C
?CProblem Characteristics                    ( Presolved)
?C-----------------------
?CObjective goal:  Minimize
?CNumber of variables:                          93 (        85)
?C    bounded below only:                        4 (         4)
?C    bounded above only:                        0 (         0)
?C    bounded below and above:                  51 (        51)
?C    fixed:                                     0 (         0)
?C    free:                                     38 (        30)
?CNumber of constraints:                        72 (        61)
?C    linear equalities:                        32 (        24)
?C    nonlinear equalities:                     20 (        20)
?C    linear one-sided inequalities:             4 (         1)
?C    nonlinear one-sided inequalities:         16 (        16)
?C    linear two-sided inequalities:             0 (         0)
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 77
display_start
Solution Report     SOLVE acopf Using RMINLP From line 2104


?C    nonlinear two-sided inequalities:          0 (         0)
?CNumber of nonzeros in Jacobian:              292 (       274)
?CNumber of nonzeros in Hessian:                77 (        77)
?C
?C  Iter      Objective      FeasError   OptError    ||Step||    CGits 
?C--------  --------------  ----------  ----------  ----------  -------
?C       0    6.379687e+02   4.000e-01
?C       8    6.309248e+02   1.412e-07   8.595e-08   8.888e-02        0
?C
?CEXIT: Locally optimal solution found.
?C
?CFinal Statistics
?C----------------
?CFinal objective value               =   6.30924763907592e+02
?CFinal feasibility error (abs / rel) =   1.41e-07 / 1.41e-07
?CFinal optimality error  (abs / rel) =   8.60e-08 / 8.60e-10
?C# of iterations                     =          8 
?C# of CG iterations                  =          0 
?C# of function evaluations           =         10
?C# of gradient evaluations           =         10
?C# of Hessian evaluations            =          8
?CTotal program time (secs)           =       0.00274 (     0.000 CPU time)
?CTime spent in evaluations (secs)    =       0.00042
?C
?C===============================================================================
?C
?9=
=CSolve finished: status = optimal
**** SOLVER STATUS FILE LISTED ABOVE
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 78
display_start
E x e c u t i o n


----   2206 PARAMETER TotalLoss            =        0.001   Total Loss of all the lines
            PARAMETER infeas               =        0.000  Number of infeasibilities from model solve

----   2231 PARAMETER Vm  bus voltage magnitude

7   0.997,    13  0.996,    18  0.994,    149 1.000,    54  0.995,    57  0.995,    56  0.995


----   2270 PARAMETER Pmax  gen maximum real power output

1 1.089


----   2270 PARAMETER Pmin  gen minimum real power output

1 0.206


----   2270 PARAMETER ratio  transformer tap ratio

                  1

7  .13        1.000
7  .149       1.000
13 .7         1.000
13 .18        1.000
13 .54        1.000
18 .13        1.000
149.7         1.000
54 .13        1.000
54 .57        1.000
54 .56        1.000
57 .54        1.000
56 .54        1.000


----   2270 PARAMETER switchedShuntB_init  initial value of switched shunt susceptance

                      ( ALL       0.000 )


----   2270 VARIABLE V_dem_Load.L  demand load level

2 2.108907E-4,    3 2.108907E-4,    4 2.108907E-4,    5 2.108907E-4


----   2270 VARIABLE V_switchedshuntB.L  total susceptance from switched shunts connected to bus i

                      ( ALL       0.000 )

GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 79
display_start
E x e c u t i o n


----   2270 VARIABLE V_P.L  Real power generation of generator

1 0.228


----   2270 VARIABLE V_P.Up (+INF) Real power generation of generator

1 1.089


----   2270 VARIABLE V_P.Lo (-INF) Real power generation of generator

1 0.206


----   2270 VARIABLE V_Q.L  Reactive power generation of generator

1 0.005


----   2270 VARIABLE V_Q.Up (+INF) Reactive power generation of generator

1 60.000


----   2270 VARIABLE V_Q.Lo (-INF) Reactive power generation of generator

1 -60.000


----   2270 PARAMETER Qmax  gen maximum reactive power output

1 60.000


----   2270 PARAMETER Qmin  gen minimum reactive power output

1 -60.000


**** REPORT FILE SUMMARY

report_file /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/report.txt


EXECUTION TIME       =        0.003 SECONDS      3 MB  24.9.1 r63795 LEX-LEG
GAMS 24.9.1  r63795 Released Aug 30, 2017 LEX-LEG x86 64bit/Linux                                                                                                                                                                     10/30/17 23:29:47 Page 80
display_start
E x e c u t i o n


USER: GAMS Development Corporation, USA              G871201/0000CA-ANY
      Free Demo, +1 202-342-0180, support@gams.com, www.gams.com DC0000


**** FILE SUMMARY

Input      /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/iv_acopf_reformulation_lop_adj.gms
Output     /home/yingying/git/volttron/TransactiveEnergy/CoordinatorAgent/coordinator/_gams_py_gjo0.lst
